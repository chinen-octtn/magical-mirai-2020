/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 	};
/******/
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"main": 0
/******/ 	};
/******/
/******/
/******/
/******/ 	// script path function
/******/ 	function jsonpScriptSrc(chunkId) {
/******/ 		return __webpack_require__.p + "" + chunkId + ".script.js"
/******/ 	}
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/ 	// This file contains only the entry chunk.
/******/ 	// The chunk loading function for additional chunks
/******/ 	__webpack_require__.e = function requireEnsure(chunkId) {
/******/ 		var promises = [];
/******/
/******/
/******/ 		// JSONP chunk loading for javascript
/******/
/******/ 		var installedChunkData = installedChunks[chunkId];
/******/ 		if(installedChunkData !== 0) { // 0 means "already installed".
/******/
/******/ 			// a Promise means "currently loading".
/******/ 			if(installedChunkData) {
/******/ 				promises.push(installedChunkData[2]);
/******/ 			} else {
/******/ 				// setup Promise in chunk cache
/******/ 				var promise = new Promise(function(resolve, reject) {
/******/ 					installedChunkData = installedChunks[chunkId] = [resolve, reject];
/******/ 				});
/******/ 				promises.push(installedChunkData[2] = promise);
/******/
/******/ 				// start chunk loading
/******/ 				var script = document.createElement('script');
/******/ 				var onScriptComplete;
/******/
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.src = jsonpScriptSrc(chunkId);
/******/
/******/ 				// create error before stack unwound to get useful stacktrace later
/******/ 				var error = new Error();
/******/ 				onScriptComplete = function (event) {
/******/ 					// avoid mem leaks in IE.
/******/ 					script.onerror = script.onload = null;
/******/ 					clearTimeout(timeout);
/******/ 					var chunk = installedChunks[chunkId];
/******/ 					if(chunk !== 0) {
/******/ 						if(chunk) {
/******/ 							var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 							var realSrc = event && event.target && event.target.src;
/******/ 							error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 							error.name = 'ChunkLoadError';
/******/ 							error.type = errorType;
/******/ 							error.request = realSrc;
/******/ 							chunk[1](error);
/******/ 						}
/******/ 						installedChunks[chunkId] = undefined;
/******/ 					}
/******/ 				};
/******/ 				var timeout = setTimeout(function(){
/******/ 					onScriptComplete({ type: 'timeout', target: script });
/******/ 				}, 120000);
/******/ 				script.onerror = script.onload = onScriptComplete;
/******/ 				document.head.appendChild(script);
/******/ 			}
/******/ 		}
/******/ 		return Promise.all(promises);
/******/ 	};
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// on error function for async loading
/******/ 	__webpack_require__.oe = function(err) { console.error(err); throw err; };
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/js/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {}; // cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n  throw new Error('setTimeout has not been defined');\n}\n\nfunction defaultClearTimeout() {\n  throw new Error('clearTimeout has not been defined');\n}\n\n(function () {\n  try {\n    if (typeof setTimeout === 'function') {\n      cachedSetTimeout = setTimeout;\n    } else {\n      cachedSetTimeout = defaultSetTimout;\n    }\n  } catch (e) {\n    cachedSetTimeout = defaultSetTimout;\n  }\n\n  try {\n    if (typeof clearTimeout === 'function') {\n      cachedClearTimeout = clearTimeout;\n    } else {\n      cachedClearTimeout = defaultClearTimeout;\n    }\n  } catch (e) {\n    cachedClearTimeout = defaultClearTimeout;\n  }\n})();\n\nfunction runTimeout(fun) {\n  if (cachedSetTimeout === setTimeout) {\n    //normal enviroments in sane situations\n    return setTimeout(fun, 0);\n  } // if setTimeout wasn't available but was latter defined\n\n\n  if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n    cachedSetTimeout = setTimeout;\n    return setTimeout(fun, 0);\n  }\n\n  try {\n    // when when somebody has screwed with setTimeout but no I.E. maddness\n    return cachedSetTimeout(fun, 0);\n  } catch (e) {\n    try {\n      // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n      return cachedSetTimeout.call(null, fun, 0);\n    } catch (e) {\n      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n      return cachedSetTimeout.call(this, fun, 0);\n    }\n  }\n}\n\nfunction runClearTimeout(marker) {\n  if (cachedClearTimeout === clearTimeout) {\n    //normal enviroments in sane situations\n    return clearTimeout(marker);\n  } // if clearTimeout wasn't available but was latter defined\n\n\n  if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n    cachedClearTimeout = clearTimeout;\n    return clearTimeout(marker);\n  }\n\n  try {\n    // when when somebody has screwed with setTimeout but no I.E. maddness\n    return cachedClearTimeout(marker);\n  } catch (e) {\n    try {\n      // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n      return cachedClearTimeout.call(null, marker);\n    } catch (e) {\n      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n      // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n      return cachedClearTimeout.call(this, marker);\n    }\n  }\n}\n\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n  if (!draining || !currentQueue) {\n    return;\n  }\n\n  draining = false;\n\n  if (currentQueue.length) {\n    queue = currentQueue.concat(queue);\n  } else {\n    queueIndex = -1;\n  }\n\n  if (queue.length) {\n    drainQueue();\n  }\n}\n\nfunction drainQueue() {\n  if (draining) {\n    return;\n  }\n\n  var timeout = runTimeout(cleanUpNextTick);\n  draining = true;\n  var len = queue.length;\n\n  while (len) {\n    currentQueue = queue;\n    queue = [];\n\n    while (++queueIndex < len) {\n      if (currentQueue) {\n        currentQueue[queueIndex].run();\n      }\n    }\n\n    queueIndex = -1;\n    len = queue.length;\n  }\n\n  currentQueue = null;\n  draining = false;\n  runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n  var args = new Array(arguments.length - 1);\n\n  if (arguments.length > 1) {\n    for (var i = 1; i < arguments.length; i++) {\n      args[i - 1] = arguments[i];\n    }\n  }\n\n  queue.push(new Item(fun, args));\n\n  if (queue.length === 1 && !draining) {\n    runTimeout(drainQueue);\n  }\n}; // v8 likes predictible objects\n\n\nfunction Item(fun, array) {\n  this.fun = fun;\n  this.array = array;\n}\n\nItem.prototype.run = function () {\n  this.fun.apply(null, this.array);\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\n\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) {\n  return [];\n};\n\nprocess.binding = function (name) {\n  throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () {\n  return '/';\n};\n\nprocess.chdir = function (dir) {\n  throw new Error('process.chdir is not supported');\n};\n\nprocess.umask = function () {\n  return 0;\n};\n\n//# sourceURL=webpack:///./node_modules/process/browser.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/dist/index.es.js":
/*!*********************************************************!*\
  !*** ./node_modules/textalive-app-api/dist/index.es.js ***!
  \*********************************************************/
/*! exports provided: BasicTimer, Color, Ease, Matrix2D, NullGraphicsDriver, Player, Point, SongleTimer, UnitTypes, dataUrlToString, findTimedObject, isStringEncodedDataUrl, sortedIndex, stringToDataUrl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BasicTimer\", function() { return vt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Color\", function() { return z; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Ease\", function() { return Pe; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Matrix2D\", function() { return tt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NullGraphicsDriver\", function() { return nt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Player\", function() { return Je; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Point\", function() { return et; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SongleTimer\", function() { return bt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UnitTypes\", function() { return e; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"dataUrlToString\", function() { return _; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"findTimedObject\", function() { return Q; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isStringEncodedDataUrl\", function() { return b; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sortedIndex\", function() { return Z; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"stringToDataUrl\", function() { return w; });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"./node_modules/textalive-app-api/node_modules/axios/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__);\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/** textalive-app-api v0.1.2 | Copyright 2020 AIST TextAlive Project <textalive-ml@aist.go.jp> (https://textalive.jp) */\n\n\nvar e = {\n  NONE: 0,\n  PHRASE: 1,\n  WORD: 2,\n  CHAR: 4,\n  GRAPHIC: 8,\n  ALL: 63,\n  PUBLIC: 64\n},\n    r = /^https?:\\/\\/uploader\\.ongaaccel\\.jp\\/files\\?guid=([a-zA-Z0-9]+)/i,\n    n = /^https?:\\/\\/songle\\.jp\\/uploads\\/([a-zA-Z0-9]+)\\.mp3$/i,\n    i = /^uploaded:([a-zA-Z0-9]+)$/i,\n    o = /^songle\\.jp\\/uploads\\/([a-zA-Z0-9]+)\\.mp3$/i,\n    s = /^https?:\\/\\/piapro\\.jp\\/t\\/([^/]+)(\\/[0-9]+)?$/i,\n    a = {\n  getSongPathFromUrl: function getSongPathFromUrl(t) {\n    if (a.isUploaderUrl(t)) {\n      var e = n.exec(t);\n      if (e) return \"songle.jp/uploads/\" + e[1] + \".mp3\";\n      var i = r.exec(t);\n      if (i) return \"songle.jp/uploads/\" + i[1] + \".mp3\";\n    }\n\n    return /https?:\\/\\/(.+)/.exec(t)[1];\n  },\n  isUploaderUrl: function isUploaderUrl(t) {\n    return n.test(t) || r.test(t);\n  },\n  isUploaderPath: function isUploaderPath(t) {\n    return o.test(t) || i.test(t);\n  },\n  getUploaderGuid: function getUploaderGuid(t) {\n    var e = o.exec(t);\n    if (e) return e[1];\n    var r = i.exec(t);\n    return r ? r[1] : null;\n  },\n  getSongUrlFromUploaderGuid: function getSongUrlFromUploaderGuid(t) {\n    return t ? \"https://songle.jp/uploads/\" + t + \".mp3\" : null;\n  },\n  getSongUrlFromPath: function getSongUrlFromPath(t) {\n    var e = a.getUploaderGuid(t);\n    return e ? a.getSongUrlFromUploaderGuid(e) : \"https://\" + t;\n  },\n  isYouTubeUrl: function isYouTubeUrl(t) {\n    return /^https?:\\/\\/((www|m)\\.)?youtube\\.com/i.test(t);\n  },\n  isNicovideoUrl: function isNicovideoUrl(t) {\n    return /^https?:\\/\\/(www\\.)?nicovideo.jp/i.test(t);\n  },\n  isVideoSiteUrl: function isVideoSiteUrl(t) {\n    return a.isYouTubeUrl(t) || a.isNicovideoUrl(t);\n  },\n  isPiaproUrl: function isPiaproUrl(t) {\n    return s.test(t);\n  }\n},\n    u = /^https:\\/\\/songle\\.jp\\/api\\/v[0-9]+\\/users\\/(.+)\\/uploads\\/(.+)$/,\n    c = function c(t) {\n  return u.test(t);\n},\n    l = function l(t) {\n  var e = u.exec(t);\n  return e ? {\n    user: e[1],\n    identifier: e[2]\n  } : {\n    user: null,\n    identifier: null\n  };\n},\n    p = function () {\n  function t() {}\n\n  return t.prototype.isLicenseLoading = function (t) {\n    return !t || !t.song || void 0 === t.lyrics || void 0 === t.backgroundImage;\n  }, t.prototype.checkLicenses = function (t) {\n    return !this.isLicenseLoading(t) && this.checkLicense(t.song) && this.checkLicense(t.lyrics) && this.checkLicense(t.backgroundImage);\n  }, t.prototype.checkLicense = function (t) {\n    return null === t || (1 === t.contentType ? this.checkMusicLicense(t.license) : 2 === t.contentType ? this.checkTextLicense(t.license) : 0 === t.contentType && (!!this.isBackgroundColorAsset(t) || this.checkBackgroundImageLicense(t.license)));\n  }, t.prototype.checkMusicLicense = function (t) {\n    return t.condition && t.condition.uploader || !(!t.condition || t.condition.ns || t.condition.nc || t.condition.org || t.condition.clb);\n  }, t.prototype.checkTextLicense = function (t) {\n    return t.condition && t.condition.uploader || !(!t.condition || t.condition.ns || t.condition.org || t.condition.clb);\n  }, t.prototype.checkBackgroundImageLicense = function (t) {\n    return !(!t.condition || t.condition.ns || t.condition.nc || t.condition.org || t.condition.clb);\n  }, t.prototype.isUploaderAsset = function (t) {\n    return t && t.url && (a.isUploaderUrl(t.url) || c(t.url));\n  }, t.prototype.isPiaproAsset = function (t) {\n    return t && t.url && a.isPiaproUrl(t.url);\n  }, t.prototype.isBlankBackgroundAsset = function (t) {\n    return !t || !t.originalUrl;\n  }, t.prototype.isBackgroundColorAsset = function (t) {\n    var e = t && t.originalUrl ? t.originalUrl : \"\";\n    return /^#[0-9a-fA-F]{3,6}$/.test(e);\n  }, t.prototype.isBackgroundPiaproImageAsset = function (t) {\n    var e = t && t.originalUrl ? t.originalUrl : \"\";\n    return a.isPiaproUrl(e);\n  }, t.prototype.isBackgroundSpecialImageAsset = function (t) {\n    var e = t && t.originalUrl ? t.originalUrl : \"\";\n    return /^snowmiku2016-([0-9]{2})$/.test(e);\n  }, t.prototype.getQueryParameter = function (t) {\n    return !t || t.license && !this.checkBackgroundImageLicense(t.license) ? null : t.originalUrl;\n  }, t;\n}(),\n    _h = function h(t, e) {\n  return (_h = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var r in e) {\n      e.hasOwnProperty(r) && (t[r] = e[r]);\n    }\n  })(t, e);\n},\n    _d = function d() {\n  return (_d = Object.assign || function (t) {\n    for (var e, r = 1, n = arguments.length; r < n; r++) {\n      for (var i in e = arguments[r]) {\n        Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);\n      }\n    }\n\n    return t;\n  }).apply(this, arguments);\n};\n\nfunction f(t, e, r, n) {\n  return new (r || (r = Promise))(function (i, o) {\n    function s(t) {\n      try {\n        u(n.next(t));\n      } catch (t) {\n        o(t);\n      }\n    }\n\n    function a(t) {\n      try {\n        u(n[\"throw\"](t));\n      } catch (t) {\n        o(t);\n      }\n    }\n\n    function u(t) {\n      var e;\n      t.done ? i(t.value) : (e = t.value, e instanceof r ? e : new r(function (t) {\n        t(e);\n      })).then(s, a);\n    }\n\n    u((n = n.apply(t, e || [])).next());\n  });\n}\n\nfunction y(t, e) {\n  var r,\n      n,\n      i,\n      o,\n      s = {\n    label: 0,\n    sent: function sent() {\n      if (1 & i[0]) throw i[1];\n      return i[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return o = {\n    next: a(0),\n    \"throw\": a(1),\n    \"return\": a(2)\n  }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n    return this;\n  }), o;\n\n  function a(o) {\n    return function (a) {\n      return function (o) {\n        if (r) throw new TypeError(\"Generator is already executing.\");\n\n        for (; s;) {\n          try {\n            if (r = 1, n && (i = 2 & o[0] ? n[\"return\"] : o[0] ? n[\"throw\"] || ((i = n[\"return\"]) && i.call(n), 0) : n.next) && !(i = i.call(n, o[1])).done) return i;\n\n            switch (n = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n              case 0:\n              case 1:\n                i = o;\n                break;\n\n              case 4:\n                return s.label++, {\n                  value: o[1],\n                  done: !1\n                };\n\n              case 5:\n                s.label++, n = o[1], o = [0];\n                continue;\n\n              case 7:\n                o = s.ops.pop(), s.trys.pop();\n                continue;\n\n              default:\n                if (!((i = (i = s.trys).length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                  s = 0;\n                  continue;\n                }\n\n                if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                  s.label = o[1];\n                  break;\n                }\n\n                if (6 === o[0] && s.label < i[1]) {\n                  s.label = i[1], i = o;\n                  break;\n                }\n\n                if (i && s.label < i[2]) {\n                  s.label = i[2], s.ops.push(o);\n                  break;\n                }\n\n                i[2] && s.ops.pop(), s.trys.pop();\n                continue;\n            }\n\n            o = e.call(t, s);\n          } catch (t) {\n            o = [6, t], n = 0;\n          } finally {\n            r = i = 0;\n          }\n        }\n\n        if (5 & o[0]) throw o[1];\n        return {\n          value: o[0] ? o[1] : void 0,\n          done: !0\n        };\n      }([o, a]);\n    };\n  }\n}\n\nvar g = {\n  fallback: {\n    protocol: \"https\"\n  },\n  songle: {\n    domain: \"songle.jp\"\n  },\n  textalive: {\n    domain: \"api.textalive.jp\"\n  }\n};\n\nfunction v(t) {\n  var e,\n      r,\n      n = 0;\n  if (0 === t.length) return n;\n\n  for (e = 0, r = t.length; e < r; e++) {\n    n = (n << 5) - n + t.charCodeAt(e), n |= 0;\n  }\n\n  return n;\n}\n\ng.songle.protocol = g.songle.protocol || g.fallback.protocol, g.songle.server = g.songle.protocol + \"://\" + g.songle.domain, g.textalive.protocol = g.textalive.protocol || g.fallback.protocol, g.textalive.server = g.textalive.protocol + \"://\" + g.textalive.domain;\nvar m = new (function (e) {\n  function r() {\n    return null !== e && e.apply(this, arguments) || this;\n  }\n\n  return function (t, e) {\n    function r() {\n      this.constructor = t;\n    }\n\n    _h(t, e), t.prototype = null === e ? Object.create(e) : (r.prototype = e.prototype, new r());\n  }(r, e), Object.defineProperty(r.prototype, \"endpoint\", {\n    get: function get() {\n      return g.textalive.server + \"/etc/license\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), r.prototype.read = function (e, r) {\n    var n;\n    return void 0 === r && (r = !0), f(this, void 0, void 0, function () {\n      var i, o;\n      return y(this, function (s) {\n        switch (s.label) {\n          case 0:\n            return s.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint, {\n              params: {\n                url: e,\n                token: v(\"ta\" + e),\n                skipOptoutCheck: !!r || void 0\n              }\n            })];\n\n          case 1:\n            return i = s.sent(), [3, 3];\n\n          case 2:\n            return s.sent(), [3, 3];\n\n          case 3:\n            return !i || 200 !== i.status || (null === (n = i.data) || void 0 === n ? void 0 : n.error) ? [2, {\n              originalUrl: null,\n              license: {\n                code: i ? i.status : 404\n              }\n            }] : ((o = i.data).license.code = i.status, 0 === o.contentType && (o.css = 'url(\"' + o.contentUrl + '\")'), [2, o]);\n        }\n      });\n    });\n  }, r;\n}(p))();\n\nfunction b(t) {\n  return \"string\" == typeof t && 0 === t.indexOf(\"data:text/plain;base64,\");\n}\n\nfunction _(t) {\n  if (!b(t)) return null;\n  var e = t.split(\",\")[1];\n  return decodeURIComponent(atob(e).split(\"\").map(function (t) {\n    return \"%\" + (\"00\" + t.charCodeAt(0).toString(16)).slice(-2);\n  }).join(\"\"));\n}\n\nfunction w(t) {\n  return \"string\" != typeof t ? null : \"data:text/plain;base64,\" + btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g, function (t, e) {\n    return String.fromCharCode(parseInt(\"0x\" + e));\n  }));\n}\n\nfunction P(t, e, r, n, i) {\n  var o = void 0 === window.screenLeft ? screen.left : window.screenLeft,\n      s = void 0 === window.screenTop ? screen.top : window.screenTop,\n      a = (window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width) / 2 - r / 2 + o,\n      u = (window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height) / 2 - n / 2 + s,\n      c = window.open(t, e, \"width=\" + r + \",height=\" + n + \",top=\" + u + \",left=\" + a + (i ? \",\" + i : \"\"));\n  return window.focus && c.focus(), c;\n}\n\nvar E = new (function () {\n  function e() {\n    this.listeners = [], this.pollingTimeout = null;\n  }\n\n  return Object.defineProperty(e.prototype, \"endpoint\", {\n    get: function get() {\n      return g.textalive.server + \"/\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"songleEndpoint\", {\n    get: function get() {\n      return g.songle.server + \"/\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), e.prototype.isLoading = function () {\n    return !!this.userProfile;\n  }, e.prototype.spoof = function (t) {\n    this.userProfile = t;\n  }, e.prototype.getProfile = function () {\n    return f(this, void 0, void 0, function () {\n      return y(this, function (t) {\n        return this.userProfile ? [2, this.userProfile] : [2, this.doGetProfile()];\n      });\n    });\n  }, e.prototype.doGetProfile = function () {\n    return f(this, void 0, void 0, function () {\n      var e;\n      return y(this, function (r) {\n        switch (r.label) {\n          case 0:\n            this.request || (this.request = axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint + \"profile\", {\n              withCredentials: !0\n            })), r.label = 1;\n\n          case 1:\n            return r.trys.push([1, 3,, 4]), [4, this.request];\n\n          case 2:\n            return e = r.sent(), this.request = null, e && 200 === e.status ? (this.emitUserProfile(e.data), [2, this.userProfile]) : [2, null];\n\n          case 3:\n            return r.sent(), [2, null];\n\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.getMergingUsers = function () {\n    return f(this, void 0, void 0, function () {\n      var e;\n      return y(this, function (r) {\n        switch (r.label) {\n          case 0:\n            return r.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint + \"profile/merge\", {\n              withCredentials: !0\n            })];\n\n          case 1:\n            return (e = r.sent()) && 200 === e.status && e.data ? [2, [e.data.user, e.data.mergeWith]] : [2, [null, null]];\n\n          case 2:\n            return r.sent(), [2, [null, null]];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.mergeUsers = function () {\n    var e;\n    return f(this, void 0, void 0, function () {\n      var r, n, i, o, s, a;\n      return y(this, function (u) {\n        switch (u.label) {\n          case 0:\n            return [4, this.getToken()];\n\n          case 1:\n            r = u.sent(), u.label = 2;\n\n          case 2:\n            return u.trys.push([2, 4,, 5]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(this.endpoint + \"profile/merge\", {\n              token: r\n            }, {\n              withCredentials: !0\n            })];\n\n          case 3:\n            if (!(n = u.sent()) || 200 !== n.status || !(null === (e = n.data) || void 0 === e ? void 0 : e.success)) return [2, null];\n\n            for (i = n.data.user, o = 0, s = this.listeners; o < s.length; o++) {\n              (a = s[o]).onUserMerged && a.onUserMerged(i);\n            }\n\n            return [2, i];\n\n          case 4:\n            return u.sent(), [2, null];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.isYouTubeUser = function (t) {\n    return t && t.user && \"string\" == typeof t.user.youtubeIdString;\n  }, e.prototype.isPiaproUser = function (t) {\n    return t && t.user && \"string\" == typeof t.user.piaproIdString;\n  }, e.prototype.isSongleUser = function (t) {\n    return t && t.user && (\"number\" == typeof t.user.songleUserId && t.user.songleUserId >= 0 || \"string\" == typeof t.user.songleAccessToken);\n  }, e.prototype.isSpoofingSongleUser = function (t) {\n    return this.isSongleUser(t) && (\"number\" != typeof t.user.id || t.user.id < 0);\n  }, e.prototype.addListener = function (t) {\n    t && this.listeners.push(t);\n  }, e.prototype.removeListener = function (t) {\n    this.listeners = this.listeners.filter(function (e) {\n      return e !== t;\n    });\n  }, e.prototype.emitUserProfile = function (t) {\n    this.userProfile = t;\n\n    for (var e = 0, r = this.listeners; e < r.length; e++) {\n      var n = r[e];\n      n.onUserProfileUpdated && n.onUserProfileUpdated(t), this.userProfile.user ? n.onUserLoggedIn && n.onUserLoggedIn(t.user) : n.onUserLoggedOut && n.onUserLoggedOut();\n    }\n  }, e.prototype.authenticate = function (e, r) {\n    return f(this, void 0, void 0, function () {\n      var n;\n      return y(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return i.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint + \"profile/logins/basic\", {\n              auth: {\n                username: String(e),\n                password: r\n              },\n              withCredentials: !0\n            })];\n\n          case 1:\n            return (n = i.sent()) && 200 === n.status && n.data ? [2, n.data] : [2, null];\n\n          case 2:\n            return i.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.loginTwitter = function (t) {\n    return this.login(t, \"twitter\");\n  }, e.prototype.loginGitHub = function (t) {\n    return this.login(t, \"github\");\n  }, e.prototype.loginYouTube = function (t) {\n    return this.login(t, \"youtube\");\n  }, e.prototype.loginPiapro = function (t) {\n    return this.login(t, \"piapro\");\n  }, e.prototype.loginSongle = function (t) {\n    return this.login(t, \"songle\");\n  }, e.prototype.login = function (t, e) {\n    return t && t.preventDefault(), !!e && (P(this.endpoint + \"profile/logins/\" + e, \"TextAliveAuth\", 600, 480, \"status=no,toolbar=no,menubar=no\"), this.startMonitoringAuthState(), !1);\n  }, e.prototype.logoutTwitter = function (t) {\n    return this.logout(t, \"twitter\");\n  }, e.prototype.logoutGitHub = function (t) {\n    return this.logout(t, \"github\");\n  }, e.prototype.logoutYouTube = function (t) {\n    return this.logout(t, \"youtube\");\n  }, e.prototype.logoutPiapro = function (t) {\n    return this.logout(t, \"piapro\");\n  }, e.prototype.logoutSongle = function (t) {\n    return this.logout(t, \"songle\");\n  }, e.prototype.logout = function (t, e) {\n    return void 0 === e && (e = null), t && t.preventDefault(), P(this.endpoint + \"profile/logouts/\" + (e || \"all\"), \"TextAliveAuth\", 600, 480, \"status=no,toolbar=no,menubar=no\"), this.startMonitoringAuthState(), !1;\n  }, e.prototype.startMonitoringAuthState = function () {\n    var t = this;\n    this.pollingTimeout && (clearTimeout(this.pollingTimeout), this.pollingTimeout = null);\n\n    var e = function e(r) {\n      if (r.data && r.data.textalive) {\n        if (r.source.postMessage(\"close\", r.origin), r.data.merge) return t.getMergingUsers().then(function (e) {\n          for (var r = e[0], n = e[1], i = 0, o = t.listeners; i < o.length; i++) {\n            var s = o[i];\n            s.onUserMergeRequired && s.onUserMergeRequired(r, n);\n          }\n        })[\"catch\"](function () {}), void window.removeEventListener(\"message\", e);\n        t.doGetProfile(), window.removeEventListener(\"message\", e);\n      }\n    };\n\n    window.addEventListener(\"message\", e);\n  }, e.prototype.getToken = function () {\n    return f(this, void 0, void 0, function () {\n      return y(this, function (t) {\n        return this.userProfile ? [2, this.userProfile.status.token] : this.token ? [2, this.token] : [2, this.doGetToken()];\n      });\n    });\n  }, e.prototype.doGetToken = function () {\n    var e;\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint + \"profile/token\", {\n              withCredentials: !0\n            })];\n\n          case 1:\n            return r = n.sent(), (null === (e = null == r ? void 0 : r.data) || void 0 === e ? void 0 : e.token) && (this.token = r.data.token), [2, this.token];\n\n          case 2:\n            return n.sent(), [2, \"\"];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e;\n}())(),\n    O = new (function () {\n  function e() {}\n\n  return Object.defineProperty(e.prototype, \"endpoint\", {\n    get: function get() {\n      return g.textalive.server + \"/text-parser/\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), e.prototype.parse = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r, n;\n      return y(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return [4, E.getToken()];\n\n          case 1:\n            r = i.sent(), i.label = 2;\n\n          case 2:\n            return i.trys.push([2, 4,, 5]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(this.endpoint, {\n              text: e,\n              token: r\n            }, {\n              withCredentials: !0,\n              responseType: \"json\"\n            })];\n\n          case 3:\n            return (n = i.sent()) && 200 === n.status ? [2, n.data] : [2, null];\n\n          case 4:\n            return i.sent(), [2, null];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e;\n}())(),\n    T = new (function () {\n  function e() {}\n\n  return Object.defineProperty(e.prototype, \"endpoint\", {\n    get: function get() {\n      return g.textalive.server + \"/fonts\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), e.prototype.listAvailableFonts = function () {\n    return f(this, void 0, void 0, function () {\n      var t = this;\n      return y(this, function (e) {\n        switch (e.label) {\n          case 0:\n            return this.data ? [3, 2] : [4, this.fetchInfo()];\n\n          case 1:\n            e.sent(), e.label = 2;\n\n          case 2:\n            return this.data && this.data.fontFamilies ? [2, Object.keys(this.data.fontFamilies).map(function (e) {\n              return _d({\n                key: e\n              }, t.data.fontFamilies[e]);\n            })] : [2, []];\n        }\n      });\n    });\n  }, e.prototype.getFrequentChars = function () {\n    return f(this, void 0, void 0, function () {\n      return y(this, function (t) {\n        switch (t.label) {\n          case 0:\n            return this.data ? [3, 2] : [4, this.fetchInfo()];\n\n          case 1:\n            t.sent(), t.label = 2;\n\n          case 2:\n            return [2, this.data && this.data.frequentChars || \"\"];\n        }\n      });\n    });\n  }, e.prototype.fetchInfo = function () {\n    return f(this, void 0, void 0, function () {\n      var e;\n      return y(this, function (r) {\n        switch (r.label) {\n          case 0:\n            return r.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint + \"/index.json\")];\n\n          case 1:\n            return (e = r.sent()) && 200 === e.status && e.data ? (this.data = e.data, [3, 3]) : (this.data = null, [2, null]);\n\n          case 2:\n            return r.sent(), this.data = null, [3, 3];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e;\n}())();\nvar S = new RegExp(\"\\\\b([CDEFGAB](?:b|bb)*(?:#|##|sus|maj|min|aug|m|M)*[\\\\d/]*(?:[CDEFGAB](?:b|bb)*(?:#|##|sus|maj|min|aug|m|M)*[\\\\d/]*)*\\\\-){2}\");\n\nfunction R(t, e, r) {\n  return !S.test(t) && !t.match(/[（(].+(?:転載|書き起こし).*[）)]/) && (!t.match(/(作詞|作曲).+(作詞|作曲)/) || 0 !== e && e !== r.length - 2);\n}\n\nfunction x(t) {\n  return !t.match(new RegExp(\"[（(]?※\"));\n}\n\nvar A = {},\n    C = {};\n\nfunction N(e, r, n) {\n  var i,\n      o = this;\n  return \"undefined\" == typeof window || !(null === (i = null === window || void 0 === window ? void 0 : window.navigator) || void 0 === i ? void 0 : i.userAgent) || window.navigator.userAgent.includes(\"Node.js\") || window.navigator.userAgent.includes(\"jsdom\") ? function (e, r, n) {\n    return n && console.log(\"parse lyrics: loading on Node.js\", e), new Promise(function (n, i) {\n      axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(e, {\n        responseType: \"text/plain\"\n      }).then(function (t) {\n        var e = t.data,\n            o = new Function(\"let g=global;global={};\" + e + \";let res=global;global=g\"),\n            s = {};\n\n        try {\n          o.bind(s)(), n(r(s));\n        } catch (t) {\n          i(t);\n        }\n      })[\"catch\"](i);\n    });\n  }(e, r, n) : (n && console.log(\"parse lyrics: loading\", e), new Promise(function (t, i) {\n    try {\n      var s = document.createElement(\"script\"),\n          a = null;\n      window.module && (a = window.module, delete window.module), s.src = e, s.onload = function () {\n        return f(o, void 0, void 0, function () {\n          var o, u;\n          return y(this, function (c) {\n            switch (c.label) {\n              case 0:\n                document.body.removeChild(s), n && console.log(\"parse lyrics: load\", e), window.Songle && window.Songle.Utils && window.Songle.Utils.url2Lyric || (a && (window.module = a), i(\"url2Lyric not found\")), c.label = 1;\n\n              case 1:\n                return c.trys.push([1, 3, 4, 5]), o = t, [4, r(window)];\n\n              case 2:\n                return o.apply(void 0, [c.sent()]), [3, 5];\n\n              case 3:\n                return u = c.sent(), i(u), [3, 5];\n\n              case 4:\n                return a && (window.module = a), [7];\n\n              case 5:\n                return [2];\n            }\n          });\n        });\n      }, s.onerror = function (t) {\n        return i(t.message);\n      }, document.body.appendChild(s);\n    } catch (t) {\n      console.error(\"failed to call lyrics parser\", e, t);\n    }\n  }));\n}\n\nvar k = new (function () {\n  function e() {}\n\n  return Object.defineProperty(e.prototype, \"endpoint\", {\n    get: function get() {\n      return g.songle.server + \"/lyrics/\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"localLyricsEndpoint\", {\n    get: function get() {\n      return g.textalive.server + \"/etc/lyrics\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"timingEndpoint\", {\n    get: function get() {\n      return g.songle.server + \"/songs/\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"lyricsParserEndpoint\", {\n    get: function get() {\n      return g.songle.server;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"lyricsPostEndpoint\", {\n    get: function get() {\n      return g.songle.server;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), e.prototype.isUploaderUrl = function (t) {\n    return c(t);\n  }, e.prototype.parseUploaderUrl = function (t) {\n    return l(t);\n  }, e.prototype.getRecentlySynchronizedCount = function () {\n    return f(this, void 0, void 0, function () {\n      var e;\n      return y(this, function (r) {\n        switch (r.label) {\n          case 0:\n            return r.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint + \"recently_synchronized_count.json\")];\n\n          case 1:\n            return (e = r.sent()) && 200 === e.status && e.data ? [2, e.data.count] : [2, -1];\n\n          case 2:\n            return r.sent(), [2, -1];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.getRecentlySynchronizedList = function (e, r) {\n    return void 0 === e && (e = 1), f(this, void 0, void 0, function () {\n      var n;\n      return y(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return i.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint + \"recently_synchronized.json\", {\n              params: _d({\n                page: e\n              }, r)\n            })];\n\n          case 1:\n            return (n = i.sent()) && 200 === n.status ? [2, n.data] : [2, null];\n\n          case 2:\n            return i.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.load = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.timingEndpoint + e + \"/lyrics.json\")];\n\n          case 1:\n            return (r = n.sent()) && 200 === r.status ? [2, r.data] : [2, null];\n\n          case 2:\n            return n.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.loadDetail = function (e, r) {\n    return f(this, void 0, void 0, function () {\n      var n, i;\n      return y(this, function (o) {\n        switch (o.label) {\n          case 0:\n            if (A[e] && A[e][r]) return [2, A[e][r]];\n            o.label = 1;\n\n          case 1:\n            return o.trys.push([1, 3,, 4]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.timingEndpoint + e + \"/lyrics/\" + (r < 0 ? \"latest\" : r) + \".json\")];\n\n          case 2:\n            return (i = o.sent()) && 200 === i.status ? (n = i.data, [3, 4]) : [2, null];\n\n          case 3:\n            return o.sent(), [2, null];\n\n          case 4:\n            return A[e] || (A[e] = {}), A[e][n.id] = n, r < 0 && (A[e][-1] = n), [2, n];\n        }\n      });\n    });\n  }, e.prototype.loadDiffs = function (e, r) {\n    return f(this, void 0, void 0, function () {\n      var n;\n      return y(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return i.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.timingEndpoint + e + \"/lyrics/\" + r + \"/diffs.json\")];\n\n          case 1:\n            return (n = i.sent()) && 200 === n.status ? [2, n.data] : [2, null];\n\n          case 2:\n            return i.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.loadDiff = function (e, r, n) {\n    return f(this, void 0, void 0, function () {\n      return y(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return i.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.timingEndpoint + e + \"/lyrics/\" + r + (n < 0 ? \"\" : 0 === n ? \"/original\" : \"/diffs/\" + n + \"/lyrics\") + \".json\")];\n\n          case 1:\n            return [2, i.sent().data];\n\n          case 2:\n            return i.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.loadAllRevisionsForSong = function (t) {\n    return f(this, void 0, void 0, function () {\n      var e, r, n, i, o, s, a, u, c, l;\n      return y(this, function (p) {\n        switch (p.label) {\n          case 0:\n            return [4, this.load(t)];\n\n          case 1:\n            e = p.sent(), r = [], n = 0, i = e.lyrics, p.label = 2;\n\n          case 2:\n            return n < i.length ? (o = i[n], [4, this.loadDetail(t, o.id)]) : [3, 6];\n\n          case 3:\n            return s = p.sent(), [4, this.loadDiffs(t, s.id)];\n\n          case 4:\n            if (a = p.sent(), r.push({\n              lyrics: s,\n              updated_at: new Date(s.created_at)\n            }), Array.isArray(a)) for (u = 0, c = a; u < c.length; u++) {\n              l = c[u], r.push({\n                diff_id: l.id,\n                source_id: l.source_id,\n                lyrics: s,\n                updated_at: new Date(l.updated_at)\n              });\n            }\n            p.label = 5;\n\n          case 5:\n            return n++, [3, 2];\n\n          case 6:\n            return [2, r.sort(function (t, e) {\n              var r = e.updated_at.getTime() - t.updated_at.getTime();\n              return 0 === r ? e.diff_id - t.diff_id : r;\n            })];\n        }\n      });\n    });\n  }, e.prototype.getLatestRevision = function (t) {\n    return t.filter(function (t) {\n      return !(t.lyrics.processing || t.lyrics.failed);\n    })[0];\n  }, e.prototype.fetchLocalLyricBody = function (e) {\n    var r, n;\n    return f(this, void 0, void 0, function () {\n      var i, o, s;\n      return y(this, function (a) {\n        switch (a.label) {\n          case 0:\n            this.verbose && (\"string\" == typeof e ? console.log(\"load locally-stored lyrics for song code\", e) : console.log(\"load locally-stored lyrics for lyric id\", e)), o = {}, \"string\" == typeof e ? o.code = e : o.lyricId = e, a.label = 1;\n\n          case 1:\n            return a.trys.push([1, 3,, 4]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.localLyricsEndpoint + \"/token\", {\n              params: o\n            })];\n\n          case 2:\n            return !(s = a.sent()) || 200 !== s.status || s.data.error ? [2, null] : (i = s.data.token, [3, 4]);\n\n          case 3:\n            return a.sent(), [2, null];\n\n          case 4:\n            return a.trys.push([4, 6,, 7]), o.token = i, [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.localLyricsEndpoint, {\n              params: o\n            })];\n\n          case 5:\n            return (s = a.sent()) && 200 === s.status && !(null === (r = s.data) || void 0 === r ? void 0 : r.error) && (null === (n = s.data) || void 0 === n ? void 0 : n.text) ? (this.verbose && console.log(\"loaded locally-stored lyrics with params\", o), [2, s.data.text]) : [2, null];\n\n          case 6:\n            return a.sent(), [2, null];\n\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.fetchSongleLyricBody = function (e, r) {\n    return f(this, void 0, void 0, function () {\n      var n, i, o, s, a, u, c, l, p, h, d;\n      return y(this, function (f) {\n        switch (f.label) {\n          case 0:\n            if (!(n = this.parseUploaderUrl(e)).identifier) throw new Error(\"unsupported lyrics url \" + e);\n            return [4, E.getProfile()];\n\n          case 1:\n            if (i = f.sent(), !E.isSongleUser(i)) throw new Error(\"Songle authentication is required\");\n            if (C[o = e + \"//\" + r]) return [2, C[o]];\n            E.isSpoofingSongleUser(i) && (a = i.user, u = a.songleUserId, c = a.songleAccessToken, l = a.songleRefreshToken, s = {\n              songleUserId: u,\n              songleAccessToken: c,\n              songleRefreshToken: l\n            }), p = g.textalive.server + \"/songle/users/\" + n.user + \"/uploads/\" + n.identifier, f.label = 2;\n\n          case 2:\n            return f.trys.push([2, 4,, 5]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(p, {\n              withCredentials: !0,\n              params: s\n            })];\n\n          case 3:\n            return d = f.sent(), h = d.data, [3, 5];\n\n          case 4:\n            return f.sent(), h = null, [3, 5];\n\n          case 5:\n            return h && (C[o] = h), [2, h];\n        }\n      });\n    });\n  }, e.prototype.fetchPiaproLyricBody = function (t, e) {\n    return f(this, void 0, void 0, function () {\n      var r, n, i, o;\n      return y(this, function (s) {\n        switch (s.label) {\n          case 0:\n            if (!a.isPiaproUrl(t)) throw new Error(\"unsupported lyrics url \" + t);\n            return C[r = t + \"//\" + e] ? [2, C[r]] : [4, m.read(t, !0)];\n\n          case 1:\n            if (n = s.sent(), !m.isPiaproAsset(n)) throw new Error(\"unsupported piapro lyrics url \" + t);\n            return i = _(n.contentUrl), [4, this.parseLyricBody(i, e)];\n\n          case 2:\n            return (o = s.sent()) && (C[r] = o), [2, o];\n        }\n      });\n    });\n  }, e.prototype.fetchInternalLyricBody = function (t, e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        if (r = new URL(t), \"undefined\" == typeof location || location.protocol !== r.protocol || location.hostname !== r.hostname) throw new Error(\"direct access not supported for lyrics url \" + t);\n        return [2, this.fetchCrossOriginLyricBody(t, e)];\n      });\n    });\n  }, e.prototype.fetchCrossOriginLyricBody = function (e, r) {\n    return f(this, void 0, void 0, function () {\n      var n, i, o, s;\n      return y(this, function (a) {\n        switch (a.label) {\n          case 0:\n            if (C[n = e + \"//\" + r]) return [2, C[n]];\n            a.label = 1;\n\n          case 1:\n            return a.trys.push([1, 3,, 4]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(e, {\n              responseType: \"text\"\n            })];\n\n          case 2:\n            return o = a.sent(), i = o.data, [3, 4];\n\n          case 3:\n            return a.sent(), this.verbose && console.error(\"direct access not supported for lyrics url \" + e), [2, this.fetchProxiedLyricBody(e, r)];\n\n          case 4:\n            return [4, this.parseLyricBody(i, r)];\n\n          case 5:\n            return (s = a.sent()) && (C[n] = s), [2, s];\n        }\n      });\n    });\n  }, e.prototype.fetchProxiedLyricBody = function (t, e) {\n    return f(this, void 0, void 0, function () {\n      var r, n;\n      return y(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return C[r = t + \"//\" + e] ? [2, C[r]] : (this.verbose && console.log(\"load lyrics from the external server\", t), [4, N(this.lyricsParserEndpoint + e, function (e) {\n              return new Promise(function (r, n) {\n                e.Songle.Utils.url2Lyric(t, function (t) {\n                  return r(t);\n                }, function (t) {\n                  return n(t);\n                });\n              });\n            }, this.verbose)]);\n\n          case 1:\n            return n = i.sent(), C[r] = n, [2, n];\n        }\n      });\n    });\n  }, e.prototype.parseLyricBody = function (t, e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, N(this.lyricsParserEndpoint + e, function (e) {\n              return e.Songle.Utils.parseLyric(t);\n            }, this.verbose)];\n\n          case 1:\n            return r = n.sent(), [3, 3];\n\n          case 2:\n            return n.sent(), r = function (t) {\n              return function (t) {\n                var e = new RegExp(\"[\\\\u4E00-\\\\u9FAF|\\\\uFF66-\\\\uFF9D|\\\\u31F0-\\\\u31FF]+[\\uFF08\\\\(]([\\\\u3041-\\\\u3096\\\\u309D-\\\\u309F]+)[\\\\)\\uFF09]\", \"g\");\n                return t.replace(e, function (t, e) {\n                  return e;\n                });\n              }(function (t) {\n                for (var e, r, n, i, o, s = new RegExp(\"[（(]?(.)繰り返し[)）]?\", \"g\"); null !== (r = s.exec(t));) {\n                  n = r[1], i = new RegExp(\"^(\" + n + \"[\\\\s\\\\S]+?)(?=\\\\n\\\\n[^\\\\u3000|\\\\s])\", \"m\"), null !== (o = t.match(i)) && (e = o[1].replace(new RegExp(\"^\" + n, \"m\"), \"\").replace(new RegExp(\"^\\\\n\"), \"\").replace(new RegExp(\"^\\\\u3000\", \"mg\"), \"\"), t = (t = t.replace(i, function () {\n                    return e;\n                  })).replace(new RegExp(\"[（\\\\(]?\" + n + \"繰り返し[\\\\)）]?\", \"g\"), e).replace(new RegExp(\"^\" + n, \"m\"), \"\"));\n                }\n\n                return t;\n              }(function (t) {\n                var e,\n                    r = t.split(/\\n/);\n                return r.forEach(function (t, r) {\n                  t.match(/^\\S+：\\S+$/m) && (e = r);\n                }), void 0 !== e && e < 5 ? r.slice(e + 1).join(\"\\n\") : t;\n              }(t.replace(/^\\ufeff/, \"\").replace(/\\r/, \"\").split(/\\n/).filter(R).filter(function (t) {\n                return !t.match(/^#/);\n              }).join(\"\\n\").replace(/^\\s+/, \"\")).split(/\\n/).filter(R).join(\"\\n\"))).split(/\\n/).filter(x).join(\"\\n\").replace(/\\n\\n+/g, \"\\n\\n\").replace(/\\n+$/g, \"\\n\");\n            }(t), [3, 3];\n\n          case 3:\n            return [2, r];\n        }\n      });\n    });\n  }, e.prototype.fetchLyricBody = function (e, r) {\n    var n = r.parserPath,\n        i = r.directAccess;\n    return f(this, void 0, void 0, function () {\n      var r, o;\n      return y(this, function (s) {\n        switch (s.label) {\n          case 0:\n            if (b(e)) return this.verbose && console.log(\"load lyrics from the data url\", e), [2, _(e)];\n            if (this.isUploaderUrl(e)) return [2, this.fetchSongleLyricBody(e, n)];\n            if (a.isPiaproUrl(e)) return [2, this.fetchPiaproLyricBody(e, n)];\n            s.label = 1;\n\n          case 1:\n            return s.trys.push([1, 7,, 8]), r = new URL(e), \"undefined\" != typeof location && location.protocol !== r.protocol && \"https:\" !== r.protocol ? [3, 6] : \"undefined\" != typeof location && location.hostname !== r.hostname ? [3, 2] : (i = !0, [3, 5]);\n\n          case 2:\n            return s.trys.push([2, 4,, 5]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.localLyricsEndpoint + \"/cors\", {\n              params: {\n                url: e\n              }\n            })];\n\n          case 3:\n            return o = s.sent(), i = o && 200 === o.status && o.data.data.enabled, [3, 5];\n\n          case 4:\n            return s.sent(), [3, 5];\n\n          case 5:\n            if (i) return this.verbose && console.log(\"load lyrics directly\", e), [2, this.fetchCrossOriginLyricBody(e, n)];\n            s.label = 6;\n\n          case 6:\n            return [3, 8];\n\n          case 7:\n            return s.sent(), [3, 8];\n\n          case 8:\n            return [2, this.fetchProxiedLyricBody(e, n)];\n        }\n      });\n    });\n  }, e.prototype.post = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r, n;\n      return y(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return i.trys.push([0, 2,, 3]), r = e.forceUpdate ? {\n              url: e.lyricsUrl,\n              force_create: \"true\"\n            } : {\n              url: e.lyricsUrl\n            }, [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(this.lyricsPostEndpoint + \"/songs/\" + e.songId + \"/lyrics.json\", r, {\n              responseType: \"json\"\n            })];\n\n          case 1:\n            return [2, {\n              success: 200 === (n = i.sent()).status,\n              lyricsId: n.data.id\n            }];\n\n          case 2:\n            return [2, {\n              success: !1,\n              error: i.sent().message\n            }];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.postPrivate = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r, n, i, o, s, a, u, c, l, p, h, d;\n      return y(this, function (f) {\n        switch (f.label) {\n          case 0:\n            return [4, E.getProfile()];\n\n          case 1:\n            if (r = f.sent(), !E.isSongleUser(r)) throw new Error(\"Songle authentication is required\");\n            E.isSpoofingSongleUser(r) ? (i = r.user, o = i.songleUserId, s = i.songleAccessToken, a = i.songleRefreshToken, u = {\n              songleUserId: o,\n              songleAccessToken: s,\n              songleRefreshToken: a\n            }, n = \"?\" + Object.keys(u).map(function (t) {\n              return t + \"=\" + encodeURIComponent(u[t]);\n            }).join(\"&\")) : n = \"\", c = e.songId, l = e.lyricsText, (p = new FormData()).append(\"text\", l), f.label = 2;\n\n          case 2:\n            return f.trys.push([2, 4,, 5]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(g.textalive.server + \"/songle/me/songs/\" + c + \"/lyrics.json\" + n, p, {\n              withCredentials: !0\n            })];\n\n          case 3:\n            return h = f.sent(), d = h.data.data.lyric, [2, {\n              success: 200 === h.status,\n              error: null,\n              lyrics: d\n            }];\n\n          case 4:\n            return [2, {\n              success: !1,\n              error: f.sent().message\n            }];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.update = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(this.lyricsPostEndpoint + \"/songs/\" + e.songCode + \"/lyrics/\" + e.lyricsId + \"/diffs.json\", e.lyricsData ? {\n              lyric: JSON.stringify(e.lyricsData)\n            } : {\n              source_diff_id: e.lyricsDiffId\n            }, {\n              responseType: \"json\"\n            })];\n\n          case 1:\n            return [2, (r = n.sent()).data && r.data.lyric_diff ? {\n              success: 200 === r.status,\n              lyricsId: r.data.lyric_diff.lyric_id,\n              lyricsDiffId: r.data.lyric_diff.id\n            } : {\n              success: 200 === r.status\n            }];\n\n          case 2:\n            return [2, {\n              success: !1,\n              error: n.sent().message\n            }];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e;\n}())(),\n    I = {},\n    j = {},\n    L = new (function () {\n  function e() {}\n\n  return Object.defineProperty(e.prototype, \"endpoint\", {\n    get: function get() {\n      return g.textalive.server;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"songleEndpoint\", {\n    get: function get() {\n      return g.songle.server;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), e.prototype.getSongPathFromUrl = function (t) {\n    return a.getSongPathFromUrl(t);\n  }, e.prototype.isUploaderUrl = function (t) {\n    return a.isUploaderUrl(t);\n  }, e.prototype.isUploaderPath = function (t) {\n    return a.isUploaderPath(t);\n  }, e.prototype.getUploaderGuid = function (t) {\n    return a.getUploaderGuid(t);\n  }, e.prototype.getSongUrlFromUploaderGuid = function (t) {\n    return a.getSongUrlFromUploaderGuid(t);\n  }, e.prototype.getSongUrlFromPath = function (t) {\n    return a.getSongUrlFromPath(t);\n  }, e.prototype.isYouTubeUrl = function (t) {\n    return a.isYouTubeUrl(t);\n  }, e.prototype.isNicovideoUrl = function (t) {\n    return a.isNicovideoUrl(t);\n  }, e.prototype.isVideoSiteUrl = function (t) {\n    return a.isVideoSiteUrl(t);\n  }, e.prototype.isPiaproUrl = function (t) {\n    return a.isPiaproUrl(t);\n  }, e.prototype.load = function (t) {\n    return f(this, void 0, void 0, function () {\n      var e, r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return e = t.code || \"number\" == typeof t.id && String(t.id) || encodeURIComponent(t.songPath), I[e] ? [2, I[e]] : (I[e] = this.doLoad(e), [4, I[e]]);\n\n          case 1:\n            return r = n.sent(), this.use(r), [2, r];\n        }\n      });\n    });\n  }, e.prototype.use = function (t) {\n    if (t) {\n      var e = String(t.song.id),\n          r = t.song.code,\n          n = this.getSongPathFromUrl(t.song.permalink);\n      I[e] = I[r] = I[n] = Promise.resolve(t);\n    }\n  }, e.prototype.doLoad = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r, n, i;\n      return y(this, function (o) {\n        switch (o.label) {\n          case 0:\n            return o.trys.push([0, 6,, 7]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.songleEndpoint + \"/songs/\" + e + \"?format=json\")];\n\n          case 1:\n            if (!(r = o.sent()) || 200 !== r.status) return [2, null];\n            if (n = r.data, !this.isUploaderUrl(n.song.permalink)) return [3, 5];\n            o.label = 2;\n\n          case 2:\n            return o.trys.push([2, 4,, 5]), [4, this.doLoadPrivateSong(n.song.id)];\n\n          case 3:\n            return (i = o.sent()) ? [2, _d(_d({}, n), {\n              song: i\n            })] : [3, 5];\n\n          case 4:\n            return o.sent(), [3, 5];\n\n          case 5:\n            return [2, n];\n\n          case 6:\n            return o.sent(), [2, null];\n\n          case 7:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.doLoadPrivateSong = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r, n, i, o, s, a, u;\n      return y(this, function (c) {\n        switch (c.label) {\n          case 0:\n            return [4, E.getProfile()];\n\n          case 1:\n            if (r = c.sent(), !E.isSongleUser(r)) return [2, null];\n            E.isSpoofingSongleUser(r) && (i = r.user, o = i.songleUserId, s = i.songleAccessToken, a = i.songleRefreshToken, n = {\n              songleUserId: o,\n              songleAccessToken: s,\n              songleRefreshToken: a\n            }), c.label = 2;\n\n          case 2:\n            return c.trys.push([2, 4,, 5]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint + \"/songle/me/songs/\" + e + \".json\", {\n              withCredentials: !0,\n              params: n\n            })];\n\n          case 3:\n            return (u = c.sent()) && 200 === u.status && u.data && u.data.data && u.data.data.song ? [2, u.data.data.song] : [2, null];\n\n          case 4:\n            return c.sent(), [2, null];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.loadInfo = function (t, e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        return r = this.cacheKey(t, e), j[r] || (j[r] = this.doLoadInfo(t, {\n          min: !0,\n          revisions: null == e ? void 0 : e.revisions\n        })), [2, j[r]];\n      });\n    });\n  }, e.prototype.loadDetailInfo = function (t, e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        return r = this.cacheKey(t, e) + \"/dt\", j[r] || (j[r] = this.doLoadInfo(t, {\n          min: !1,\n          revisions: null == e ? void 0 : e.revisions\n        })), [2, j[r]];\n      });\n    });\n  }, e.prototype.cacheKey = function (t, e) {\n    var r = String(t);\n    return (null == e ? void 0 : e.revisions) && (\"number\" == typeof e.revisions.chord && (r += \"/cd\" + e.revisions.chord), \"number\" == typeof e.revisions.beat && (r += \"/bt\" + e.revisions.beat), \"number\" == typeof e.revisions.chorus && (r += \"/cr\" + e.revisions.chorus)), r;\n  }, e.prototype.doLoadInfo = function (e, r) {\n    var n = void 0 === r ? {\n      min: !0\n    } : r,\n        i = n.min,\n        o = n.revisions;\n    return f(this, void 0, void 0, function () {\n      var r, n;\n      return y(this, function (s) {\n        switch (s.label) {\n          case 0:\n            return s.trys.push([0, 2,, 3]), r = {\n              min: i ? 1 : 0\n            }, \"number\" == typeof (null == o ? void 0 : o.chord) && (r.chord_revision_id = o.chord), \"number\" == typeof (null == o ? void 0 : o.beat) && (r.beat_revision_id = o.beat), \"number\" == typeof (null == o ? void 0 : o.chorus) && (r.chorus_revision_id = o.chorus), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.songleEndpoint + \"/songs/\" + e + \"/info.json\", {\n              params: r\n            })];\n\n          case 1:\n            return (n = s.sent()) && 200 === n.status ? [2, n.data] : [2, null];\n\n          case 2:\n            return s.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.loadVocalAmplitude = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.songleEndpoint + \"/songs/\" + e + \"/vamplitude.json\")];\n\n          case 1:\n            return (r = n.sent()) && 200 === r.status && r.data ? [2, r.data] : [2, null];\n\n          case 2:\n            return n.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.loadValenceArousal = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.songleEndpoint + \"/songs/\" + e + \"/av.json\")];\n\n          case 1:\n            return (r = n.sent()) && 200 === r.status && r.data ? [2, r.data] : [2, null];\n\n          case 2:\n            return n.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.list = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            void 0 === e && (e = {}), n.label = 1;\n\n          case 1:\n            return n.trys.push([1, 3,, 4]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint + \"/songs\", {\n              params: e\n            })];\n\n          case 2:\n            return (r = n.sent()) && 200 === r.status ? [2, r.data] : [2, null];\n\n          case 3:\n            return n.sent(), [2, null];\n\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.listPrivate = function () {\n    return f(this, void 0, void 0, function () {\n      var e, r, n, i, o, s, a, u;\n      return y(this, function (c) {\n        switch (c.label) {\n          case 0:\n            return [4, E.getProfile()];\n\n          case 1:\n            if (e = c.sent(), !E.isSongleUser(e)) return [2, {\n              data: null,\n              error: {\n                code: 401,\n                message: \"Songle authentication is required\"\n              }\n            }];\n            E.isSpoofingSongleUser(e) && (n = e.user, i = n.songleUserId, o = n.songleAccessToken, s = n.songleRefreshToken, r = {\n              songleUserId: i,\n              songleAccessToken: o,\n              songleRefreshToken: s\n            }), c.label = 2;\n\n          case 2:\n            return c.trys.push([2, 4,, 5]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint + \"/songle/me/songs.json\", {\n              withCredentials: !0,\n              params: _d(_d({}, r), {\n                \"private\": !0\n              })\n            })];\n\n          case 3:\n            return (a = c.sent()) && 200 === a.status ? [2, a.data] : [2, {\n              data: null,\n              error: {\n                code: a.status,\n                message: a.data.message\n              }\n            }];\n\n          case 4:\n            return [2, {\n              data: null,\n              error: {\n                code: (u = c.sent()).response && u.response.status ? u.response.status : -1,\n                message: u.response && u.response.data ? u.response.data.message : u.message\n              }\n            }];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.create = function (t) {\n    return f(this, void 0, void 0, function () {\n      return y(this, function (e) {\n        return [2, this.doCreate(t, !1)];\n      });\n    });\n  }, e.prototype.createPrivate = function (t) {\n    return f(this, void 0, void 0, function () {\n      var e;\n      return y(this, function (r) {\n        switch (r.label) {\n          case 0:\n            return [4, E.getProfile()];\n\n          case 1:\n            return e = r.sent(), E.isSongleUser(e) ? [2, this.doCreate(t, !0)] : [2, {\n              success: !1,\n              song: null,\n              error: \"Songle authentication is required\"\n            }];\n        }\n      });\n    });\n  }, e.prototype.doCreate = function (e, r) {\n    return f(this, void 0, void 0, function () {\n      var n, i, o, s, a, u;\n      return y(this, function (c) {\n        switch (c.label) {\n          case 0:\n            return n = e.url, i = e.name, o = e.artistName, [4, E.getToken()];\n\n          case 1:\n            s = c.sent(), c.label = 2;\n\n          case 2:\n            return c.trys.push([2, 4,, 5]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(r ? this.endpoint + \"/etc/songs/private\" : this.endpoint + \"/etc/songs\", {\n              token: s,\n              url: n,\n              name: i,\n              artist: o\n            }, {\n              withCredentials: !0\n            })];\n\n          case 3:\n            return (a = c.sent()) && 200 === a.status ? r ? [2, {\n              success: !0,\n              song: a.data.data.song\n            }] : [2, {\n              success: !0,\n              song: a.data.song\n            }] : [2, {\n              success: !1,\n              error: (a.data.data ? a.data.data : a.data).message\n            }];\n\n          case 4:\n            return u = c.sent(), console.error(u), [2, {\n              success: !1,\n              error: u.response && u.response.data ? u.response.data.message : u.message\n            }];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.uploadPrivate = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r, n, i, o, s, a, u, c, l;\n      return y(this, function (p) {\n        switch (p.label) {\n          case 0:\n            return [4, E.getProfile()];\n\n          case 1:\n            if (r = p.sent(), !E.isSongleUser(r)) throw new Error(\"Songle authentication is required\");\n            E.isSpoofingSongleUser(r) ? (i = r.user, o = i.songleUserId, s = i.songleAccessToken, a = i.songleRefreshToken, u = {\n              songleUserId: o,\n              songleAccessToken: s,\n              songleRefreshToken: a\n            }, n = \"?\" + Object.keys(u).map(function (t) {\n              return t + \"=\" + encodeURIComponent(u[t]);\n            }).join(\"&\")) : n = \"\", p.label = 2;\n\n          case 2:\n            return p.trys.push([2, 4,, 5]), (c = new FormData()).append(\"file\", e), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(this.endpoint + \"/songle/me/uploads.json\" + n, c, {\n              withCredentials: !0\n            })];\n\n          case 3:\n            return (l = p.sent()) && 200 === l.status && l.data ? [2, l.data.data] : [3, 5];\n\n          case 4:\n            return p.sent(), [3, 5];\n\n          case 5:\n            return [2, null];\n        }\n      });\n    });\n  }, e.prototype.search = function (e, r) {\n    return void 0 === r && (r = !0), f(this, void 0, void 0, function () {\n      var n;\n      return y(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return i.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.songleEndpoint + \"/songs/search.json\", {\n              params: {\n                q: e,\n                lyrics: r ? 1 : 0\n              }\n            })];\n\n          case 1:\n            return (n = i.sent()) && 200 === n.status && n.data ? [2, {\n              success: !0,\n              data: n.data\n            }] : [2, {\n              success: !1\n            }];\n\n          case 2:\n            return i.sent(), [2, {\n              success: !1\n            }];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.copySongMap = function (e) {\n    var r;\n    return f(this, void 0, void 0, function () {\n      var n, i, o, s;\n      return y(this, function (a) {\n        switch (a.label) {\n          case 0:\n            n = e.sourceId, i = e.destinationId, o = e.types || [\"beat\", \"chord\", \"chorus\", \"melody\"], a.label = 1;\n\n          case 1:\n            return a.trys.push([1, 3,, 4]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(this.endpoint + \"/songle/me/songs/\" + i + \"/actions/copy_music_map.json\", {\n              source_id: n,\n              types: o\n            }, {\n              withCredentials: !0,\n              responseType: \"json\"\n            })];\n\n          case 2:\n            return (s = a.sent()) && (null === (r = s.data) || void 0 === r ? void 0 : r.success) ? [2, {\n              success: !0\n            }] : [2, {\n              success: !1,\n              error: null == s ? void 0 : s.data\n            }];\n\n          case 3:\n            return a.sent(), [2, {\n              success: !1\n            }];\n\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.createStage = function () {\n    return f(this, void 0, void 0, function () {\n      var e, r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, E.getProfile()];\n\n          case 1:\n            e = n.sent(), n.label = 2;\n\n          case 2:\n            return n.trys.push([2, 4,, 5]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(this.endpoint + \"/etc/songs/stage\", {\n              token: e.status.token\n            }, {\n              withCredentials: !0\n            })];\n\n          case 3:\n            return [2, (r = n.sent()) ? r.data : null];\n\n          case 4:\n            return n.sent(), [2, null];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e;\n}())(),\n    U = new (function () {\n  function e() {}\n\n  return Object.defineProperty(e.prototype, \"endpoint\", {\n    get: function get() {\n      return g.textalive.server + \"/templates/\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), e.prototype.list = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(\"\" + this.endpoint, {\n              params: e\n            })];\n\n          case 1:\n            return (r = n.sent()) && 200 === r.status ? [2, r.data] : [2, null];\n\n          case 2:\n            return n.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.load = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(\"\" + (this.endpoint + e), {\n              params: {\n                format: \"json\"\n              }\n            })];\n\n          case 1:\n            return (r = n.sent()) && 200 === r.status ? [2, r.data] : [2, null];\n\n          case 2:\n            return n.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.loadByName = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r, n, i;\n      return y(this, function (o) {\n        switch (o.label) {\n          case 0:\n            n = \"latest\", e && (r = e.match(/(.+)@([0-9]+)/)) && (e = r[1], n = r[2]), o.label = 1;\n\n          case 1:\n            return o.trys.push([1, 3,, 4]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint + e + \"/\" + n, {\n              params: {\n                format: \"json\"\n              }\n            })];\n\n          case 2:\n            return (i = o.sent()) && 200 === i.status ? [2, i.data] : \"latest\" !== n ? [2, this.loadByName(e)] : [2, null];\n\n          case 3:\n            return o.sent(), [2, null];\n\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.loadForVideo = function (e, r) {\n    return void 0 === r && (r = {\n      withoutAuthors: !0,\n      withScript: !0\n    }), f(this, void 0, void 0, function () {\n      var n;\n      return y(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return i.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.endpoint + \"for/\" + e, {\n              params: r\n            })];\n\n          case 1:\n            return (n = i.sent()) && 200 === n.status ? [2, n.data] : [2, null];\n\n          case 2:\n            return i.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.create = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r, n, i;\n      return y(this, function (o) {\n        switch (o.label) {\n          case 0:\n            return [4, E.getToken()];\n\n          case 1:\n            r = o.sent(), o.label = 2;\n\n          case 2:\n            return o.trys.push([2, 4,, 5]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(this.endpoint, _d(_d({}, e), {\n              token: r\n            }), {\n              withCredentials: !0\n            })];\n\n          case 3:\n            return (n = o.sent()) ? 200 !== n.status || Array.isArray(n.data) || n.data.error ? (i = Array.isArray(n.data) ? {\n              parseErrors: n.data\n            } : n.data, [2, _d(_d({}, i), {\n              success: !1\n            })]) : [2, _d(_d({}, n.data), {\n              success: !0\n            })] : [2, {\n              success: !1\n            }];\n\n          case 4:\n            return [2, {\n              error: o.sent().message,\n              success: !1\n            }];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.listContributors = function (e, r) {\n    return f(this, void 0, void 0, function () {\n      var n;\n      return y(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return i.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(\"\" + this.endpoint + e + \"/\" + r + \"/contributors\", {\n              withCredentials: !0\n            })];\n\n          case 1:\n            return (n = i.sent()) && 200 === n.status ? [2, n.data] : [2, null];\n\n          case 2:\n            return i.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e;\n}())(),\n    F = new (function () {\n  function e() {}\n\n  return Object.defineProperty(e.prototype, \"endpoint\", {\n    get: function get() {\n      return g.textalive.server + \"/videos/\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"rendererEndpoint\", {\n    get: function get() {\n      return g.textalive.server + \"/renderer/\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), e.prototype.load = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r, n, i, o, s, a, u;\n      return y(this, function (c) {\n        switch (c.label) {\n          case 0:\n            return c.trys.push([0, 3,, 4]), r = {\n              format: \"json\"\n            }, [4, E.getProfile()];\n\n          case 1:\n            return n = c.sent(), E.isSpoofingSongleUser(n) && (i = n.user, o = i.songleUserId, s = i.songleAccessToken, a = i.songleRefreshToken, r = _d(_d({}, r), {\n              songleUserId: o,\n              songleAccessToken: s,\n              songleRefreshToken: a\n            })), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(\"\" + (this.endpoint + e), {\n              params: r,\n              withCredentials: !0\n            })];\n\n          case 2:\n            return (u = c.sent()) && 200 === u.status ? [2, u.data] : [2, null];\n\n          case 3:\n            return c.sent(), [2, null];\n\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.create = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r, n;\n      return y(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return [4, E.getToken()];\n\n          case 1:\n            r = i.sent(), i.label = 2;\n\n          case 2:\n            return i.trys.push([2, 4,, 5]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(this.endpoint, _d(_d({}, e), {\n              token: r\n            }), {\n              withCredentials: !0\n            })];\n\n          case 3:\n            return (n = i.sent()) ? 200 !== n.status || n.data.error ? [2, _d(_d({}, n.data), {\n              success: !1\n            })] : [2, _d(_d({}, n.data), {\n              success: !0\n            })] : [2, {\n              success: !1\n            }];\n\n          case 4:\n            return [2, {\n              error: i.sent().message,\n              success: !1\n            }];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype[\"delete\"] = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r, n;\n      return y(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return [4, E.getToken()];\n\n          case 1:\n            r = i.sent(), i.label = 2;\n\n          case 2:\n            return i.trys.push([2, 4,, 5]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(this.endpoint + \"delete\", {\n              token: r,\n              id: e\n            }, {\n              withCredentials: !0\n            })];\n\n          case 3:\n            return (n = i.sent()) && 200 === n.status ? [2, {\n              success: !0,\n              video: n.data\n            }] : [2, {\n              success: !1,\n              video: null\n            }];\n\n          case 4:\n            return [2, {\n              success: !0,\n              error: i.sent(),\n              video: null\n            }];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.listContributors = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(\"\" + this.endpoint + e + \"/contributors\", {\n              withCredentials: !0\n            })];\n\n          case 1:\n            return (r = n.sent()) && 200 === r.status ? [2, r.data] : [2, null];\n\n          case 2:\n            return n.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.listRenderings = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.rendererEndpoint + \"list\", {\n              params: {\n                videoId: e\n              },\n              withCredentials: !0\n            })];\n\n          case 1:\n            return (r = n.sent()) && 200 === r.status ? [2, r.data] : [2, null];\n\n          case 2:\n            return n.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.getRenderingStatus = function (e) {\n    return f(this, void 0, void 0, function () {\n      var r;\n      return y(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(this.rendererEndpoint + \"status\", {\n              params: {\n                id: e\n              },\n              withCredentials: !0\n            })];\n\n          case 1:\n            return (r = n.sent()) && 200 === r.status ? [2, r.data] : [2, null];\n\n          case 2:\n            return n.sent(), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.render = function (e, r, n) {\n    return f(this, void 0, void 0, function () {\n      var i, o, s;\n      return y(this, function (a) {\n        switch (a.label) {\n          case 0:\n            return [4, E.getToken()];\n\n          case 1:\n            i = a.sent(), a.label = 2;\n\n          case 2:\n            return a.trys.push([2, 4,, 5]), o = {\n              token: i,\n              videoId: e,\n              quality: r\n            }, n && (o.authentication = !0), [4, axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(this.rendererEndpoint + \"render\", o, {\n              withCredentials: !0\n            })];\n\n          case 3:\n            return (s = a.sent()) && 200 === s.status ? [2, s.data] : [2, null];\n\n          case 4:\n            return a.sent(), [2, null];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e.prototype.getDownloadInfo = function () {\n    return f(this, void 0, void 0, function () {\n      var t;\n      return y(this, function (e) {\n        switch (e.label) {\n          case 0:\n            return t = {\n              endpoint: this.rendererEndpoint + \"download\"\n            }, [4, E.getToken()];\n\n          case 1:\n            return [2, (t.token = e.sent(), t)];\n        }\n      });\n    });\n  }, e;\n}())(),\n    M = {\n  asset: m,\n  endpoint: g,\n  lyrics: k,\n  song: L,\n  template: U,\n  text: O,\n  font: T,\n  user: E,\n  video: F\n},\n    _D = function D(t, e) {\n  return (_D = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var r in e) {\n      e.hasOwnProperty(r) && (t[r] = e[r]);\n    }\n  })(t, e);\n};\n\nfunction B(t, e) {\n  function r() {\n    this.constructor = t;\n  }\n\n  _D(t, e), t.prototype = null === e ? Object.create(e) : (r.prototype = e.prototype, new r());\n}\n\nvar V = function () {\n  function t() {\n    this._parent = null, this._children = [], this._previous = null, this._next = null, this._runtime = null, this._templates = [];\n  }\n\n  return Object.defineProperty(t.prototype, \"video\", {\n    get: function get() {\n      return this.parent && this.parent.video;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"parent\", {\n    get: function get() {\n      return this._parent;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"children\", {\n    get: function get() {\n      return this._children;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"previous\", {\n    get: function get() {\n      return this._previous;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"next\", {\n    get: function get() {\n      return this._next;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"startTime\", {\n    get: function get() {\n      return this._data ? this._data.startTime : 0;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"endTime\", {\n    get: function get() {\n      return this._data ? this._data.endTime : 0;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"duration\", {\n    get: function get() {\n      return this.endTime - this.startTime;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"rendering\", {\n    get: function get() {\n      return this._runtime ? this._runtime.rendering : null;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"graphics\", {\n    get: function get() {\n      return this._runtime ? this._runtime.graphics : null;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"templates\", {\n    get: function get() {\n      return this._templates.slice();\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"templateCount\", {\n    get: function get() {\n      return this._templates.length;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.contains = function (t) {\n    return t >= this.startTime && t <= this.endTime;\n  }, t.prototype.overlaps = function (t, e) {\n    return this.contains(t) || this.contains(e) || this.startTime <= t && this.endTime >= e;\n  }, t.prototype.progress = function (t) {\n    return this.contains(t) ? (t - this.startTime) / this.duration : -1;\n  }, t.prototype.moveStartTime = function (t) {\n    t = Math.min(Math.max(t, 0), this._data.endTime), null != this._parent && (t = Math.max(t, this._parent.startTime)), null != this._previous && (t = Math.max(t, this._previous.endTime)), this._children.length > 0 && (t = Math.min(t, this._children[0].startTime));\n    var e = this.startTime !== t;\n    return this._data.startTime = t, e;\n  }, t.prototype.moveStartTimeAndShrink = function (t) {\n    var e = this.endTime;\n    if (this._children.length > 0) this._children.forEach(function (t) {\n      e -= t.duration;\n    });else if (t + 30 > e) return !1;\n    t = Math.min(Math.max(t, 0), e), null != this._parent && (t = Math.max(t, this._parent.startTime)), null != this._previous && (t = Math.max(t, this._previous.endTime));\n    var r = this.startTime !== t;\n    if (this._data.startTime = t, r && this._children.length > 0) for (var n = 0, i = this._children; n < i.length; n++) {\n      var o = i[n];\n      if (o.startTime >= t) break;\n      o.moveWithChildren(t - o.startTime), t = o.endTime;\n    }\n    return r;\n  }, t.prototype.moveEndTime = function (t) {\n    var e = this.video.duration;\n    t = Math.max(Math.min(t, e), this.startTime), null != this._parent && (t = Math.min(t, this._parent.endTime)), null != this._next && (t = Math.min(t, this._next.startTime)), this._children.length > 0 && (t = Math.max(t, this._children[this._children.length - 1].endTime));\n    var r = this.endTime !== t;\n    return this._data.endTime = t, r;\n  }, t.prototype.moveEndTimeAndShrink = function (t) {\n    var e = this.startTime;\n    if (this._children.length > 0) this._children.forEach(function (t) {\n      e += t.duration;\n    });else if (t - 30 < e) return !1;\n    var r = this.video.duration;\n    t = Math.max(Math.min(t, r), e), null != this._parent && (t = Math.min(t, this._parent.endTime)), null != this._next && (t = Math.min(t, this._next.startTime));\n    var n = this.endTime !== t;\n    if (this._data.endTime = t, n && this._children.length > 0) for (var i = this._children.length - 1; i >= 0; i--) {\n      var o = this._children[i];\n      if (o.endTime <= t) break;\n      o.moveWithChildren(t - o.endTime), t = o.startTime;\n    }\n    return n;\n  }, t.prototype.move = function (t) {\n    var e = 0,\n        r = this.video.duration;\n    null != this._parent && (e = Math.max(e, this._parent.startTime), r = Math.min(r, this._parent.endTime)), null != this._previous && (e = Math.max(e, this._previous.endTime)), null != this._next && (r = Math.min(r, this._next.startTime)), this.startTime + t < e && (t = e - this.startTime), this.endTime + t > r && (t = r - this.endTime), this.moveWithChildren(t);\n  }, t.prototype.maximize = function () {\n    var t = !1,\n        e = this.endTime,\n        r = Math.max(null === this._parent ? 0 : this._parent.startTime, null === this._previous ? 0 : this._previous.endTime);\n    r !== this.startTime && (this.moveWithChildren(r - this.startTime), t = !0);\n    var n = Math.min(null === this._parent ? this.video.duration : this._parent.endTime, null === this._next ? this.video.duration : this._next.startTime);\n    return n !== this.endTime && (this._data.endTime = n, t = e !== n), t;\n  }, t.prototype.moveStartTimeAndExtend = function (t) {\n    return this.moveAndExtend(t, 1);\n  }, t.prototype.moveEndTimeAndExtend = function (t) {\n    return this.moveAndExtend(t, 2);\n  }, t.prototype.moveAndExtend = function (t, e) {\n    if (void 0 === e && (e = 0), 0 === t) return !1;\n    var r,\n        n,\n        i = this._parent ? this._parent.startTime : this._previous ? this._previous.endTime : 0,\n        o = this._parent ? this._parent.endTime : this._next ? this._next.startTime : this.video.duration;\n\n    if (this._parent) {\n      if (null !== this._next) for (r = this._next; null === r._parent && null !== r._next || r._parent === this._parent;) {\n        o -= r.duration, r = r._next;\n      }\n      if (null !== this._previous) for (r = this._previous; null === r._parent && null !== r._previous || r._parent === this._parent;) {\n        i += r.duration, r = r._previous;\n      }\n    }\n\n    if (0 === e) {\n      if (this.startTime + t < i && (t = i - this.startTime), this.endTime + t > o && (t = o - this.endTime), 0 === t) return !1;\n      this.moveWithChildren(t);\n    } else if (1 === e) {\n      if (this.startTime + t < i && (t = i - this.startTime), 0 === t) return !1;\n      this._data.startTime += t;\n    } else {\n      if (this.endTime + t > o && (t = o - this.endTime), 0 === t) return !1;\n      this._data.endTime += t;\n    }\n\n    for (n = this; null !== n;) {\n      var s = n.moveBackward(),\n          a = n.moveForward();\n      if (null === n._parent) break;\n      var u = n._parent;\n      s < u.startTime && (u._data.startTime = s, u.moveBackward()), a > u.endTime && (u._data.endTime = a, u.moveForward()), n = u;\n    }\n\n    return !0;\n  }, t.prototype.moveBackward = function () {\n    for (var t = this, e = this.startTime; null !== t._previous && t._parent === t._previous._parent && t._previous.endTime > t.startTime;) {\n      var r = t.startTime - t._previous.endTime;\n      t._previous.moveWithChildren(r), e = (t = t._previous).startTime;\n    }\n\n    return e;\n  }, t.prototype.moveForward = function () {\n    for (var t = this, e = this.endTime; null !== t._next && t._parent === t._next._parent && t._next.startTime < t.endTime;) {\n      var r = t.endTime - t._next.startTime;\n      t._next.moveWithChildren(r), e = (t = t._next).endTime;\n    }\n\n    return e;\n  }, t.prototype.moveWithChildren = function (t) {\n    var e = [];\n\n    for (e.push(this); e.length > 0;) {\n      var r = e.pop();\n      null != r._children && r._children.forEach(function (t) {\n        return e.push(t);\n      }), r._data.startTime += t, r._data.endTime += t;\n    }\n  }, t.prototype.getTemplate = function (t) {\n    return void 0 === t && (t = 0), t < 0 || t >= this._templates.length ? null : this._templates[t];\n  }, t.prototype.addTemplateAt = function (t, e) {\n    this._templates.splice(e, 0, t), t.assignedUnit = this;\n  }, t.prototype.addTemplate = function (t) {\n    this._templates.push(t), t.assignedUnit = this;\n  }, t.prototype.removeTemplates = function () {\n    for (var t = this._templates.slice(); this._templates.length > 0;) {\n      this._templates.pop();\n    }\n\n    return t;\n  }, t.prototype.removeTemplateAt = function (t) {\n    if (t < 0 || t >= this._templates.length) return null;\n\n    var e = this._templates.splice(t, 1)[0];\n\n    return e.assignedUnit = null, e;\n  }, t.prototype.removeTemplate = function (t) {\n    for (var e = 0; e < this._templates.length; e++) {\n      var r = this._templates[e];\n      if (r === t) return this._templates.splice(e, 1), t.assignedUnit = null, r;\n    }\n\n    return null;\n  }, t.prototype.getType = function () {\n    return e.NONE;\n  }, t.prototype.toString = function () {\n    return \"RenderingUnit\";\n  }, t;\n}();\n\nfunction G(t, e) {\n  return void 0 !== e && e < t ? e : t;\n}\n\nfunction q(t, e) {\n  return void 0 !== e && e > t ? e : t;\n}\n\nvar Y = function (t) {\n  function e() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return B(e, t), Object.defineProperty(e.prototype, \"text\", {\n    get: function get() {\n      var t = \"\";\n      return this.children.forEach(function (e) {\n        t += e.text;\n      }), t;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"color\", {\n    get: function get() {\n      return this.children.reduce(function (t, e) {\n        return null === t ? e.color : void 0 === t || t.eq(e.color) ? t : void 0;\n      }, null);\n    },\n    set: function set(t) {\n      null !== t && this.children.forEach(function (e) {\n        e.color = t;\n      });\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"font\", {\n    set: function set(t) {\n      null !== t && this.children.forEach(function (e) {\n        e.font = t;\n      });\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"fontFamily\", {\n    get: function get() {\n      return this.children.reduce(function (t, e) {\n        var r = e.fontFamily;\n        return void 0 === t || null !== t && t !== r ? void 0 : r;\n      }, null);\n    },\n    set: function set(t) {\n      this.children.forEach(function (e) {\n        e.fontFamily = t;\n      });\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"fontStyle\", {\n    get: function get() {\n      return this.children.reduce(function (t, e) {\n        var r = e.fontStyle;\n        return void 0 === t || null !== t && t !== r ? void 0 : r;\n      }, null);\n    },\n    set: function set(t) {\n      this.children.forEach(function (e) {\n        e.fontStyle = t;\n      });\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"fontSize\", {\n    get: function get() {\n      return this.children.length <= 0 ? 0 : this.children.reduce(function (t, e) {\n        return t + e.fontSize;\n      }, 0) / this.children.length;\n    },\n    set: function set(t) {\n      this.children.forEach(function (e) {\n        e.fontSize = t;\n      });\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"advance\", {\n    get: function get() {\n      return this.children.reduce(function (t, e) {\n        return t + e.advance;\n      }, 0);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"ascent\", {\n    get: function get() {\n      return this.children.reduce(function (t, e) {\n        return Math.max(t, e.ascent);\n      }, 0);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"descent\", {\n    get: function get() {\n      return this.children.reduce(function (t, e) {\n        return Math.max(t, e.descent);\n      }, 0);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(e.prototype, \"height\", {\n    get: function get() {\n      return this.ascent + this.descent;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), e.prototype.expandTime = function (t) {\n    return {\n      startTime: G(this.startTime, t.startTime),\n      endTime: q(this.endTime, t.endTime)\n    };\n  }, e.prototype.toString = function () {\n    return this.text;\n  }, e;\n}(V),\n    z = function () {\n  function t(t) {\n    this.a = 0, this.r = 0, this.g = 0, this.b = 0, this.from(t);\n  }\n\n  return Object.defineProperty(t.prototype, \"value\", {\n    get: function get() {\n      return (((this.a << 8) + this.r << 8) + this.g << 8) + this.b;\n    },\n    set: function set(t) {\n      this.fromNumber(t, !0);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"rgb\", {\n    get: function get() {\n      return \"rgb(\" + this.r + \",\" + this.g + \",\" + this.b + \")\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"rgba\", {\n    get: function get() {\n      return \"rgba(\" + this.r + \",\" + this.g + \",\" + this.b + \",\" + this.a / 255 + \")\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.eq = function (e) {\n    return _typeof(this) == _typeof(e) && e instanceof t && this.value === e.value;\n  }, t.prototype.toString = function (t) {\n    return void 0 === t && (t = !0), t ? this.rgba : this.rgb;\n  }, t.prototype.from = function (t) {\n    if (void 0 === t && (t = \"#000\"), \"object\" == _typeof(t)) {\n      if (!t) return;\n      return \"number\" == typeof t.value ? void (this.value = t.value) : \"number\" == typeof t.r && \"number\" == typeof t.g && \"number\" == typeof t.b ? (this.a = \"number\" == typeof t.a ? t.a : 255, this.r = t.r, this.g = t.g, void (this.b = t.b)) : void 0;\n    }\n\n    \"string\" == typeof t ? this.fromString(t) : \"number\" == typeof t && this.fromNumber(t);\n  }, t.prototype.fromString = function (t) {\n    if (t) {\n      if (\"#\" === t.charAt(0) && (t = t.substr(1)), 4 === t.length) {\n        var e = t.charAt(0),\n            r = t.charAt(1),\n            n = t.charAt(2),\n            i = t.charAt(3);\n        t = \"\" + e + e + r + r + n + n + i + i;\n      }\n\n      3 === t.length && (r = t.charAt(0), n = t.charAt(1), i = t.charAt(2), t = \"\" + r + r + n + n + i + i);\n      var o = parseInt(t, 16);\n      this.fromNumber(o, 8 === t.length);\n    }\n  }, t.prototype.fromNumber = function (t, e) {\n    void 0 === e && (e = !0), isNaN(t) || (this.a = e ? t >> 24 & 255 : 255, this.r = t >> 16 & 255, this.g = t >> 8 & 255, this.b = 255 & t);\n  }, t;\n}(),\n    W = function () {\n  function t(t, e, r) {\n    void 0 === t && (t = \"Noto Sans Japanese\"), void 0 === e && (e = 40), void 0 === r && (r = \"\"), this._family = t, this._size = e, this._style = r;\n  }\n\n  return Object.defineProperty(t.prototype, \"family\", {\n    get: function get() {\n      return this._family;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"size\", {\n    get: function get() {\n      return this._size;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"style\", {\n    get: function get() {\n      return this._style;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.deriveFamily = function (e) {\n    return new t(e, this._size, this._style);\n  }, t.prototype.deriveStyle = function (e) {\n    return new t(this._family, this._size, e);\n  }, t.prototype.deriveSize = function (e) {\n    return new t(this._family, e, this._style);\n  }, t.prototype.clone = function () {\n    return new t(this._family, this._size, this._style);\n  }, t.prototype.eq = function (t) {\n    return this._family === t._family && this._size === t._size && this._style === t._style;\n  }, t.prototype.toString = function (t) {\n    return void 0 === t && (t = 1), this._style + (this._style.length > 0 ? \" \" : \"\") + this._size * t + \"px '\" + this._family + \"'\";\n  }, t;\n}(),\n    J = function (t) {\n  function r(e) {\n    var r = t.call(this) || this;\n    return r._data = e, r._font = new W(e && e.fontFamily, e && e.fontSize, e && e.fontStyle), r._color = new z(), r;\n  }\n\n  return B(r, t), Object.defineProperty(r.prototype, \"parent\", {\n    get: function get() {\n      return this._parent;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"previous\", {\n    get: function get() {\n      return this._previous;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"next\", {\n    get: function get() {\n      return this._next;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"text\", {\n    get: function get() {\n      return this._data && this._data[\"char\"] || \"?\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"advance\", {\n    get: function get() {\n      return this._runtime ? this._runtime.advance : 0;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"ascent\", {\n    get: function get() {\n      return this._runtime ? this._runtime.ascent : 0;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"descent\", {\n    get: function get() {\n      return this._runtime ? this._runtime.descent : 0;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"font\", {\n    get: function get() {\n      return this._font;\n    },\n    set: function set(t) {\n      null === t || this.font.eq(t) || (this._font = t.clone(), this._data.fontFamily = t.family, this._data.fontSize = t.size, this._data.fontStyle = t.style, this._runtime && this._runtime.onFontUpdate(this.font));\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"fontFamily\", {\n    get: function get() {\n      return this.font.family;\n    },\n    set: function set(t) {\n      this.font.family !== t && (this._font = this.font.deriveFamily(t), this._data.fontFamily = t, this._runtime && this._runtime.onFontUpdate(this.font));\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"fontStyle\", {\n    get: function get() {\n      return this.font.style;\n    },\n    set: function set(t) {\n      this.font.style !== t && (this._font = this.font.deriveStyle(t), this._data.fontStyle = t, this._runtime && this._runtime.onFontUpdate(this.font));\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"fontSize\", {\n    get: function get() {\n      return this.font.size;\n    },\n    set: function set(t) {\n      isNaN(t) || this.font.size === t || (this._font = this.font.deriveSize(t), this._data.fontSize = t, this._runtime && this._runtime.onFontUpdate(this.font));\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"color\", {\n    get: function get() {\n      return this._color;\n    },\n    set: function set(t) {\n      t && !t.eq(this.color) && (this._color = t, this._runtime && this._runtime.onColorUpdate(t));\n    },\n    enumerable: !0,\n    configurable: !0\n  }), r.prototype.getType = function () {\n    return e.CHAR;\n  }, r;\n}(Y),\n    X = function (t) {\n  function r(e) {\n    var r = t.call(this) || this;\n    return r._data = e, r;\n  }\n\n  return B(r, t), r.prototype.getType = function () {\n    return e.GRAPHIC;\n  }, r.prototype.toString = function () {\n    return \"Graphic\";\n  }, r;\n}(V),\n    H = function (t) {\n  function r(e) {\n    var r = t.call(this) || this;\n    return r._data = e, r;\n  }\n\n  return B(r, t), Object.defineProperty(r.prototype, \"parent\", {\n    get: function get() {\n      return this._parent;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"children\", {\n    get: function get() {\n      return this._children.slice();\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"previous\", {\n    get: function get() {\n      return this._previous;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"next\", {\n    get: function get() {\n      return this._next;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"startTime\", {\n    get: function get() {\n      return this.firstChar ? this.firstChar.startTime : 0;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"endTime\", {\n    get: function get() {\n      return this.lastChar ? this.lastChar.endTime : 0;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"pos\", {\n    get: function get() {\n      return this._data && this._data.pos || \"\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"rawPos\", {\n    get: function get() {\n      return this._data && this._data.rawPoS || \"\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"language\", {\n    get: function get() {\n      return this._data && this._data.language || \"\";\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"charCount\", {\n    get: function get() {\n      return this._children.length;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"firstChar\", {\n    get: function get() {\n      return this._children.length <= 0 ? null : this._children[0];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"lastChar\", {\n    get: function get() {\n      return this._children.length <= 0 ? null : this._children[this._children.length - 1];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), r.prototype.addChar = function (t) {\n    if (null !== t) {\n      this._children.length > 0 && (t._previous = this.lastChar, this.lastChar._next = t), this._children.push(t), t._parent = this;\n      var e = this.expandTime(t),\n          r = e.startTime,\n          n = e.endTime;\n      this._data.startTime = r, this._data.endTime = n;\n    }\n  }, r.prototype.findIndex = function (t) {\n    return t instanceof J ? this._children.indexOf(t) : -1;\n  }, r.prototype.getType = function () {\n    return e.WORD;\n  }, r;\n}(Y),\n    $ = function (t) {\n  function r(e, r) {\n    var n = t.call(this) || this;\n    return n._video = e, n._data = r, n;\n  }\n\n  return B(r, t), Object.defineProperty(r.prototype, \"children\", {\n    get: function get() {\n      return this._children.slice();\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"previous\", {\n    get: function get() {\n      return this._previous;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"next\", {\n    get: function get() {\n      return this._next;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"video\", {\n    get: function get() {\n      return this._video;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"startTime\", {\n    get: function get() {\n      return this.firstChar ? this.firstChar.startTime : 0;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"endTime\", {\n    get: function get() {\n      return this.lastChar ? this.lastChar.endTime : 0;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"wordCount\", {\n    get: function get() {\n      return this._children.length;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"charCount\", {\n    get: function get() {\n      return this._children.reduce(function (t, e) {\n        return t + e.charCount;\n      }, 0);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"firstWord\", {\n    get: function get() {\n      return this._children.length <= 0 ? null : this._children[0];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"lastWord\", {\n    get: function get() {\n      return this._children.length <= 0 ? null : this._children[this._children.length - 1];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"firstChar\", {\n    get: function get() {\n      var t = this.firstWord;\n      return null === t ? null : t.firstChar;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(r.prototype, \"lastChar\", {\n    get: function get() {\n      var t = this.lastWord;\n      return null === t ? null : t.lastChar;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), r.prototype.getWord = function (t) {\n    return t < 0 || t >= this._children.length ? null : this._children[t];\n  }, r.prototype.getChar = function (t) {\n    if (t < 0) return null;\n\n    for (var e = 0, r = this.firstWord;;) {\n      if (!r) return null;\n      if (e + r.children.length > t) break;\n      e += r.children.length, r = r.next;\n    }\n\n    return r.children[t - e];\n  }, r.prototype.addWord = function (t) {\n    if (null !== t) {\n      this._children.length > 0 && (t._previous = this.lastWord, t._previous._next = t, t.firstChar._previous = t._previous.lastChar, t._previous.lastChar._next = t.firstChar), this._children.push(t), t._parent = this;\n      var e = this.expandTime(t),\n          r = e.startTime,\n          n = e.endTime;\n      this._data.startTime = r, this._data.endTime = n;\n    }\n  }, r.prototype.findIndex = function (t) {\n    if (t instanceof H) return this._children.indexOf(t);\n\n    if (t instanceof J) {\n      for (var e = 0, r = !1, n = 0, i = this._children; n < i.length; n++) {\n        var o = i[n],\n            s = o.findIndex(t);\n\n        if (!(s < 0)) {\n          e += s, r = !0;\n          break;\n        }\n\n        e += o.charCount;\n      }\n\n      return r ? e : -1;\n    }\n\n    return -1;\n  }, r.prototype.getType = function () {\n    return e.PHRASE;\n  }, r;\n}(Y);\n\nfunction Z(t, e, r) {\n  r || (r = function r(t) {\n    return t;\n  });\n\n  for (var n = \"number\" == typeof e ? e : r(e), i = 0, o = t.length; i < o;) {\n    var s = Math.floor((i + o) / 2);\n    r(t[s]) < n ? i = s + 1 : o = s;\n  }\n\n  return i;\n}\n\nfunction Q(t, e, r) {\n  if (!t || t.length <= 0) return null;\n  var n = Z(t, e, function (t) {\n    return t.endTime;\n  });\n  if (n < 0) return null;\n\n  if (\"number\" == typeof (null == r ? void 0 : r.endTime)) {\n    n >= t.length && (n = t.length - 1);\n    var i = e,\n        o = r.endTime;\n    return t[n].overlaps(i, o) ? t[n] : n < 1 ? null : t[n - 1].overlaps(i, o) ? t[n - 1] : null;\n  }\n\n  return n >= t.length ? null : (null == r ? void 0 : r.loose) || t[n].contains(e) ? t[n] : null;\n}\n\nvar K = function () {\n  function t(t) {\n    this._phrases = [], this._graphics = [], this.data = t, this.createUnits();\n  }\n\n  return Object.defineProperty(t.prototype, \"phrases\", {\n    get: function get() {\n      return this._phrases.slice();\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"graphics\", {\n    get: function get() {\n      return this._graphics.slice();\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"rendering\", {\n    get: function get() {\n      return this._runtime.rendering;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"duration\", {\n    get: function get() {\n      return this.data.duration;\n    },\n    set: function set(t) {\n      this.data.duration = t;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"startTime\", {\n    get: function get() {\n      return this.data.startTime;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"endTime\", {\n    get: function get() {\n      return this.data.endTime;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"phraseCount\", {\n    get: function get() {\n      return this._phrases.length;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"graphicCount\", {\n    get: function get() {\n      return this._graphics.length;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"wordCount\", {\n    get: function get() {\n      return this._phrases.reduce(function (t, e) {\n        return t + e.wordCount;\n      }, 0);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"charCount\", {\n    get: function get() {\n      return this._phrases.reduce(function (t, e) {\n        return t + e.charCount;\n      }, 0);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"firstPhrase\", {\n    get: function get() {\n      return this._phrases.length <= 0 ? null : this._phrases[0];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"lastPhrase\", {\n    get: function get() {\n      return this._phrases.length <= 0 ? null : this._phrases[this._phrases.length - 1];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"firstWord\", {\n    get: function get() {\n      var t = this.firstPhrase;\n      return null === t ? null : t.firstWord;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"lastWord\", {\n    get: function get() {\n      var t = this.lastPhrase;\n      return null === t ? null : t.lastWord;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"firstChar\", {\n    get: function get() {\n      var t = this.firstWord;\n      return null === t ? null : t.firstChar;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"lastChar\", {\n    get: function get() {\n      var t = this.lastWord;\n      return null === t ? null : t.lastChar;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"firstGraphic\", {\n    get: function get() {\n      return this._graphics.length <= 0 ? null : this._graphics[0];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"lastGraphic\", {\n    get: function get() {\n      return this._graphics.length <= 0 ? null : this._graphics[this._graphics.length - 1];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.createUnits = function () {\n    var t = this;\n    Array.isArray(this.data.phrases) && (this.data.phrases.forEach(function (e) {\n      var r = new $(t, e);\n      e.words.forEach(function (t) {\n        var e = new H(t);\n        t.characters.forEach(function (t) {\n          return e.addChar(new J(t));\n        }), r.addWord(e);\n      }), t.addPhrase(r);\n    }), this.organizeTimings()), Array.isArray(this.data.graphics) && this.data.graphics.forEach(function (e) {\n      var r = new X(e);\n      t.addGraphic(r);\n    });\n  }, t.prototype.organizeTimings = function () {\n    for (var t = this.firstChar; null !== t;) {\n      t.startTime === t.endTime && t.maximize(), t = t.next;\n    }\n  }, t.prototype.exportData = function (e) {\n    this.updateTemplateData(e);\n\n    for (var r = t.exportUnitData(this.data.phrases, !1), n = r.units, i = r.templateClasses, o = t.exportUnitData(this.data.graphics, !0), s = o.units, a = o.templateClasses, u = i.concat(a).filter(function (t, e, r) {\n      return r.indexOf(t) === e;\n    }), c = {}; u.length > 0;) {\n      var l = u.shift(),\n          p = e.getByName(l);\n\n      if (p) {\n        c[l] = p.id;\n\n        for (var h = 0, d = e.getRequiredTemplates(p.script); h < d.length; h++) {\n          var f = d[h];\n          c[f] || u.push(f);\n        }\n      } else console.log(\"template class not found\", l);\n    }\n\n    return {\n      phrases: n,\n      graphics: s,\n      templateClasses: c\n    };\n  }, t.exportUnitData = function (e, r) {\n    if (void 0 === r && (r = !1), !e) return {\n      units: [],\n      templateClasses: []\n    };\n\n    for (var n = [], i = [], o = 0, s = e; o < s.length; o++) {\n      var a = s[o],\n          u = {\n        templates: a.templates ? a.templates.map(function (t) {\n          var e = t.type;\n          i.push(e);\n          var r = {};\n          return Object.keys(t.value).forEach(function (e) {\n            var n = t.value[e];\n            r[e] = \"object\" == _typeof(n) ? Object.assign({}, n) : n;\n          }), {\n            type: e,\n            value: r\n          };\n        }) : []\n      },\n          c = void 0;\n\n      if (a.words) {\n        var l = a,\n            p = t.exportUnitData(l.words);\n        u.words = p.units, c = p.templateClasses;\n      } else if (a.characters) {\n        var h = a,\n            d = t.exportUnitData(h.characters);\n        u.characters = d.units, c = d.templateClasses;\n      } else {\n        for (var f = 0, y = [\"fontFamily\", \"fontSize\", \"fontStyle\"]; f < y.length; f++) {\n          var g = y[f];\n          a[g] && (u[g] = a[g]);\n        }\n\n        c = [];\n      }\n\n      r && (u.startTime = a.startTime, u.endTime = a.endTime), n.push(u), i = i.concat(c);\n    }\n\n    return {\n      units: n,\n      templateClasses: i = i.filter(function (t, e, r) {\n        return r.indexOf(t) === e;\n      })\n    };\n  }, t.prototype.updateTemplateData = function (e) {\n    t.updateTemplateDataForUnits(e, this.firstPhrase, this.data.phrases), t.updateTemplateDataForUnits(e, this.firstGraphic, this.data.graphics);\n  }, t.updateTemplateDataForUnits = function (e, r, n) {\n    if (r && n) for (var i = 0, o = n; i < o.length; i++) {\n      var s = o[i];\n      s.templates = [];\n\n      for (var a = 0; a < r.templateCount; a++) {\n        var u = r.getTemplate(a),\n            c = e.exportInstance(u);\n        s.templates.push(c);\n      }\n\n      if (s.words) {\n        var l = s;\n        t.updateTemplateDataForUnits(e, r.children[0], l.words);\n      } else if (s.characters) {\n        var p = s;\n        t.updateTemplateDataForUnits(e, r.children[0], p.characters);\n      }\n\n      r = r.next;\n    }\n  }, t.prototype.addPhrase = function (t) {\n    if (t) {\n      if (this._phrases.length > 0 && (t._previous = this.lastPhrase, t._previous._next = t, t.wordCount > 0)) {\n        for (var e = this.lastPhrase; e && null === e.lastWord;) {\n          e = e.previous;\n        }\n\n        if (e && (t.firstWord._previous = e.lastWord, e.lastWord._next = t.firstWord), t.charCount > 0) {\n          for (var r = e.lastWord; r && null === r.lastChar;) {\n            r = r.previous;\n          }\n\n          t.firstChar._previous = r.lastChar, r.lastChar._next = t.firstChar;\n        }\n      }\n\n      this._phrases.push(t);\n\n      var n = this.expandTime(t),\n          i = n.startTime,\n          o = n.endTime;\n      this.data.startTime = i, this.data.endTime = o;\n    }\n  }, t.prototype.addGraphic = function (t) {\n    if (t) {\n      if (this._graphics.length <= 0) this._graphics.push(t), this.data.graphics = [t._data];else {\n        var e = Z(this._graphics, t, function (t) {\n          return t.startTime;\n        }),\n            r = e > 0 ? this._graphics[e - 1] : null,\n            n = e < this._graphics.length ? this._graphics[e] : null;\n        this._graphics.splice(e, 0, t), this.data.graphics.splice(e, 0, t._data), null !== r && (r._next = t, t._previous = r), null !== n && (n._previous = t, t._next = n);\n      }\n      this._runtime && this._runtime.addGraphic(t);\n    }\n  }, t.prototype.removeGraphic = function (t) {\n    for (var e = 0; e < this._graphics.length; e++) {\n      var r = this._graphics[e];\n      if (r === t) return r._previous && (r._previous._next = r._next), r._next && (r._next._previous = r._previous), this._graphics.splice(e, 1), this.data.graphics.splice(e, 1), this._runtime && this._runtime.removeGraphic(r), !0;\n    }\n\n    return !1;\n  }, t.prototype.removeGraphics = function () {\n    var t = this;\n    this._runtime && this._graphics.forEach(function (e) {\n      return t._runtime.removeGraphic(e);\n    }), this._graphics = [], this.rendering.reset();\n  }, t.prototype.expandTime = function (t) {\n    return {\n      startTime: G(this.data.startTime, t.startTime),\n      endTime: q(this.data.endTime, t.endTime)\n    };\n  }, t.prototype.findIndex = function (t) {\n    if (t instanceof $) return this._phrases.indexOf(t);\n\n    if (t instanceof H) {\n      for (var e = 0, r = !1, n = 0, i = this._phrases; n < i.length; n++) {\n        if (!((u = (a = i[n]).findIndex(t)) < 0)) {\n          e += u, r = !0;\n          break;\n        }\n\n        e += a.wordCount;\n      }\n\n      return r ? e : -1;\n    }\n\n    if (t instanceof J) {\n      e = 0, r = !1;\n\n      for (var o = 0, s = this._phrases; o < s.length; o++) {\n        var a, u;\n\n        if (!((u = (a = s[o]).findIndex(t)) < 0)) {\n          e += u, r = !0;\n          break;\n        }\n\n        e += a.charCount;\n      }\n\n      return r ? e : -1;\n    }\n\n    return t instanceof X ? this._graphics.indexOf(t) : -1;\n  }, t.prototype.getPhrase = function (t) {\n    return t < 0 || t >= this._phrases.length ? null : this._phrases[t];\n  }, t.prototype.getGraphic = function (t) {\n    return t < 0 || t >= this._graphics.length ? null : this._graphics[t];\n  }, t.prototype.getWord = function (t) {\n    if (t < 0) return null;\n\n    for (var e = 0, r = this.firstPhrase;;) {\n      if (!r) return null;\n      if (e + r.children.length > t) break;\n      e += r.children.length, r = r.next;\n    }\n\n    return r.children[t - e];\n  }, t.prototype.getChar = function (t) {\n    if (t < 0) return null;\n\n    for (var e = 0, r = this.firstWord;;) {\n      if (!r) return null;\n      if (e + r.children.length > t) break;\n      e += r.children.length, r = r.next;\n    }\n\n    return r.children[t - e];\n  }, t.prototype.findChar = function (t, e) {\n    var r = this.findWord(t, e);\n    return r ? Q(r._children, t, e) : null;\n  }, t.prototype.findWord = function (t, e) {\n    var r = this.findPhrase(t, e);\n    return r ? Q(r._children, t, e) : null;\n  }, t.prototype.findPhrase = function (t, e) {\n    return Q(this._phrases, t, e);\n  }, t.prototype.findGraphic = function (t, e) {\n    return Q(this._graphics, t, e);\n  }, t;\n}(),\n    tt = function () {\n  function t(t, e, r, n, i, o) {\n    void 0 === t && (t = 1), void 0 === e && (e = 0), void 0 === r && (r = 0), void 0 === n && (n = 1), void 0 === i && (i = 0), void 0 === o && (o = 0), this.setValues(t, e, r, n, i, o);\n  }\n\n  return t.prototype.setValues = function (t, e, r, n, i, o) {\n    return void 0 === t && (t = 1), void 0 === e && (e = 0), void 0 === r && (r = 0), void 0 === n && (n = 1), void 0 === i && (i = 0), void 0 === o && (o = 0), this.a = t, this.b = e, this.c = r, this.d = n, this.tx = i, this.ty = o, this;\n  }, t.prototype.append = function (t, e, r, n, i, o) {\n    var s = this.a,\n        a = this.b,\n        u = this.c,\n        c = this.d;\n    return 1 == t && 0 == e && 0 == r && 1 == n || (this.a = s * t + u * e, this.b = a * t + c * e, this.c = s * r + u * n, this.d = a * r + c * n), this.tx = s * i + u * o + this.tx, this.ty = a * i + c * o + this.ty, this;\n  }, t.prototype.prepend = function (t, e, r, n, i, o) {\n    var s = this.a,\n        a = this.c,\n        u = this.tx;\n    return this.a = t * s + r * this.b, this.b = e * s + n * this.b, this.c = t * a + r * this.d, this.d = e * a + n * this.d, this.tx = t * u + r * this.ty + i, this.ty = e * u + n * this.ty + o, this;\n  }, t.prototype.appendMatrix = function (t) {\n    return this.append(t.a, t.b, t.c, t.d, t.tx, t.ty);\n  }, t.prototype.prependMatrix = function (t) {\n    return this.prepend(t.a, t.b, t.c, t.d, t.tx, t.ty);\n  }, t.prototype.appendTransform = function (e, r, n, i, o, s, a, u, c) {\n    var l, p, h;\n    return o % 360 ? (l = o * t.DEG_TO_RAD, p = Math.cos(l), h = Math.sin(l)) : (p = 1, h = 0), s || a ? (s *= t.DEG_TO_RAD, a *= t.DEG_TO_RAD, this.append(Math.cos(a), Math.sin(a), -Math.sin(s), Math.cos(s), e, r), this.append(p * n, h * n, -h * i, p * i, 0, 0)) : this.append(p * n, h * n, -h * i, p * i, e, r), (u || c) && (this.tx -= u * this.a + c * this.c, this.ty -= u * this.b + c * this.d), this;\n  }, t.prototype.prependTransform = function (e, r, n, i, o, s, a, u, c) {\n    var l, p, h;\n    return o % 360 ? (l = o * t.DEG_TO_RAD, p = Math.cos(l), h = Math.sin(l)) : (p = 1, h = 0), (u || c) && (this.tx -= u, this.ty -= c), s || a ? (s *= t.DEG_TO_RAD, a *= t.DEG_TO_RAD, this.prepend(p * n, h * n, -h * i, p * i, 0, 0), this.prepend(Math.cos(a), Math.sin(a), -Math.sin(s), Math.cos(s), e, r)) : this.prepend(p * n, h * n, -h * i, p * i, e, r), this;\n  }, t.prototype.rotate = function (e) {\n    e *= t.DEG_TO_RAD;\n    var r = Math.cos(e),\n        n = Math.sin(e),\n        i = this.a,\n        o = this.b;\n    return this.a = i * r + this.c * n, this.b = o * r + this.d * n, this.c = -i * n + this.c * r, this.d = -o * n + this.d * r, this;\n  }, t.prototype.skew = function (e, r) {\n    return e *= t.DEG_TO_RAD, r *= t.DEG_TO_RAD, this.append(Math.cos(r), Math.sin(r), -Math.sin(e), Math.cos(e), 0, 0), this;\n  }, t.prototype.scale = function (t, e) {\n    return this.a *= t, this.b *= t, this.c *= e, this.d *= e, this;\n  }, t.prototype.translate = function (t, e) {\n    return this.tx += this.a * t + this.c * e, this.ty += this.b * t + this.d * e, this;\n  }, t.prototype.identity = function () {\n    return this.a = this.d = 1, this.b = this.c = this.tx = this.ty = 0, this;\n  }, t.prototype.invert = function () {\n    var t = this.a,\n        e = this.b,\n        r = this.c,\n        n = this.d,\n        i = this.tx,\n        o = t * n - e * r;\n    return this.a = n / o, this.b = -e / o, this.c = -r / o, this.d = t / o, this.tx = (r * this.ty - n * i) / o, this.ty = -(t * this.ty - e * i) / o, this;\n  }, t.prototype.isIdentity = function () {\n    return 0 === this.tx && 0 === this.ty && 1 === this.a && 0 === this.b && 0 === this.c && 1 === this.d;\n  }, t.prototype.equals = function (t) {\n    return this.tx === t.tx && this.ty === t.ty && this.a === t.a && this.b === t.b && this.c === t.c && this.d === t.d;\n  }, t.prototype.transformPoint = function (t, e, r) {\n    return r.x = t * this.a + e * this.c + this.tx, r.y = t * this.b + e * this.d + this.ty, r;\n  }, t.prototype.decompose = function (e) {\n    void 0 === e && (e = {}), e.x = this.tx, e.y = this.ty, e.scaleX = Math.sqrt(this.a * this.a + this.b * this.b), e.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);\n    var r = Math.atan2(-this.c, this.d),\n        n = Math.atan2(this.b, this.a);\n    return Math.abs(1 - r / n) < 1e-5 ? (e.rotation = n / t.DEG_TO_RAD, this.a < 0 && this.d >= 0 && (e.rotation += e.rotation <= 0 ? 180 : -180), e.skewX = e.skewY = 0) : (e.skewX = r / t.DEG_TO_RAD, e.skewY = n / t.DEG_TO_RAD), e;\n  }, t.prototype.copy = function (t) {\n    return this.setValues(t.a, t.b, t.c, t.d, t.tx, t.ty);\n  }, t.prototype.clone = function () {\n    return new t(this.a, this.b, this.c, this.d, this.tx, this.ty);\n  }, t.prototype.toString = function () {\n    return \"[\" + this.constructor.name + \" (a=\" + this.a + \" b=\" + this.b + \" c=\" + this.c + \" d=\" + this.d + \" tx=\" + this.tx + \" ty=\" + this.ty + \")]\";\n  }, t.DEG_TO_RAD = Math.PI / 180, t.identity = new t(), t;\n}(),\n    et = function () {\n  function t(t, e) {\n    void 0 === t && (t = 0), void 0 === e && (e = 0), this.setValues(t, e);\n  }\n\n  return t.prototype.setValues = function (t, e) {\n    return void 0 === t && (t = 0), void 0 === e && (e = 0), this.x = t, this.y = e, this;\n  }, t.prototype.copy = function (t) {\n    return this.x = t.x, this.y = t.y, this;\n  }, t.prototype.clone = function () {\n    return new t(this.x, this.y);\n  }, t.prototype.toString = function () {\n    return \"[\" + this.constructor.name + \" (x=\" + this.x + \" y=\" + this.y + \")]\";\n  }, t;\n}(),\n    rt = function () {\n  function t() {\n    this.tx = new tt(), this.alpha = 0, this.composite = \"\", this.visible = !0;\n  }\n\n  return t.prototype.reset = function () {}, t;\n}(),\n    nt = function () {\n  function t() {\n    this.wrapperTable = {};\n  }\n\n  return t.prototype.isGraphics = function () {\n    return !1;\n  }, t.prototype.setCanvas = function () {\n    return Promise.resolve();\n  }, t.prototype.createRuntime = function (t) {\n    return function (t, e, r, n) {\n      return new (r || (r = Promise))(function (i, o) {\n        function s(t) {\n          try {\n            u(n.next(t));\n          } catch (t) {\n            o(t);\n          }\n        }\n\n        function a(t) {\n          try {\n            u(n[\"throw\"](t));\n          } catch (t) {\n            o(t);\n          }\n        }\n\n        function u(t) {\n          var e;\n          t.done ? i(t.value) : (e = t.value, e instanceof r ? e : new r(function (t) {\n            t(e);\n          })).then(s, a);\n        }\n\n        u((n = n.apply(t, e || [])).next());\n      });\n    }(this, void 0, void 0, function () {\n      var e, r, n;\n      return function (t, e) {\n        var r,\n            n,\n            i,\n            o,\n            s = {\n          label: 0,\n          sent: function sent() {\n            if (1 & i[0]) throw i[1];\n            return i[1];\n          },\n          trys: [],\n          ops: []\n        };\n        return o = {\n          next: a(0),\n          \"throw\": a(1),\n          \"return\": a(2)\n        }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n          return this;\n        }), o;\n\n        function a(o) {\n          return function (a) {\n            return function (o) {\n              if (r) throw new TypeError(\"Generator is already executing.\");\n\n              for (; s;) {\n                try {\n                  if (r = 1, n && (i = 2 & o[0] ? n[\"return\"] : o[0] ? n[\"throw\"] || ((i = n[\"return\"]) && i.call(n), 0) : n.next) && !(i = i.call(n, o[1])).done) return i;\n\n                  switch (n = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n                    case 0:\n                    case 1:\n                      i = o;\n                      break;\n\n                    case 4:\n                      return s.label++, {\n                        value: o[1],\n                        done: !1\n                      };\n\n                    case 5:\n                      s.label++, n = o[1], o = [0];\n                      continue;\n\n                    case 7:\n                      o = s.ops.pop(), s.trys.pop();\n                      continue;\n\n                    default:\n                      if (!((i = (i = s.trys).length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                        s = 0;\n                        continue;\n                      }\n\n                      if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                        s.label = o[1];\n                        break;\n                      }\n\n                      if (6 === o[0] && s.label < i[1]) {\n                        s.label = i[1], i = o;\n                        break;\n                      }\n\n                      if (i && s.label < i[2]) {\n                        s.label = i[2], s.ops.push(o);\n                        break;\n                      }\n\n                      i[2] && s.ops.pop(), s.trys.pop();\n                      continue;\n                  }\n\n                  o = e.call(t, s);\n                } catch (t) {\n                  o = [6, t], n = 0;\n                } finally {\n                  r = i = 0;\n                }\n              }\n\n              if (5 & o[0]) throw o[1];\n              return {\n                value: o[0] ? o[1] : void 0,\n                done: !0\n              };\n            }([o, a]);\n          };\n        }\n      }(this, function (i) {\n        for (e = t.firstPhrase; e;) {\n          for (e._runtime = {\n            graphics: {},\n            rendering: new rt(),\n            update: function update() {}\n          }, r = e.firstWord; r;) {\n            for (r._runtime = {\n              graphics: {},\n              rendering: new rt(),\n              update: function update() {}\n            }, n = r.firstChar; n && (n._runtime = {\n              graphics: {\n                clear: function clear() {}\n              },\n              rendering: new rt(),\n              update: function update() {},\n              advance: 0,\n              ascent: 0,\n              descent: 0,\n              onFontUpdate: function onFontUpdate() {},\n              onColorUpdate: function onColorUpdate() {}\n            }, n !== r.lastChar);) {\n              n = n.next;\n            }\n\n            if (r === e.lastWord) break;\n            r = r.next;\n          }\n\n          e = e.next;\n        }\n\n        return t._runtime = {\n          rendering: new rt(),\n          addGraphic: function addGraphic() {},\n          removeGraphic: function removeGraphic() {}\n        }, [2, t._runtime];\n      });\n    });\n  }, t.prototype.reset = function () {}, t.prototype.update = function () {}, t.prototype.updateStageTx = function () {}, t;\n}();\n\n\"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self && self;\nvar it,\n    ot,\n    st = (function (t, e) {\n  !function (t) {\n    var e, r, n, i;\n    t.version = \"0.4.1\", t.parse = function (t, i) {\n      return r = String(t), n = r.length, s(i), Wt(), function (t) {\n        v = m = a, e.locations && (b = new zt()), _ = P = null, w = [], Qt();\n        var r = t || le(),\n            n = !0;\n\n        for (t || (r.body = []); h !== C;) {\n          var i = Pe();\n          r.body.push(i), n && de(i) && ae(!0), n = !1;\n        }\n\n        return he(r, \"Program\");\n      }(e.program);\n    };\n    var o = t.defaultOptions = {\n      ecmaVersion: 5,\n      strictSemicolons: !1,\n      allowTrailingCommas: !0,\n      forbidReserved: !1,\n      locations: !1,\n      onComment: null,\n      ranges: !1,\n      program: null,\n      sourceFile: null,\n      directSourceFile: null\n    };\n\n    function s(t) {\n      for (var r in e = t || {}, o) {\n        Object.prototype.hasOwnProperty.call(e, r) || (e[r] = o[r]);\n      }\n\n      i = e.sourceFile || null;\n    }\n\n    var a,\n        u,\n        c,\n        l,\n        p,\n        h,\n        d,\n        f,\n        y,\n        g,\n        v,\n        m,\n        b,\n        _,\n        w,\n        P,\n        E = t.getLineInfo = function (t, e) {\n      for (var r = 1, n = 0;;) {\n        Gt.lastIndex = n;\n        var i = Gt.exec(t);\n        if (!(i && i.index < e)) break;\n        ++r, n = i.index + i[0].length;\n      }\n\n      return {\n        line: r,\n        column: e - n\n      };\n    };\n\n    function O(t, e) {\n      var n = E(r, t);\n      e += \" (\" + n.line + \":\" + n.column + \")\";\n      var i = new SyntaxError(e);\n      throw i.pos = t, i.loc = n, i.raisedAt = a, i;\n    }\n\n    t.tokenize = function (t, i) {\n      r = String(t), n = r.length, s(i), Wt();\n      var o = {};\n\n      function v(t) {\n        return Qt(t), o.start = u, o.end = c, o.startLoc = l, o.endLoc = p, o.type = h, o.value = d, o;\n      }\n\n      return v.jumpTo = function (t, n) {\n        var i;\n        if (a = t, e.locations) for (y = 1, g = Gt.lastIndex = 0; (i = Gt.exec(r)) && i.index < t;) {\n          ++y, g = i.index + i[0].length;\n        }\n        f = n, $t();\n      }, v;\n    };\n\n    var T = [],\n        S = {\n      type: \"num\"\n    },\n        R = {\n      type: \"regexp\"\n    },\n        x = {\n      type: \"string\"\n    },\n        A = {\n      type: \"name\"\n    },\n        C = {\n      type: \"eof\"\n    },\n        N = {\n      keyword: \"break\"\n    },\n        k = {\n      keyword: \"case\",\n      beforeExpr: !0\n    },\n        I = {\n      keyword: \"catch\"\n    },\n        j = {\n      keyword: \"continue\"\n    },\n        L = {\n      keyword: \"debugger\"\n    },\n        U = {\n      keyword: \"default\"\n    },\n        F = {\n      keyword: \"do\",\n      isLoop: !0\n    },\n        M = {\n      keyword: \"else\",\n      beforeExpr: !0\n    },\n        D = {\n      keyword: \"finally\"\n    },\n        B = {\n      keyword: \"for\",\n      isLoop: !0\n    },\n        V = {\n      keyword: \"function\"\n    },\n        G = {\n      keyword: \"if\"\n    },\n        q = {\n      keyword: \"return\",\n      beforeExpr: !0\n    },\n        Y = {\n      keyword: \"switch\"\n    },\n        z = {\n      keyword: \"throw\",\n      beforeExpr: !0\n    },\n        W = {\n      keyword: \"try\"\n    },\n        J = {\n      keyword: \"var\"\n    },\n        X = {\n      keyword: \"while\",\n      isLoop: !0\n    },\n        H = {\n      keyword: \"with\"\n    },\n        $ = {\n      keyword: \"new\",\n      beforeExpr: !0\n    },\n        Z = {\n      keyword: \"this\"\n    },\n        Q = {\n      keyword: \"null\",\n      atomValue: null\n    },\n        K = {\n      keyword: \"true\",\n      atomValue: !0\n    },\n        tt = {\n      keyword: \"false\",\n      atomValue: !1\n    },\n        et = {\n      keyword: \"in\",\n      binop: 7,\n      beforeExpr: !0\n    },\n        rt = {\n      \"break\": N,\n      \"case\": k,\n      \"catch\": I,\n      \"continue\": j,\n      \"debugger\": L,\n      \"default\": U,\n      \"do\": F,\n      \"else\": M,\n      \"finally\": D,\n      \"for\": B,\n      \"function\": V,\n      \"if\": G,\n      \"return\": q,\n      \"switch\": Y,\n      \"throw\": z,\n      \"try\": W,\n      \"var\": J,\n      \"while\": X,\n      \"with\": H,\n      \"null\": Q,\n      \"true\": K,\n      \"false\": tt,\n      \"new\": $,\n      \"in\": et,\n      \"instanceof\": {\n        keyword: \"instanceof\",\n        binop: 7,\n        beforeExpr: !0\n      },\n      \"this\": Z,\n      \"typeof\": {\n        keyword: \"typeof\",\n        prefix: !0,\n        beforeExpr: !0\n      },\n      \"void\": {\n        keyword: \"void\",\n        prefix: !0,\n        beforeExpr: !0\n      },\n      \"delete\": {\n        keyword: \"delete\",\n        prefix: !0,\n        beforeExpr: !0\n      }\n    },\n        nt = {\n      type: \"[\",\n      beforeExpr: !0\n    },\n        it = {\n      type: \"]\"\n    },\n        ot = {\n      type: \"{\",\n      beforeExpr: !0\n    },\n        st = {\n      type: \"}\"\n    },\n        at = {\n      type: \"(\",\n      beforeExpr: !0\n    },\n        ut = {\n      type: \")\"\n    },\n        ct = {\n      type: \",\",\n      beforeExpr: !0\n    },\n        lt = {\n      type: \";\",\n      beforeExpr: !0\n    },\n        pt = {\n      type: \":\",\n      beforeExpr: !0\n    },\n        ht = {\n      type: \".\"\n    },\n        dt = {\n      type: \"?\",\n      beforeExpr: !0\n    },\n        ft = {\n      binop: 10,\n      beforeExpr: !0\n    },\n        yt = {\n      isAssign: !0,\n      beforeExpr: !0\n    },\n        gt = {\n      isAssign: !0,\n      beforeExpr: !0\n    },\n        vt = {\n      postfix: !0,\n      prefix: !0,\n      isUpdate: !0\n    },\n        mt = {\n      prefix: !0,\n      beforeExpr: !0\n    },\n        bt = {\n      binop: 1,\n      beforeExpr: !0\n    },\n        _t = {\n      binop: 2,\n      beforeExpr: !0\n    },\n        wt = {\n      binop: 3,\n      beforeExpr: !0\n    },\n        Pt = {\n      binop: 4,\n      beforeExpr: !0\n    },\n        Et = {\n      binop: 5,\n      beforeExpr: !0\n    },\n        Ot = {\n      binop: 6,\n      beforeExpr: !0\n    },\n        Tt = {\n      binop: 7,\n      beforeExpr: !0\n    },\n        St = {\n      binop: 8,\n      beforeExpr: !0\n    },\n        Rt = {\n      binop: 9,\n      prefix: !0,\n      beforeExpr: !0\n    },\n        xt = {\n      binop: 10,\n      beforeExpr: !0\n    };\n\n    for (var At in t.tokTypes = {\n      bracketL: nt,\n      bracketR: it,\n      braceL: ot,\n      braceR: st,\n      parenL: at,\n      parenR: ut,\n      comma: ct,\n      semi: lt,\n      colon: pt,\n      dot: ht,\n      question: dt,\n      slash: ft,\n      eq: yt,\n      name: A,\n      eof: C,\n      num: S,\n      regexp: R,\n      string: x\n    }, rt) {\n      t.tokTypes[\"_\" + At] = rt[At];\n    }\n\n    function Ct(t) {\n      t = t.split(\" \");\n      var e = \"\",\n          r = [];\n\n      t: for (var n = 0; n < t.length; ++n) {\n        for (var i = 0; i < r.length; ++i) {\n          if (r[i][0].length == t[n].length) {\n            r[i].push(t[n]);\n            continue t;\n          }\n        }\n\n        r.push([t[n]]);\n      }\n\n      function o(t) {\n        if (1 == t.length) return e += \"return str === \" + JSON.stringify(t[0]) + \";\";\n        e += \"switch(str){\";\n\n        for (var r = 0; r < t.length; ++r) {\n          e += \"case \" + JSON.stringify(t[r]) + \":\";\n        }\n\n        e += \"return true}return false;\";\n      }\n\n      if (r.length > 3) {\n        for (r.sort(function (t, e) {\n          return e.length - t.length;\n        }), e += \"switch(str.length){\", n = 0; n < r.length; ++n) {\n          var s = r[n];\n          e += \"case \" + s[0].length + \":\", o(s);\n        }\n\n        e += \"}\";\n      } else o(t);\n\n      return new Function(\"str\", e);\n    }\n\n    var Nt,\n        kt = Ct(\"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile\"),\n        It = Ct(\"class enum extends super const export import\"),\n        jt = Ct(\"implements interface let package private protected public static yield\"),\n        Lt = Ct(\"eval arguments\"),\n        Ut = Ct(\"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this\"),\n        Ft = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/,\n        Mt = \"ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ\",\n        Dt = new RegExp(\"[\" + Mt + \"]\"),\n        Bt = new RegExp(\"[\" + Mt + \"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]\"),\n        Vt = /[\\n\\r\\u2028\\u2029]/,\n        Gt = /\\r\\n|[\\n\\r\\u2028\\u2029]/g,\n        qt = t.isIdentifierStart = function (t) {\n      return t < 65 ? 36 === t : t < 91 || (t < 97 ? 95 === t : t < 123 || t >= 170 && Dt.test(String.fromCharCode(t)));\n    },\n        Yt = t.isIdentifierChar = function (t) {\n      return t < 48 ? 36 === t : t < 58 || !(t < 65) && (t < 91 || (t < 97 ? 95 === t : t < 123 || t >= 170 && Bt.test(String.fromCharCode(t))));\n    };\n\n    function zt() {\n      this.line = y, this.column = a - g;\n    }\n\n    function Wt() {\n      y = 1, a = g = 0, f = !0, $t();\n    }\n\n    function Jt(t, r) {\n      c = a, e.locations && (p = new zt()), h = t, $t(), d = r, f = t.beforeExpr;\n    }\n\n    function Xt() {\n      var t,\n          n = e.onComment && e.locations && new zt(),\n          i = a,\n          o = r.indexOf(\"*/\", a += 2);\n      if (-1 === o && O(a - 2, \"Unterminated comment\"), a = o + 2, e.locations) for (Gt.lastIndex = i; (t = Gt.exec(r)) && t.index < a;) {\n        ++y, g = t.index + t[0].length;\n      }\n      e.onComment && e.onComment(!0, r.slice(i + 2, o), i, a, n, e.locations && new zt());\n    }\n\n    function Ht() {\n      for (var t = a, i = e.onComment && e.locations && new zt(), o = r.charCodeAt(a += 2); a < n && 10 !== o && 13 !== o && 8232 !== o && 8233 !== o;) {\n        ++a, o = r.charCodeAt(a);\n      }\n\n      e.onComment && e.onComment(!1, r.slice(t + 2, a), t, a, i, e.locations && new zt());\n    }\n\n    function $t() {\n      for (; a < n;) {\n        var t = r.charCodeAt(a);\n        if (32 === t) ++a;else if (13 === t) ++a, 10 === (i = r.charCodeAt(a)) && ++a, e.locations && (++y, g = a);else if (10 === t || 8232 === t || 8233 === t) ++a, e.locations && (++y, g = a);else if (t > 8 && t < 14) ++a;else if (47 === t) {\n          var i;\n          if (42 === (i = r.charCodeAt(a + 1))) Xt();else {\n            if (47 !== i) break;\n            Ht();\n          }\n        } else if (160 === t) ++a;else {\n          if (!(t >= 5760 && Ft.test(String.fromCharCode(t)))) break;\n          ++a;\n        }\n      }\n    }\n\n    function Zt(t) {\n      switch (t) {\n        case 46:\n          return function () {\n            var t = r.charCodeAt(a + 1);\n            return t >= 48 && t <= 57 ? re(!0) : (++a, Jt(ht));\n          }();\n\n        case 40:\n          return ++a, Jt(at);\n\n        case 41:\n          return ++a, Jt(ut);\n\n        case 59:\n          return ++a, Jt(lt);\n\n        case 44:\n          return ++a, Jt(ct);\n\n        case 91:\n          return ++a, Jt(nt);\n\n        case 93:\n          return ++a, Jt(it);\n\n        case 123:\n          return ++a, Jt(ot);\n\n        case 125:\n          return ++a, Jt(st);\n\n        case 58:\n          return ++a, Jt(pt);\n\n        case 63:\n          return ++a, Jt(dt);\n\n        case 48:\n          var i = r.charCodeAt(a + 1);\n          if (120 === i || 88 === i) return function () {\n            a += 2;\n            var t = ee(16);\n            return null == t && O(u + 2, \"Expected hexadecimal number\"), qt(r.charCodeAt(a)) && O(a, \"Identifier directly after number\"), Jt(S, t);\n          }();\n\n        case 49:\n        case 50:\n        case 51:\n        case 52:\n        case 53:\n        case 54:\n        case 55:\n        case 56:\n        case 57:\n          return re(!1);\n\n        case 34:\n        case 39:\n          return function (t) {\n            a++;\n\n            for (var i = \"\";;) {\n              a >= n && O(u, \"Unterminated string constant\");\n              var o = r.charCodeAt(a);\n              if (o === t) return ++a, Jt(x, i);\n\n              if (92 === o) {\n                o = r.charCodeAt(++a);\n                var s = /^[0-7]+/.exec(r.slice(a, a + 3));\n\n                for (s && (s = s[0]); s && parseInt(s, 8) > 255;) {\n                  s = s.slice(0, -1);\n                }\n\n                if (\"0\" === s && (s = null), ++a, s) P && O(a - 2, \"Octal literal in strict mode\"), i += String.fromCharCode(parseInt(s, 8)), a += s.length - 1;else switch (o) {\n                  case 110:\n                    i += \"\\n\";\n                    break;\n\n                  case 114:\n                    i += \"\\r\";\n                    break;\n\n                  case 120:\n                    i += String.fromCharCode(ne(2));\n                    break;\n\n                  case 117:\n                    i += String.fromCharCode(ne(4));\n                    break;\n\n                  case 85:\n                    i += String.fromCharCode(ne(8));\n                    break;\n\n                  case 116:\n                    i += \"\\t\";\n                    break;\n\n                  case 98:\n                    i += \"\\b\";\n                    break;\n\n                  case 118:\n                    i += \"\\v\";\n                    break;\n\n                  case 102:\n                    i += \"\\f\";\n                    break;\n\n                  case 48:\n                    i += \"\\0\";\n                    break;\n\n                  case 13:\n                    10 === r.charCodeAt(a) && ++a;\n\n                  case 10:\n                    e.locations && (g = a, ++y);\n                    break;\n\n                  default:\n                    i += String.fromCharCode(o);\n                }\n              } else 13 !== o && 10 !== o && 8232 !== o && 8233 !== o || O(u, \"Unterminated string constant\"), i += String.fromCharCode(o), ++a;\n            }\n          }(t);\n\n        case 47:\n          return function () {\n            var t = r.charCodeAt(a + 1);\n            return f ? (++a, te()) : 61 === t ? Kt(gt, 2) : Kt(ft, 1);\n          }();\n\n        case 37:\n        case 42:\n          return 61 === r.charCodeAt(a + 1) ? Kt(gt, 2) : Kt(xt, 1);\n\n        case 124:\n        case 38:\n          return function (t) {\n            var e = r.charCodeAt(a + 1);\n            return e === t ? Kt(124 === t ? bt : _t, 2) : 61 === e ? Kt(gt, 2) : Kt(124 === t ? wt : Et, 1);\n          }(t);\n\n        case 94:\n          return 61 === r.charCodeAt(a + 1) ? Kt(gt, 2) : Kt(Pt, 1);\n\n        case 43:\n        case 45:\n          return function (t) {\n            var e = r.charCodeAt(a + 1);\n            return e === t ? 45 == e && 62 == r.charCodeAt(a + 2) && Vt.test(r.slice(m, a)) ? (a += 3, Ht(), $t(), Qt()) : Kt(vt, 2) : 61 === e ? Kt(gt, 2) : Kt(Rt, 1);\n          }(t);\n\n        case 60:\n        case 62:\n          return function (t) {\n            var e = r.charCodeAt(a + 1),\n                n = 1;\n            return e === t ? (n = 62 === t && 62 === r.charCodeAt(a + 2) ? 3 : 2, 61 === r.charCodeAt(a + n) ? Kt(gt, n + 1) : Kt(St, n)) : 33 == e && 60 == t && 45 == r.charCodeAt(a + 2) && 45 == r.charCodeAt(a + 3) ? (a += 4, Ht(), $t(), Qt()) : (61 === e && (n = 61 === r.charCodeAt(a + 2) ? 3 : 2), Kt(Tt, n));\n          }(t);\n\n        case 61:\n        case 33:\n          return function (t) {\n            return 61 === r.charCodeAt(a + 1) ? Kt(Ot, 61 === r.charCodeAt(a + 2) ? 3 : 2) : Kt(61 === t ? yt : mt, 1);\n          }(t);\n\n        case 126:\n          return Kt(mt, 1);\n      }\n\n      return !1;\n    }\n\n    function Qt(t) {\n      if (t ? a = u + 1 : u = a, e.locations && (l = new zt()), t) return te();\n      if (a >= n) return Jt(C);\n      var i = r.charCodeAt(a);\n      if (qt(i) || 92 === i) return oe();\n      var o = Zt(i);\n\n      if (!1 === o) {\n        var s = String.fromCharCode(i);\n        if (\"\\\\\" === s || Dt.test(s)) return oe();\n        O(a, \"Unexpected character '\" + s + \"'\");\n      }\n\n      return o;\n    }\n\n    function Kt(t, e) {\n      var n = r.slice(a, a + e);\n      a += e, Jt(t, n);\n    }\n\n    function te() {\n      for (var t, e, i = a;;) {\n        a >= n && O(i, \"Unterminated regular expression\");\n        var o = r.charAt(a);\n        if (Vt.test(o) && O(i, \"Unterminated regular expression\"), t) t = !1;else {\n          if (\"[\" === o) e = !0;else if (\"]\" === o && e) e = !1;else if (\"/\" === o && !e) break;\n          t = \"\\\\\" === o;\n        }\n        ++a;\n      }\n\n      var s = r.slice(i, a);\n      ++a;\n      var u = ie();\n      return u && !/^[gmsiy]*$/.test(u) && O(i, \"Invalid regexp flag\"), Jt(R, new RegExp(s, u));\n    }\n\n    function ee(t, e) {\n      for (var n = a, i = 0, o = 0, s = null == e ? 1 / 0 : e; o < s; ++o) {\n        var u,\n            c = r.charCodeAt(a);\n        if ((u = c >= 97 ? c - 97 + 10 : c >= 65 ? c - 65 + 10 : c >= 48 && c <= 57 ? c - 48 : 1 / 0) >= t) break;\n        ++a, i = i * t + u;\n      }\n\n      return a === n || null != e && a - n !== e ? null : i;\n    }\n\n    function re(t) {\n      var e = a,\n          n = !1,\n          i = 48 === r.charCodeAt(a);\n      t || null !== ee(10) || O(e, \"Invalid number\"), 46 === r.charCodeAt(a) && (++a, ee(10), n = !0);\n      var o = r.charCodeAt(a);\n      69 !== o && 101 !== o || (43 !== (o = r.charCodeAt(++a)) && 45 !== o || ++a, null === ee(10) && O(e, \"Invalid number\"), n = !0), qt(r.charCodeAt(a)) && O(a, \"Identifier directly after number\");\n      var s,\n          u = r.slice(e, a);\n      return n ? s = parseFloat(u) : i && 1 !== u.length ? /[89]/.test(u) || P ? O(e, \"Invalid number\") : s = parseInt(u, 8) : s = parseInt(u, 10), Jt(S, s);\n    }\n\n    function ne(t) {\n      var e = ee(16, t);\n      return null === e && O(u, \"Bad character escape sequence\"), e;\n    }\n\n    function ie() {\n      Nt = !1;\n\n      for (var t, e = !0, n = a;;) {\n        var i = r.charCodeAt(a);\n        if (Yt(i)) Nt && (t += r.charAt(a)), ++a;else {\n          if (92 !== i) break;\n          Nt || (t = r.slice(n, a)), Nt = !0, 117 != r.charCodeAt(++a) && O(a, \"Expecting Unicode escape sequence \\\\uXXXX\"), ++a;\n          var o = ne(4),\n              s = String.fromCharCode(o);\n          s || O(a - 1, \"Invalid Unicode escape\"), (e ? qt(o) : Yt(o)) || O(a - 4, \"Invalid Unicode escape\"), t += s;\n        }\n        e = !1;\n      }\n\n      return Nt ? t : r.slice(n, a);\n    }\n\n    function oe() {\n      var t = ie(),\n          r = A;\n      return Nt || (Ut(t) ? r = rt[t] : (e.forbidReserved && (3 === e.ecmaVersion ? kt : It)(t) || P && jt(t)) && O(u, \"The keyword '\" + t + \"' is reserved\")), Jt(r, t);\n    }\n\n    function se() {\n      v = u, m = c, b = p, Qt();\n    }\n\n    function ae(t) {\n      if (P = t, a = m, e.locations) for (; a < g;) {\n        g = r.lastIndexOf(\"\\n\", g - 2) + 1, --y;\n      }\n      $t(), Qt();\n    }\n\n    function ue() {\n      this.type = null, this.start = u, this.end = null;\n    }\n\n    function ce() {\n      this.start = l, this.end = null, null !== i && (this.source = i);\n    }\n\n    function le() {\n      var t = new ue();\n      return e.locations && (t.loc = new ce()), e.directSourceFile && (t.sourceFile = e.directSourceFile), e.ranges && (t.range = [u, 0]), t;\n    }\n\n    function pe(t) {\n      var r = new ue();\n      return r.start = t.start, e.locations && (r.loc = new ce(), r.loc.start = t.loc.start), e.ranges && (r.range = [t.range[0], 0]), r;\n    }\n\n    function he(t, r) {\n      return t.type = r, t.end = m, e.locations && (t.loc.end = b), e.ranges && (t.range[1] = m), t;\n    }\n\n    function de(t) {\n      return e.ecmaVersion >= 5 && \"ExpressionStatement\" === t.type && \"Literal\" === t.expression.type && \"use strict\" === t.expression.value;\n    }\n\n    function fe(t) {\n      if (h === t) return se(), !0;\n    }\n\n    function ye() {\n      return !e.strictSemicolons && (h === C || h === st || Vt.test(r.slice(m, u)));\n    }\n\n    function ge() {\n      fe(lt) || ye() || me();\n    }\n\n    function ve(t) {\n      h === t ? se() : me();\n    }\n\n    function me() {\n      O(u, \"Unexpected token\");\n    }\n\n    function be(t) {\n      \"Identifier\" !== t.type && \"MemberExpression\" !== t.type && O(t.start, \"Assigning to rvalue\"), P && \"Identifier\" === t.type && Lt(t.name) && O(t.start, \"Assigning to \" + t.name + \" in strict mode\");\n    }\n\n    var _e = {\n      kind: \"loop\"\n    },\n        we = {\n      kind: \"switch\"\n    };\n\n    function Pe() {\n      (h === ft || h === gt && \"/=\" == d) && Qt(!0);\n      var t = h,\n          e = le();\n\n      switch (t) {\n        case N:\n        case j:\n          se();\n          var n = t === N;\n          fe(lt) || ye() ? e.label = null : h !== A ? me() : (e.label = Ue(), ge());\n\n          for (var i = 0; i < w.length; ++i) {\n            var o = w[i];\n\n            if (null == e.label || o.name === e.label.name) {\n              if (null != o.kind && (n || \"loop\" === o.kind)) break;\n              if (e.label && n) break;\n            }\n          }\n\n          return i === w.length && O(e.start, \"Unsyntactic \" + t.keyword), he(e, n ? \"BreakStatement\" : \"ContinueStatement\");\n\n        case L:\n          return se(), ge(), he(e, \"DebuggerStatement\");\n\n        case F:\n          return se(), w.push(_e), e.body = Pe(), w.pop(), ve(X), e.test = Ee(), ge(), he(e, \"DoWhileStatement\");\n\n        case B:\n          if (se(), w.push(_e), ve(at), h === lt) return Te(e, null);\n\n          if (h === J) {\n            var s = le();\n            return se(), Re(s, !0), he(s, \"VariableDeclaration\"), 1 === s.declarations.length && fe(et) ? Se(e, s) : Te(e, s);\n          }\n\n          return s = xe(!1, !0), fe(et) ? (be(s), Se(e, s)) : Te(e, s);\n\n        case V:\n          return se(), je(e, !0);\n\n        case G:\n          return se(), e.test = Ee(), e.consequent = Pe(), e.alternate = fe(M) ? Pe() : null, he(e, \"IfStatement\");\n\n        case q:\n          return _ || O(u, \"'return' outside of function\"), se(), fe(lt) || ye() ? e.argument = null : (e.argument = xe(), ge()), he(e, \"ReturnStatement\");\n\n        case Y:\n          se(), e.discriminant = Ee(), e.cases = [], ve(ot), w.push(we);\n\n          for (var a, c; h != st;) {\n            if (h === k || h === U) {\n              var l = h === k;\n              a && he(a, \"SwitchCase\"), e.cases.push(a = le()), a.consequent = [], se(), l ? a.test = xe() : (c && O(v, \"Multiple default clauses\"), c = !0, a.test = null), ve(pt);\n            } else a || me(), a.consequent.push(Pe());\n          }\n\n          return a && he(a, \"SwitchCase\"), se(), w.pop(), he(e, \"SwitchStatement\");\n\n        case z:\n          return se(), Vt.test(r.slice(m, u)) && O(m, \"Illegal newline after throw\"), e.argument = xe(), ge(), he(e, \"ThrowStatement\");\n\n        case W:\n          if (se(), e.block = Oe(), e.handler = null, h === I) {\n            var p = le();\n            se(), ve(at), p.param = Ue(), P && Lt(p.param.name) && O(p.param.start, \"Binding \" + p.param.name + \" in strict mode\"), ve(ut), p.guard = null, p.body = Oe(), e.handler = he(p, \"CatchClause\");\n          }\n\n          return e.guardedHandlers = T, e.finalizer = fe(D) ? Oe() : null, e.handler || e.finalizer || O(e.start, \"Missing catch or finally clause\"), he(e, \"TryStatement\");\n\n        case J:\n          return se(), Re(e), ge(), he(e, \"VariableDeclaration\");\n\n        case X:\n          return se(), e.test = Ee(), w.push(_e), e.body = Pe(), w.pop(), he(e, \"WhileStatement\");\n\n        case H:\n          return P && O(u, \"'with' in strict mode\"), se(), e.object = Ee(), e.body = Pe(), he(e, \"WithStatement\");\n\n        case ot:\n          return Oe();\n\n        case lt:\n          return se(), he(e, \"EmptyStatement\");\n\n        default:\n          var f = d,\n              y = xe();\n\n          if (t === A && \"Identifier\" === y.type && fe(pt)) {\n            for (i = 0; i < w.length; ++i) {\n              w[i].name === f && O(y.start, \"Label '\" + f + \"' is already declared\");\n            }\n\n            var g = h.isLoop ? \"loop\" : h === Y ? \"switch\" : null;\n            return w.push({\n              name: f,\n              kind: g\n            }), e.body = Pe(), w.pop(), e.label = y, he(e, \"LabeledStatement\");\n          }\n\n          return e.expression = y, ge(), he(e, \"ExpressionStatement\");\n      }\n    }\n\n    function Ee() {\n      ve(at);\n      var t = xe();\n      return ve(ut), t;\n    }\n\n    function Oe(t) {\n      var e,\n          r = le(),\n          n = !0,\n          i = !1;\n\n      for (r.body = [], ve(ot); !fe(st);) {\n        var o = Pe();\n        r.body.push(o), n && t && de(o) && (e = i, ae(i = !0)), n = !1;\n      }\n\n      return i && !e && ae(!1), he(r, \"BlockStatement\");\n    }\n\n    function Te(t, e) {\n      return t.init = e, ve(lt), t.test = h === lt ? null : xe(), ve(lt), t.update = h === ut ? null : xe(), ve(ut), t.body = Pe(), w.pop(), he(t, \"ForStatement\");\n    }\n\n    function Se(t, e) {\n      return t.left = e, t.right = xe(), ve(ut), t.body = Pe(), w.pop(), he(t, \"ForInStatement\");\n    }\n\n    function Re(t, e) {\n      for (t.declarations = [], t.kind = \"var\";;) {\n        var r = le();\n        if (r.id = Ue(), P && Lt(r.id.name) && O(r.id.start, \"Binding \" + r.id.name + \" in strict mode\"), r.init = fe(yt) ? xe(!0, e) : null, t.declarations.push(he(r, \"VariableDeclarator\")), !fe(ct)) break;\n      }\n\n      return t;\n    }\n\n    function xe(t, e) {\n      var r = Ae(e);\n\n      if (!t && h === ct) {\n        var n = pe(r);\n\n        for (n.expressions = [r]; fe(ct);) {\n          n.expressions.push(Ae(e));\n        }\n\n        return he(n, \"SequenceExpression\");\n      }\n\n      return r;\n    }\n\n    function Ae(t) {\n      var e = function (t) {\n        var e = function (t) {\n          return function t(e, r, n) {\n            var i = h.binop;\n\n            if (null != i && (!n || h !== et) && i > r) {\n              var o = pe(e);\n              o.left = e, o.operator = d;\n              var s = h;\n              se(), o.right = t(Ce(), i, n);\n              var a = he(o, s === bt || s === _t ? \"LogicalExpression\" : \"BinaryExpression\");\n              return t(a, r, n);\n            }\n\n            return e;\n          }(Ce(), -1, t);\n        }(t);\n\n        if (fe(dt)) {\n          var r = pe(e);\n          return r.test = e, r.consequent = xe(!0), ve(pt), r.alternate = xe(!0, t), he(r, \"ConditionalExpression\");\n        }\n\n        return e;\n      }(t);\n\n      if (h.isAssign) {\n        var r = pe(e);\n        return r.operator = d, r.left = e, se(), r.right = Ae(t), be(e), he(r, \"AssignmentExpression\");\n      }\n\n      return e;\n    }\n\n    function Ce() {\n      if (h.prefix) {\n        var t = le(),\n            e = h.isUpdate;\n        return t.operator = d, t.prefix = !0, f = !0, se(), t.argument = Ce(), e ? be(t.argument) : P && \"delete\" === t.operator && \"Identifier\" === t.argument.type && O(t.start, \"Deleting local variable in strict mode\"), he(t, e ? \"UpdateExpression\" : \"UnaryExpression\");\n      }\n\n      for (var r = Ne(ke()); h.postfix && !ye();) {\n        (t = pe(r)).operator = d, t.prefix = !1, t.argument = r, be(r), se(), r = he(t, \"UpdateExpression\");\n      }\n\n      return r;\n    }\n\n    function Ne(t, e) {\n      var r;\n      return fe(ht) ? ((r = pe(t)).object = t, r.property = Ue(!0), r.computed = !1, Ne(he(r, \"MemberExpression\"), e)) : fe(nt) ? ((r = pe(t)).object = t, r.property = xe(), r.computed = !0, ve(it), Ne(he(r, \"MemberExpression\"), e)) : !e && fe(at) ? ((r = pe(t)).callee = t, r.arguments = Le(ut, !1), Ne(he(r, \"CallExpression\"), e)) : t;\n    }\n\n    function ke() {\n      switch (h) {\n        case Z:\n          var t = le();\n          return se(), he(t, \"ThisExpression\");\n\n        case A:\n          return Ue();\n\n        case S:\n        case x:\n        case R:\n          return (t = le()).value = d, t.raw = r.slice(u, c), se(), he(t, \"Literal\");\n\n        case Q:\n        case K:\n        case tt:\n          return (t = le()).value = h.atomValue, t.raw = h.keyword, se(), he(t, \"Literal\");\n\n        case at:\n          var n = l,\n              i = u;\n          se();\n          var o = xe();\n          return o.start = i, o.end = c, e.locations && (o.loc.start = n, o.loc.end = p), e.ranges && (o.range = [i, c]), ve(ut), o;\n\n        case nt:\n          return t = le(), se(), t.elements = Le(it, !0, !0), he(t, \"ArrayExpression\");\n\n        case ot:\n          return function () {\n            var t = le(),\n                r = !0,\n                n = !1;\n\n            for (t.properties = [], se(); !fe(st);) {\n              if (r) r = !1;else if (ve(ct), e.allowTrailingCommas && fe(st)) break;\n              var i,\n                  o = {\n                key: Ie()\n              },\n                  s = !1;\n              if (fe(pt) ? (o.value = xe(!0), i = o.kind = \"init\") : e.ecmaVersion >= 5 && \"Identifier\" === o.key.type && (\"get\" === o.key.name || \"set\" === o.key.name) ? (s = n = !0, i = o.kind = o.key.name, o.key = Ie(), h !== at && me(), o.value = je(le(), !1)) : me(), \"Identifier\" === o.key.type && (P || n)) for (var a = 0; a < t.properties.length; ++a) {\n                var u = t.properties[a];\n\n                if (u.key.name === o.key.name) {\n                  var c = i == u.kind || s && \"init\" === u.kind || \"init\" === i && (\"get\" === u.kind || \"set\" === u.kind);\n                  c && !P && \"init\" === i && \"init\" === u.kind && (c = !1), c && O(o.key.start, \"Redefinition of property\");\n                }\n              }\n              t.properties.push(o);\n            }\n\n            return he(t, \"ObjectExpression\");\n          }();\n\n        case V:\n          return t = le(), se(), je(t, !1);\n\n        case $:\n          return function () {\n            var t = le();\n            return se(), t.callee = Ne(ke(), !0), fe(at) ? t.arguments = Le(ut, !1) : t.arguments = T, he(t, \"NewExpression\");\n          }();\n\n        default:\n          me();\n      }\n    }\n\n    function Ie() {\n      return h === S || h === x ? ke() : Ue(!0);\n    }\n\n    function je(t, e) {\n      h === A ? t.id = Ue() : e ? me() : t.id = null, t.params = [];\n      var r = !0;\n\n      for (ve(at); !fe(ut);) {\n        r ? r = !1 : ve(ct), t.params.push(Ue());\n      }\n\n      var n = _,\n          i = w;\n      if (_ = !0, w = [], t.body = Oe(!0), _ = n, w = i, P || t.body.body.length && de(t.body.body[0])) for (var o = t.id ? -1 : 0; o < t.params.length; ++o) {\n        var s = o < 0 ? t.id : t.params[o];\n        if ((jt(s.name) || Lt(s.name)) && O(s.start, \"Defining '\" + s.name + \"' in strict mode\"), o >= 0) for (var a = 0; a < o; ++a) {\n          s.name === t.params[a].name && O(s.start, \"Argument name clash in strict mode\");\n        }\n      }\n      return he(t, e ? \"FunctionDeclaration\" : \"FunctionExpression\");\n    }\n\n    function Le(t, r, n) {\n      for (var i = [], o = !0; !fe(t);) {\n        if (o) o = !1;else if (ve(ct), r && e.allowTrailingCommas && fe(t)) break;\n        n && h === ct ? i.push(null) : i.push(xe(!0));\n      }\n\n      return i;\n    }\n\n    function Ue(t) {\n      var r = le();\n      return r.name = h === A ? d : t && !e.forbidReserved && h.keyword || me(), f = !1, se(), he(r, \"Identifier\");\n    }\n  }(e);\n}(ot = {\n  path: it,\n  exports: {},\n  require: function require(t, e) {\n    return function () {\n      throw new Error(\"Dynamic requires are not currently supported by @rollup/plugin-commonjs\");\n    }(null == e && ot.path);\n  }\n}, ot.exports), ot.exports);\n\nfunction at(t) {\n  var e = parseFloat(t);\n  return isNaN(e) ? 0 : e;\n}\n\nfunction ut(t) {\n  var e;\n  if (!(null === (e = null === window || void 0 === window ? void 0 : window.location) || void 0 === e ? void 0 : e.search)) return null;\n\n  for (var r = 0, n = window.location.search.substring(1).split(\"&\"); r < n.length; r++) {\n    var i = n[r].split(\"=\");\n    if (decodeURIComponent(i[0]) === t) return decodeURIComponent(i[1]);\n  }\n\n  return null;\n}\n\nObject.freeze({\n  __proto__: null,\n  cancelIdleCallback: function cancelIdleCallback(t) {\n    return window.cancelIdleCallback ? window.cancelIdleCallback(t) : clearTimeout(t);\n  },\n  requestIdleCallback: function requestIdleCallback(t, e) {\n    if (window.requestIdleCallback) return window.requestIdleCallback(t, e);\n    var r = Date.now(),\n        n = e ? e.timeout : 50;\n    return setTimeout(function () {\n      t({\n        didTimeout: !1,\n        timeRemaining: function timeRemaining() {\n          return Math.max(0, n - (Date.now() - r));\n        }\n      });\n    }, 1);\n  },\n  getNumber: at,\n  getQueryVariable: ut\n});\n\nvar _ct = function ct(t, e) {\n  return (_ct = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, e) {\n    t.__proto__ = e;\n  } || function (t, e) {\n    for (var r in e) {\n      e.hasOwnProperty(r) && (t[r] = e[r]);\n    }\n  })(t, e);\n};\n\nfunction lt(t, e) {\n  function r() {\n    this.constructor = t;\n  }\n\n  _ct(t, e), t.prototype = null === e ? Object.create(e) : (r.prototype = e.prototype, new r());\n}\n\nvar _pt = function pt() {\n  return (_pt = Object.assign || function (t) {\n    for (var e, r = 1, n = arguments.length; r < n; r++) {\n      for (var i in e = arguments[r]) {\n        Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);\n      }\n    }\n\n    return t;\n  }).apply(this, arguments);\n};\n\nfunction ht(t, e, r, n) {\n  return new (r || (r = Promise))(function (i, o) {\n    function s(t) {\n      try {\n        u(n.next(t));\n      } catch (t) {\n        o(t);\n      }\n    }\n\n    function a(t) {\n      try {\n        u(n[\"throw\"](t));\n      } catch (t) {\n        o(t);\n      }\n    }\n\n    function u(t) {\n      var e;\n      t.done ? i(t.value) : (e = t.value, e instanceof r ? e : new r(function (t) {\n        t(e);\n      })).then(s, a);\n    }\n\n    u((n = n.apply(t, e || [])).next());\n  });\n}\n\nfunction dt(t, e) {\n  var r,\n      n,\n      i,\n      o,\n      s = {\n    label: 0,\n    sent: function sent() {\n      if (1 & i[0]) throw i[1];\n      return i[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return o = {\n    next: a(0),\n    \"throw\": a(1),\n    \"return\": a(2)\n  }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n    return this;\n  }), o;\n\n  function a(o) {\n    return function (a) {\n      return function (o) {\n        if (r) throw new TypeError(\"Generator is already executing.\");\n\n        for (; s;) {\n          try {\n            if (r = 1, n && (i = 2 & o[0] ? n[\"return\"] : o[0] ? n[\"throw\"] || ((i = n[\"return\"]) && i.call(n), 0) : n.next) && !(i = i.call(n, o[1])).done) return i;\n\n            switch (n = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n              case 0:\n              case 1:\n                i = o;\n                break;\n\n              case 4:\n                return s.label++, {\n                  value: o[1],\n                  done: !1\n                };\n\n              case 5:\n                s.label++, n = o[1], o = [0];\n                continue;\n\n              case 7:\n                o = s.ops.pop(), s.trys.pop();\n                continue;\n\n              default:\n                if (!((i = (i = s.trys).length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                  s = 0;\n                  continue;\n                }\n\n                if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                  s.label = o[1];\n                  break;\n                }\n\n                if (6 === o[0] && s.label < i[1]) {\n                  s.label = i[1], i = o;\n                  break;\n                }\n\n                if (i && s.label < i[2]) {\n                  s.label = i[2], s.ops.push(o);\n                  break;\n                }\n\n                i[2] && s.ops.pop(), s.trys.pop();\n                continue;\n            }\n\n            o = e.call(t, s);\n          } catch (t) {\n            o = [6, t], n = 0;\n          } finally {\n            r = i = 0;\n          }\n        }\n\n        if (5 & o[0]) throw o[1];\n        return {\n          value: o[0] ? o[1] : void 0,\n          done: !0\n        };\n      }([o, a]);\n    };\n  }\n}\n\nfunction ft() {\n  for (var t = 0, e = 0, r = arguments.length; e < r; e++) {\n    t += arguments[e].length;\n  }\n\n  var n = Array(t),\n      i = 0;\n\n  for (e = 0; e < r; e++) {\n    for (var o = arguments[e], s = 0, a = o.length; s < a; s++, i++) {\n      n[i] = o[s];\n    }\n  }\n\n  return n;\n}\n\nvar yt,\n    gt = [0, 0, 0, 0],\n    vt = function () {\n  function t() {\n    this._position = 0, this._wait = 50, this.update = this.update.bind(this);\n  }\n\n  return Object.defineProperty(t.prototype, \"wait\", {\n    get: function get() {\n      return this._wait;\n    },\n    set: function set(t) {\n      this._wait = t, this._isPlaying && this.start();\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"isPlaying\", {\n    get: function get() {\n      return this._isPlaying;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"position\", {\n    get: function get() {\n      if (!this.isPlaying) return this._position;\n      var t = this.basePosition.position + (Date.now() - this.basePosition.time);\n      return Math.min(t, this.player.video.duration);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.initialize = function (t) {\n    var e = t.player,\n        r = t.updater,\n        n = t.emitter;\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (t) {\n        return this.player = e, this.updateMediaPosition = r, this.emitter = n, [2];\n      });\n    });\n  }, t.prototype.play = function () {\n    this.start(), this.emitter.onPlay();\n  }, t.prototype.stop = function () {\n    this.clearInterval(), this._isPlaying = !1, this.seek(0), this.pause(), this.emitter.onStop();\n  }, t.prototype.pause = function () {\n    this.clearInterval(), this._isPlaying = !1, this.emitter.onPause();\n  }, t.prototype.seek = function (t) {\n    var e = this;\n    this._position = t, this.updateMediaPosition(t).then(function () {\n      e.emitter.onSeek(t);\n    }), this.isPlaying && this.start();\n  }, t.prototype.dispose = function () {\n    this.clearInterval();\n  }, t.prototype.clearInterval = function () {\n    window.clearInterval(this.intervalId);\n  }, t.prototype.start = function () {\n    this.clearInterval(), this._isPlaying = !0, this.basePosition = {\n      time: Date.now(),\n      position: this._position\n    }, this.intervalId = window.setInterval(this.update, this.wait);\n  }, t.prototype.update = function () {\n    this.player.video || this.stop();\n    var t = this.basePosition.position + (Date.now() - this.basePosition.time);\n    this._position = Math.min(t, this.player.video.duration), this.updateMediaPosition(this.position), this._position >= this.player.video.duration && this.stop();\n  }, t;\n}();\n\nfunction mt() {\n  return ht(this, void 0, void 0, function () {\n    return dt(this, function (t) {\n      return yt && yt.Player ? [2, yt] : \"undefined\" == typeof window ? [2, __webpack_require__.e(/*! import() */ 0).then(__webpack_require__.t.bind(null, /*! songle-api */ \"./node_modules/songle-api/lib/main.js\", 7))] : window.Songle && window.Songle.Player ? [2, window.Songle] : [2, new Promise(function (t) {\n        var e = !1;\n        window.onSongleAPIReady = function (r) {\n          e = !0, t(yt = r);\n        }, setTimeout(function () {\n          if (!e) {\n            var t = [];\n            document.querySelectorAll(\"script\").forEach(function (e) {\n              var r = e.getAttribute(\"src\");\n              r && r.indexOf(\"songle.jp/v2/api.js\") >= 0 && t.push(e);\n            }), t.forEach(function (t) {\n              return t.parentElement.removeChild(t);\n            });\n            var r = document.createElement(\"script\");\n            r.src = \"//api.songle.jp/v2/api.js\", document.head.appendChild(r);\n          }\n        }, 1e3);\n      })];\n    });\n  });\n}\n\nvar bt = function () {\n  function t(t) {\n    void 0 === t && (t = {}), this.options = t, this.wait = 50, this.lastPosition = 0, this.lastTime = 0, this.elapsedTimes = [];\n  }\n\n  return Object.defineProperty(t.prototype, \"songlePlayer\", {\n    get: function get() {\n      return this._songlePlayer;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"isPlaying\", {\n    get: function get() {\n      return !!this._songlePlayer && this._songlePlayer.isPlaying;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"position\", {\n    get: function get() {\n      if (!this._songlePlayer) return 0;\n      if (!this.handler) return this.lastPosition;\n      var t = this.lastTime,\n          e = this.lastPosition,\n          r = Date.now() - t;\n      return e > 0 ? e + r : this._songlePlayer.positionTime;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.initialize = function (t) {\n    var e = t.player,\n        r = t.updater,\n        n = t.emitter,\n        i = t.altSourceUrl;\n    return ht(this, void 0, void 0, function () {\n      var t, o, s;\n      return dt(this, function (a) {\n        switch (a.label) {\n          case 0:\n            return this.player = e, this.updateMediaPosition = r, this.emitter = n, this._songlePlayer ? [3, 2] : [4, this.initializeSonglePlayer()];\n\n          case 1:\n            a.sent(), a.label = 2;\n\n          case 2:\n            return t = this.player.data.song.permalink, o = this.options.headless, s = i || (this.options.altSourceUrls || {})[t], [4, this._songlePlayer.useMedia(t, {\n              headless: o,\n              altSourceUrl: s\n            })];\n\n          case 3:\n            return a.sent(), this._songlePlayer.play(), this._songlePlayer.stop(), [2];\n        }\n      });\n    });\n  }, t.prototype.initializeSonglePlayer = function () {\n    var t;\n    return ht(this, void 0, void 0, function () {\n      var e,\n          r,\n          n,\n          i,\n          o,\n          s,\n          a = this;\n      return dt(this, function (u) {\n        switch (u.label) {\n          case 0:\n            return e = this.options, r = e.accessToken, n = e.secretToken, [4, mt()];\n\n          case 1:\n            return (i = u.sent()).System && (i.System.showLicense = !1), o = r || n, s = null === (t = this.options) || void 0 === t ? void 0 : t.autoUseMedia, this._songlePlayer = o ? new i.SyncPlayer({\n              mediaElement: this.player.mediaElement,\n              accessToken: r,\n              secretToken: n,\n              autoUseMedia: s\n            }) : new i.Player({\n              mediaElement: this.player.mediaElement\n            }), this._songlePlayer.on(\"play\", function () {\n              a.handler || (a.startPolling(), a.emitter.onPlay());\n            }), this._songlePlayer.on(\"pause\", function () {\n              a.stopPolling(), a.emitter.onPause(), a.stopping && (a.stopping = !1, a.emitter.onStop());\n            }), this._songlePlayer.on(\"finish\", function () {\n              a.handler && (a.stopPolling(), a.emitter.onStop());\n            }), this._songlePlayer.on(\"seek\", function () {\n              a.updateMediaPosition(a._songlePlayer.positionTime);\n            }), o && (this._songlePlayer.on(\"mediaPlay\", function () {\n              a.handler || (a.startPolling(), a.emitter.onPlay());\n            }), this._songlePlayer.on(\"mediaFinish\", function () {\n              a.handler && (a.stopPolling(), a.emitter.onStop());\n            })), [2];\n        }\n      });\n    });\n  }, t.prototype.play = function () {\n    if (this._songlePlayer) return this._songlePlayer.play();\n    this.emitter.onPlay();\n  }, t.prototype.stop = function () {\n    if (this._songlePlayer) return this.stopping = this._songlePlayer.isPlaying, this._songlePlayer.stop();\n    this.emitter.onStop();\n  }, t.prototype.pause = function () {\n    if (this._songlePlayer) return this.stopping = !1, this._songlePlayer.pause();\n    this.emitter.onPause();\n  }, t.prototype.seek = function (t) {\n    var e = this;\n    this._songlePlayer ? (this._songlePlayer.seekTo(t), this.emitter.onSeek(t)) : this.updateMediaPosition(t).then(function () {\n      e.emitter.onSeek(t);\n    });\n  }, t.prototype.startPolling = function () {\n    var t,\n        e = this;\n\n    if (this.lastTime > 0) {\n      var r = Date.now() - this.lastTime;\n      t = Math.max(0, this.wait - r);\n    } else t = this.wait;\n\n    this.handler = setTimeout(function () {\n      return ht(e, void 0, void 0, function () {\n        var e, r, n, i, o, s;\n        return dt(this, function (a) {\n          switch (a.label) {\n            case 0:\n              return r = (e = this).lastTime, n = e.lastPosition, i = r > 0 ? Date.now() - r : t, o = n > 0 ? n + i : this._songlePlayer.positionTime, Math.abs(this._songlePlayer.positionTime - o) > 2 * this.wait ? this.lastPosition = this._songlePlayer.positionTime : this.lastPosition <= this._songlePlayer.positionTime && (this.lastPosition = .8 * o + .2 * this._songlePlayer.positionTime), this.lastTime = Date.now(), this.elapsedTimes.unshift(i), this.elapsedTimes = this.elapsedTimes.slice(0, 10), this.elapsedTimes.length >= 10 && ((s = this.elapsedTimes.reduce(function (t, e) {\n                return t + e;\n              }) / 10) > 5 * this.wait && (this.player.stageScale = Math.max(.25, .9 * this.player.stageScale), this.elapsedTimes = []), s < 1.2 * this.wait && this.player.stageScale < 1 && (this.player.stageScale = Math.min(1, this.player.stageScale / .9), this.elapsedTimes = [])), [4, this.updateMediaPosition(o)];\n\n            case 1:\n              return a.sent(), this.handler && this.startPolling(), [2];\n          }\n        });\n      });\n    }, t);\n  }, t.prototype.stopPolling = function () {\n    this.handler && (clearTimeout(this.handler), this.lastTime = 0, this._songlePlayer && (this.lastPosition = this._songlePlayer.positionTime)), this.handler = null;\n  }, t.prototype.dispose = function () {\n    this._songlePlayer && (this._songlePlayer.stop(), this._songlePlayer = null);\n  }, t;\n}(),\n    _t = function () {\n  function t(t) {\n    this.listeners = [], this.throttleInterval = t && t.throttleInterval ? Number(t.throttleInterval) : 100;\n  }\n\n  return t.prototype.onVideoLoad = function (t, e) {\n    this.listeners.forEach(function (r) {\n      return r.onVideoLoad && r.onVideoLoad(t, e);\n    });\n  }, t.prototype.onSongLoad = function (t, e) {\n    this.listeners.forEach(function (r) {\n      return r.onSongLoad && r.onSongLoad(t, e);\n    });\n  }, t.prototype.onSongMapLoad = function (t, e) {\n    this.listeners.forEach(function (r) {\n      return r.onSongMapLoad && r.onSongMapLoad(t, e);\n    });\n  }, t.prototype.onSongInfoLoad = function (t, e) {\n    var r = !1;\n    this.listeners.forEach(function (n) {\n      n.onSongInfoLoad && (n.onSongInfoLoad(t, e), r = !0);\n    }), r && console.warn('[TextAlive API] \"onSongInfoLoad\" event is deprecated; use \"onSongMapLoad\" event instead');\n  }, t.prototype.onVocalAmplitudeLoad = function (t, e) {\n    this.listeners.forEach(function (r) {\n      return r.onVocalAmplitudeLoad && r.onVocalAmplitudeLoad(t, e);\n    });\n  }, t.prototype.onValenceArousalLoad = function (t, e) {\n    this.listeners.forEach(function (r) {\n      return r.onValenceArousalLoad && r.onValenceArousalLoad(t, e);\n    });\n  }, t.prototype.onLyricsLoad = function (t, e) {\n    this.listeners.forEach(function (r) {\n      return r.onLyricsLoad && r.onLyricsLoad(t, e);\n    });\n  }, t.prototype.onTextLoad = function (t, e) {\n    this.listeners.forEach(function (r) {\n      return r.onTextLoad && r.onTextLoad(t, e);\n    });\n  }, t.prototype.onAppReady = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onAppReady && e.onAppReady(t);\n    });\n  }, t.prototype.onAppParameterUpdate = function (t, e) {\n    this.listeners.forEach(function (r) {\n      return r.onAppParameterUpdate && r.onAppParameterUpdate(t, e);\n    });\n  }, t.prototype.onAppMediaChange = function (t, e) {\n    this.listeners.forEach(function (r) {\n      return r.onAppMediaChange && r.onAppMediaChange(t, e);\n    });\n  }, t.prototype.onTemplateUpdate = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onTemplateUpdate && e.onTemplateUpdate(t);\n    });\n  }, t.prototype.onTemplateCommit = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onTemplateCommit && e.onTemplateCommit(t);\n    });\n  }, t.prototype.onTemplatesLoad = function (t, e) {\n    this.listeners.forEach(function (r) {\n      return r.onTemplatesLoad && r.onTemplatesLoad(t, e);\n    });\n  }, t.prototype.onFontsLoad = function (t, e) {\n    this.listeners.forEach(function (r) {\n      return r.onFontsLoad && r.onFontsLoad(t, e);\n    });\n  }, t.prototype.onVideoReady = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onVideoReady && e.onVideoReady(t);\n    });\n  }, t.prototype.onTimerReady = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onTimerReady && e.onTimerReady(t);\n    });\n  }, t.prototype.onStageElementSet = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onStageElementSet && e.onStageElementSet(t);\n    });\n  }, t.prototype.onMediaElementSet = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onMediaElementSet && e.onMediaElementSet(t);\n    });\n  }, t.prototype.onTimeUpdate = function (t) {\n    var e = this;\n    this.listeners.forEach(function (e) {\n      return e.onTimeUpdate && e.onTimeUpdate(t);\n    }), this.position = t, this.throttledTimeUpdate || (this.throttledTimeUpdate = new Promise(function (t, r) {\n      setTimeout(function () {\n        e.onThrottledTimeUpdate(e.position), e.throttledTimeUpdate = null, t();\n      }, e.throttleInterval);\n    }));\n  }, t.prototype.onThrottledTimeUpdate = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onThrottledTimeUpdate && e.onThrottledTimeUpdate(t);\n    });\n  }, t.prototype.onBackgroundGraphicsUpdate = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onBackgroundGraphicsUpdate && e.onBackgroundGraphicsUpdate(t);\n    });\n  }, t.prototype.onMediaSeek = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onMediaSeek && e.onMediaSeek(t);\n    });\n  }, t.prototype.onVideoSeekStart = function () {\n    this.listeners.forEach(function (t) {\n      return t.onVideoSeekStart && t.onVideoSeekStart();\n    });\n  }, t.prototype.onVideoSeekEnd = function () {\n    this.listeners.forEach(function (t) {\n      return t.onVideoSeekEnd && t.onVideoSeekEnd();\n    });\n  }, t.prototype.onVideoSeek = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onVideoSeek && e.onVideoSeek(t);\n    });\n  }, t.prototype.onPlay = function () {\n    this.listeners.forEach(function (t) {\n      return t.onPlay && t.onPlay();\n    });\n  }, t.prototype.onPause = function () {\n    this.listeners.forEach(function (t) {\n      return t.onPause && t.onPause();\n    });\n  }, t.prototype.onSeek = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onSeek && e.onSeek(t);\n    });\n  }, t.prototype.onStop = function () {\n    this.listeners.forEach(function (t) {\n      return t.onStop && t.onStop();\n    });\n  }, t.prototype.onDispose = function () {\n    this.listeners.forEach(function (t) {\n      return t.onDispose && t.onDispose();\n    });\n  }, t.prototype.onResize = function (t) {\n    this.listeners.forEach(function (e) {\n      return e.onResize && e.onResize(t);\n    });\n  }, t.prototype.addListener = function (t) {\n    !t || this.listeners.indexOf(t) >= 0 || this.listeners.push(t);\n  }, t.prototype.removeListener = function (t) {\n    var e = !1;\n    return this.listeners = this.listeners.filter(function (r) {\n      var n = r === t;\n      return e = e || n, !n;\n    }), e;\n  }, t;\n}(),\n    wt = function () {\n  function t(t, e, r) {\n    var n = this;\n    this.player = t, this.manager = e, this.emitter = r, this._defaultBackgroundCss = null, this._background = null, t.addListener({\n      onStageElementSet: function onStageElementSet(t) {\n        return n.doUpdateBackground(n.background);\n      }\n    });\n  }\n\n  return Object.defineProperty(t.prototype, \"background\", {\n    get: function get() {\n      return this._background;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"defaultBackgroundCss\", {\n    get: function get() {\n      return this._defaultBackgroundCss ? this._defaultBackgroundCss : \"\";\n    },\n    set: function set(t) {\n      this._defaultBackgroundCss = t, this.updateBackground(this._background);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"ready\", {\n    get: function get() {\n      return null !== this._background;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.settingBackground = function (t) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (e) {\n        switch (e.label) {\n          case 0:\n            return [4, this.doSetBackground(t)];\n\n          case 1:\n            return [2, e.sent() && this.doUpdateBackground(t)];\n        }\n      });\n    });\n  }, t.prototype.setBackground = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e;\n      return dt(this, function (r) {\n        switch (r.label) {\n          case 0:\n            return [4, this.doSetBackground(t)];\n\n          case 1:\n            return [2, (e = r.sent()) && this.updateBackground(e)];\n        }\n      });\n    });\n  }, t.prototype.doSetBackground = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e, r, n;\n      return dt(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return e = t && t.originalUrl ? t.originalUrl : \"\", this.manager.isBackgroundColorAsset(t) ? [2, {\n              css: e,\n              originalUrl: e\n            }] : this.manager.isBackgroundPiaproImageAsset(t) ? [4, this.manager.read(e)] : [3, 2];\n\n          case 1:\n            return (r = i.sent()) && r.url && this.manager.checkBackgroundImageLicense(r.license) ? (r.originalUrl = e, t && (r.x = t.x, r.y = t.y), [2, r]) : [2, {\n              css: \"\",\n              originalUrl: e,\n              x: t ? t.x : void 0,\n              y: t ? t.y : void 0,\n              license: r ? r.license : void 0\n            }];\n\n          case 2:\n            return this.manager.isBackgroundSpecialImageAsset(t) ? [2, {\n              css: 'url(\"//api.textalive.jp/images/backgrounds/snowmiku2016/' + (n = /^snowmiku2016-([0-9]{2})$/.exec(e))[1] + '.jpg\")',\n              contentUrl: \"//api.textalive.jp/images/backgrounds/snowmiku2016/\" + n[1] + \".jpg\",\n              url: \"http://snowmiku.com/2016/info_chara.html\",\n              name: \"SNOW MIKU 2016\",\n              authorName: \"豆の素\",\n              originalUrl: e,\n              x: t ? t.x : void 0,\n              y: t ? t.y : void 0,\n              defaultY: 0\n            }] : [2, {\n              originalUrl: null,\n              css: \"\",\n              x: t ? t.x : void 0,\n              y: t ? t.y : void 0\n            }];\n        }\n      });\n    });\n  }, t.prototype.updateBackground = function (t) {\n    return !!this.doUpdateBackground(t) && (this.emitter && this.emitter.onBackgroundGraphicsUpdate && this.emitter.onBackgroundGraphicsUpdate(t), !0);\n  }, t.prototype.doUpdateBackground = function (t) {\n    if (!this.player.stageElement || !t) return !1;\n    var e = this.player.stageElement.style;\n    return t.css.length <= 0 ? e.background = this.defaultBackgroundCss : e.background = t.css, \"number\" == typeof t.x || this._background && \"number\" == typeof this._background.x ? (\"number\" != typeof t.x && (t.x = this._background.x), e.backgroundPositionX = e.backgroundPositionX + \"%\") : e.backgroundPositionX = \"number\" == typeof t.defaultX ? t.defaultX + \"%\" : \"center\", \"number\" == typeof t.y || this._background && \"number\" == typeof this._background.y ? (\"number\" != typeof t.y && (t.y = this._background.y), e.backgroundPositionY = e.backgroundPositionY + \"%\") : e.backgroundPositionY = \"number\" == typeof t.defaultY ? t.defaultY + \"%\" : \"center\", e.backgroundSize = \"cover\", this._background = t, !0;\n  }, t.prototype[\"export\"] = function () {\n    if (!this.background) return null;\n    var t = {\n      originalUrl: this.background.originalUrl\n    };\n    return void 0 !== this.background.x && (t.x = this.background.x), void 0 !== this.background.y && (t.y = this.background.y), t;\n  }, t.prototype.exportPartialVideoEntry = function (t) {\n    return {\n      background: this[\"export\"]()\n    };\n  }, t;\n}(),\n    Pt = function () {\n  function t(t, e) {\n    this.managers = t, this.listener = e, this.listener = e;\n  }\n\n  return Object.defineProperty(t.prototype, \"video\", {\n    get: function get() {\n      return this._video;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"data\", {\n    get: function get() {\n      return this._video.json;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.onVideoLoad = function (t, e) {\n    var r = t ? Object.assign(t, e) : null;\n    return r && (\"string\" == typeof r.json ? r.json = JSON.parse(r.json) : \"object\" == _typeof(r.json) && null !== r.json || (r.json = {}), \"string\" == typeof r.config ? r.config = JSON.parse(r.config) : \"object\" == _typeof(r.config) && null !== r.config || (r.config = {})), this._video = r, this.listener && this.listener.onVideoLoad && this.listener.onVideoLoad(r), r;\n  }, t.prototype.createFromVideoId = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, this.managers.video.load(t)];\n\n          case 1:\n            return r = n.sent(), [2, this.onVideoLoad(r, e)];\n        }\n      });\n    });\n  }, t.prototype.createFromVideo = function (t, e) {\n    return this.onVideoLoad(t, e);\n  }, t.prototype.createFromSongUrl = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (r) {\n        return [2, this.createFromSongPath(this.managers.song.getSongPathFromUrl(t), e)];\n      });\n    });\n  }, t.prototype.createFromSongPath = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, this.managers.song.load({\n              songPath: t\n            })];\n\n          case 1:\n            return (r = n.sent()) ? [2, this.createFromSong(r.song, e)] : [2, null];\n        }\n      });\n    });\n  }, t.prototype.createFromSongId = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, this.managers.song.load({\n              id: t\n            })];\n\n          case 1:\n            return (r = n.sent()) ? [2, this.createFromSong(r.song, e)] : [2, null];\n        }\n      });\n    });\n  }, t.prototype.createFromSongCode = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, this.managers.song.load({\n              code: t\n            })];\n\n          case 1:\n            return (r = n.sent()) ? [2, this.createFromSong(r.song, e)] : [2, null];\n        }\n      });\n    });\n  }, t.prototype.createFromSong = function (t, e) {\n    var r;\n    return ht(this, void 0, void 0, function () {\n      var n, i, o, s, a, u;\n      return dt(this, function (c) {\n        switch (c.label) {\n          case 0:\n            return n = null == e ? void 0 : e.lyricId, i = null == e ? void 0 : e.lyricDiffId, \"number\" != typeof n || n < 0 ? [4, this.managers.lyrics.load(t.code)] : [3, 4];\n\n          case 1:\n            return o = c.sent(), (a = o && !o.status.failed && !o.status.processing && Array.isArray(o.lyrics) && o.lyrics.length > 0) ? [4, this.managers.lyrics.loadDetail(t.code, o.lyrics[0].id)] : [3, 3];\n\n          case 2:\n            a = c.sent(), c.label = 3;\n\n          case 3:\n            (s = a) && (n = s.id, i = null === (r = s.diff) || void 0 === r ? void 0 : r.id), c.label = 4;\n\n          case 4:\n            return \"number\" != typeof n && (n = -1), \"number\" != typeof i && (i = -1), u = {\n              id: -1,\n              sourceId: -1,\n              sourceOriginId: -1,\n              songleId: t.id,\n              songleCode: t.code,\n              lyricId: n,\n              lyricDiffId: i,\n              title: null,\n              log: null,\n              background: null,\n              config: null,\n              json: null,\n              synthJson: null,\n              author: null,\n              createdDate: null,\n              accessCount: -1,\n              altUrl: null\n            }, [2, this.onVideoLoad(u, e)];\n        }\n      });\n    });\n  }, t.prototype.createFromText = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r, n, i, o, s, a;\n      return dt(this, function (u) {\n        switch (u.label) {\n          case 0:\n            return [4, this.managers.text.parse(t)];\n\n          case 1:\n            return r = u.sent(), n = r && \"success\" === r.status ? this.createVideoDataFromParsedText(r, t) : this.createVideoDataFromText(t), i = n[n.length - 1], o = i && i.words[i.words.length - 1], s = o && o.characters[o.characters.length - 1], a = s ? s.endTime : 0, [2, this.createFromJSON({\n              phrases: n,\n              startTime: 0,\n              endTime: a,\n              duration: a\n            }, e)];\n        }\n      });\n    });\n  }, t.prototype.createFromJSON = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        return r = {\n          id: -1,\n          sourceId: -1,\n          sourceOriginId: -1,\n          songleId: -1,\n          lyricId: -1,\n          lyricDiffId: -1,\n          title: null,\n          log: null,\n          background: null,\n          config: null,\n          json: t,\n          synthJson: null,\n          author: null,\n          createdDate: null,\n          accessCount: -1,\n          altUrl: null\n        }, [2, this.onVideoLoad(r, e)];\n      });\n    });\n  }, t.prototype.createVideoDataFromParsedText = function (t, e) {\n    var r = 0,\n        n = e.split(/\\r\\n|[\\n\\v\\f\\r\\x85\\u2028\\u2029]/);\n    return t.result.map(function (t, e) {\n      return {\n        words: t.map(function (t) {\n          return {\n            characters: n[e].substr(t.startPosition, t.wordLength).split(\"\").map(function (t) {\n              return {\n                \"char\": t,\n                startTime: 300 * r,\n                endTime: 300 * ++r\n              };\n            }),\n            pos: t.PoS,\n            rawPoS: t.rawPoS,\n            language: t.language\n          };\n        }),\n        templates: [{\n          type: \"DefaultAlignment\"\n        }]\n      };\n    });\n  }, t.prototype.createVideoDataFromText = function (t) {\n    for (var e, r = {\n      characters: []\n    }, n = {\n      words: [r],\n      templates: [{\n        type: \"DefaultAlignment\"\n      }]\n    }, i = 0, o = [n], s = 0; s < t.length; s++) {\n      var a = t.charAt(s);\n      \"\\n\" !== a ? \" \" !== a ? (e = {\n        \"char\": a,\n        startTime: 300 * i,\n        endTime: 300 * ++i\n      }, r.characters.push(e)) : (r = {\n        characters: []\n      }, n.words.push(r)) : (n = {\n        words: [r = {\n          characters: []\n        }],\n        templates: [{\n          type: \"DefaultAlignment\"\n        }]\n      }, o.push(n));\n    }\n\n    return r.characters.length <= 0 && n.words.pop(), n.words.length <= 0 && o.pop(), o;\n  }, t;\n}(),\n    Et = function () {\n  function t() {}\n\n  return Object.defineProperty(t.prototype, \"duration\", {\n    get: function get() {\n      return this.endTime - this.startTime;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.contains = function (t) {\n    return t >= this.startTime && t <= this.endTime;\n  }, t.prototype.overlaps = function (t, e) {\n    return this.contains(t) || this.contains(e) || this.startTime <= t && this.endTime >= e;\n  }, t.prototype.progress = function (t) {\n    return this.contains(t) ? this.startTime === this.endTime ? 0 : (t - this.startTime) / (this.endTime - this.startTime) : -1;\n  }, t;\n}(),\n    Ot = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    return e.previous = e.next = null, e;\n  }\n\n  return lt(e, t), Object.defineProperty(e.prototype, \"endTime\", {\n    get: function get() {\n      return this.next ? this.next.startTime : this.startTime;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), e;\n}(Et),\n    Tt = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    return e.previous = e.next = null, e;\n  }\n\n  return lt(e, t), e;\n}(Et),\n    St = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    return e.previous = e.next = null, e;\n  }\n\n  return lt(e, t), e;\n}(Et),\n    Rt = function (t) {\n  function e() {\n    var e = t.call(this) || this;\n    return e.previous = e.next = null, e;\n  }\n\n  return lt(e, t), e;\n}(Et),\n    xt = function () {\n  function t(t) {\n    var e = t.analysis,\n        r = t.info;\n    this.beats = [], this.chords = [], this.segments = [], this.voice = [], this._revisions = {\n      beatId: r.beatRevisionId,\n      chordId: r.chordRevisionId,\n      repetitiveSegmentId: r.chorusRevisionId\n    }, this.parseBeats(e.beats), this.parseSegments(e.repetitive_segment), this.parseChords(e.chords), e.voice && this.parseVoice(e.voice);\n  }\n\n  return Object.defineProperty(t.prototype, \"revisions\", {\n    get: function get() {\n      return this._revisions;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.parseBeats = function (t) {\n    var e = this;\n\n    if (Array.isArray(t) && Array.isArray(t[0])) {\n      var r = null,\n          n = 0;\n      t[0].forEach(function (t) {\n        var i = new Ot();\n        i.startTime = 1e3 * t[0], i.length = t[2], i.position = t[3], i.previous = r, null !== r && (r.next = i), i.index = n++, e.beats.push(i), r = i;\n      }), null !== r && (r.next = null);\n    }\n  }, t.prototype.parseChords = function (t) {\n    var e = this;\n\n    if (Array.isArray(t)) {\n      var r = null,\n          n = 0;\n      t.forEach(function (t) {\n        var i = new Tt();\n        i.startTime = 1e3 * t[0], i.endTime = 1e3 * t[1], i.name = t[2], i.previous = r, null !== r && (r.next = i), i.index = n++, e.chords.push(i), r = i;\n      }), null !== r && (r.next = null);\n    }\n  }, t.prototype.parseSegments = function (t) {\n    var e = this;\n    Array.isArray(t) && t.forEach(function (t) {\n      var r = {\n        chorus: !!t.chorus,\n        duration: 10 * t.segment_length,\n        segments: null\n      },\n          n = null,\n          i = 0;\n      r.segments = t.start_frames.map(function (t) {\n        var e = new St();\n        return e.startTime = 10 * t, e.endTime = e.startTime + r.duration, e.previous = n, null !== n && (n.next = e), e.index = i++, n = e, e;\n      }), null !== n && (n.next = null), e.segments.push(r);\n    });\n  }, t.prototype.parseVoice = function (t) {\n    var e = this;\n    Array.isArray(t) && t.forEach(function (t) {\n      var r = [],\n          n = null,\n          i = 0,\n          o = 0;\n      t.forEach(function (t) {\n        var e = new Rt();\n        e.startTime = o, e.endTime = e.startTime + 10 * t[1], e.f0 = t[0][0], e.initialF0 = t[0][1], e.previous = n, null !== n && (n.next = e), e.index = i++, r.push(e), n = e, o = e.endTime;\n      }), null !== n && (n.next = null), e.voice.push(r);\n    });\n  }, t;\n}(),\n    At = function () {\n  function t(t, e, r) {\n    this.manager = t, this.options = r, this.listener = e;\n  }\n\n  return Object.defineProperty(t.prototype, \"song\", {\n    get: function get() {\n      return this._song;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"info\", {\n    get: function get() {\n      return this._info;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"analysis\", {\n    get: function get() {\n      return this._analysis;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"vocalAmplitude\", {\n    get: function get() {\n      return this._vocalAmplitude;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"maxVocalAmplitude\", {\n    get: function get() {\n      return this._maxVocalAmplitude;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"valenceArousal\", {\n    get: function get() {\n      return this._valenceArousal;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.loadSong = function (t, e) {\n    var r, n, i;\n    return ht(this, void 0, void 0, function () {\n      var o, s;\n      return dt(this, function (a) {\n        switch (a.label) {\n          case 0:\n            return \"number\" == typeof t && t < 0 || !t ? (this.onSongLoad(null, new Error(\"Neither Songle ID or code provided\")), [2, null]) : [4, this.manager.load(\"number\" == typeof t ? {\n              id: t\n            } : {\n              code: t\n            })];\n\n          case 1:\n            return o = a.sent(), this.onSongLoad(o, o ? void 0 : new Error(\"Song data not found\")), o ? (s = {\n              chord: null == e ? void 0 : e.chordId,\n              beat: null == e ? void 0 : e.beatId,\n              chorus: null == e ? void 0 : e.repetitiveSegmentId\n            }, [4, Promise.all([(null === (r = this.options) || void 0 === r ? void 0 : r.vocalFrequencyEnabled) ? this.loadSongDetailInfo(o.song.code, {\n              revisions: s\n            }) : this.loadSongInfo(o.song.code, {\n              revisions: s\n            }), (null === (n = this.options) || void 0 === n ? void 0 : n.vocalAmplitudeEnabled) ? this.loadVocalAmplitude(o.song.code) : Promise.resolve(null), (null === (i = this.options) || void 0 === i ? void 0 : i.valenceArousalEnabled) ? this.loadValenceArousal(o.song.code) : Promise.resolve(null)])]) : [2, null];\n\n          case 2:\n            return a.sent(), [2, o];\n        }\n      });\n    });\n  }, t.prototype.onSongLoad = function (t, e) {\n    this._song = t, this.listener && this.listener.onSongLoad && this.listener.onSongLoad(t, e);\n  }, t.prototype.loadSongInfo = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, this.manager.loadInfo(String(t), e)];\n\n          case 1:\n            return r = n.sent(), this.onSongMapLoad(r, r ? void 0 : new Error(\"Song analysis data not found\")), [2, r];\n        }\n      });\n    });\n  }, t.prototype.loadSongDetailInfo = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, this.manager.loadDetailInfo(String(t), e)];\n\n          case 1:\n            return r = n.sent(), this.onSongMapLoad(r, r ? void 0 : new Error(\"Song analysis data not found\")), [2, r];\n        }\n      });\n    });\n  }, t.prototype.mockSongInfo = function (t) {\n    var e = function (t) {\n      for (var e = t.beat, r = t.chorusSegment, n = t.duration, i = [], o = 0; 60 * o / e.bpm < n / 1e3;) {\n        i.push([60 * o / e.bpm, 1, e.length, o % e.length + 1, 1]), o++;\n      }\n\n      return {\n        beats: [i],\n        chords: null,\n        repetitive_segment: [{\n          chorus: !0,\n          index: 0,\n          segment_length: r.duration / 10,\n          start_frames: r.startTimes.map(function (t) {\n            return t / 10;\n          })\n        }],\n        voice: null\n      };\n    }(t);\n\n    this._song = null, this.onSongMapLoad({\n      analysis: e,\n      info: null\n    });\n  }, t.prototype.onSongMapLoad = function (t, e) {\n    var r, n;\n    this._info = t, this._analysis = new xt(this._info), (null === (r = this.listener) || void 0 === r ? void 0 : r.onSongMapLoad) && this.listener.onSongMapLoad(this._analysis, e), (null === (n = this.listener) || void 0 === n ? void 0 : n.onSongInfoLoad) && this.listener.onSongInfoLoad(t, e);\n  }, t.prototype.loadVocalAmplitude = function (t) {\n    var e;\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return r = this, [4, this.manager.loadVocalAmplitude(String(t))];\n\n          case 1:\n            return r._vocalAmplitude = n.sent(), this._maxVocalAmplitude = Math.max.apply(Math, this._vocalAmplitude), (null === (e = this.listener) || void 0 === e ? void 0 : e.onVocalAmplitudeLoad) && this.listener.onVocalAmplitudeLoad(this._vocalAmplitude, this._vocalAmplitude ? void 0 : new Error(\"Vocal amplitude data not found\")), [2, this._vocalAmplitude];\n        }\n      });\n    });\n  }, t.prototype.loadValenceArousal = function (t) {\n    var e;\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return r = this, [4, this.manager.loadValenceArousal(String(t))];\n\n          case 1:\n            return r._valenceArousal = n.sent(), (null === (e = this.listener) || void 0 === e ? void 0 : e.onValenceArousalLoad) && this.listener.onValenceArousalLoad(this._valenceArousal, this._valenceArousal ? void 0 : new Error(\"Valence arousal data not found\")), [2, this._valenceArousal];\n        }\n      });\n    });\n  }, t.prototype.getChoruses = function () {\n    var t;\n    if (!this._analysis) return [];\n\n    var e = this._analysis.segments.filter(function (t) {\n      return t.chorus;\n    });\n\n    return e.length <= 0 ? [] : (null === (t = e[0].segments) || void 0 === t ? void 0 : t.slice()) || [];\n  }, t.prototype.findChorus = function (t, e) {\n    var r = [];\n\n    if (this._analysis) {\n      var n = this._analysis.segments.filter(function (t) {\n        return t.chorus;\n      });\n\n      if (n.length <= 0) return null;\n      r = n[0].segments;\n    }\n\n    return Q(r, t, e);\n  }, t.prototype.findChorusBetween = function (t, e) {\n    return this.findChorus(t, {\n      endTime: e\n    });\n  }, t.prototype.getBeats = function () {\n    var t;\n    return this._analysis && (null === (t = this._analysis.beats) || void 0 === t ? void 0 : t.slice()) || [];\n  }, t.prototype.findBeat = function (t, e) {\n    return this._analysis ? Q(this._analysis.beats, t, e) : null;\n  }, t.prototype.getChords = function () {\n    var t;\n    return this._analysis && (null === (t = this._analysis.chords) || void 0 === t ? void 0 : t.slice()) || [];\n  }, t.prototype.findChord = function (t, e) {\n    return this._analysis ? Q(this._analysis.chords, t, e) : null;\n  }, t.prototype.getVocalFrequency = function (t) {\n    var e;\n    if (!Array.isArray(null === (e = this._analysis) || void 0 === e ? void 0 : e.voice)) return -1;\n    var r = this._analysis.voice[0];\n    if (r.length <= 0) return -1;\n    var n = Z(r, t, function (t) {\n      return t.endTime;\n    });\n    return r[n].contains(t) ? r[n].f0 : -1;\n  }, t.prototype.getVocalAmplitude = function (t) {\n    var e = this._vocalAmplitude,\n        r = Math.round(t / 10);\n    return !Array.isArray(this._vocalAmplitude) || r < 0 || r >= e.length ? -1 : this._vocalAmplitude[r];\n  }, t.prototype.getMaxVocalAmplitude = function () {\n    return \"number\" == typeof this._maxVocalAmplitude ? this._maxVocalAmplitude : -1;\n  }, t.prototype.getValenceArousal = function (t) {\n    var e = this._valenceArousal;\n    if (!e) return null;\n    var r = Z(e.seq, t, function (t) {\n      return 1e3 * t.t[0];\n    }) - 1;\n    if (r < 0) return null;\n    if (r + 1 >= e.seq.length || t < 1e3 * e.seq[r + 1].t[0]) return {\n      a: e.seq[r].a,\n      v: e.seq[r].v\n    };\n    var n = e.seq[r],\n        i = e.seq[r + 1],\n        o = t / 1e3,\n        s = i.t[0],\n        a = n.t[1],\n        u = a - s;\n    return {\n      a: (n.a * (a - o) + i.a * (o - s)) / u,\n      v: (n.v * (a - o) + i.v * (o - s)) / u\n    };\n  }, t.prototype.getMedianValenceArousal = function () {\n    var t = this._valenceArousal;\n    return t ? t.stats.median : null;\n  }, t;\n}(),\n    Ct = function () {\n  function t(t, e, r) {\n    this.managers = t, this.listener = e, this.options = r, this._lyricsId = -1;\n  }\n\n  return Object.defineProperty(t.prototype, \"lyricsId\", {\n    get: function get() {\n      return this._lyricsId;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"lyrics\", {\n    get: function get() {\n      return this._lyrics;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"text\", {\n    get: function get() {\n      return this._text;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.loadRawText = function (t) {\n    var e;\n    e = !t.phrases || t.phrases.length < 0 ? \"\" : t.phrases.map(function (t) {\n      return t.words.map(function (t) {\n        return t.characters.map(function (t) {\n          return t[\"char\"];\n        }).join(\"\");\n      }).join(\"\");\n    }).join(\"\"), this.onTextLoad(e);\n  }, t.prototype.loadLyrics = function (t) {\n    var e = t.songCode,\n        r = t.lyricId,\n        n = t.lyricDiffId,\n        i = t.altLyricsUrl,\n        o = t.directAccess;\n    return ht(this, void 0, void 0, function () {\n      var t, s;\n      return dt(this, function (a) {\n        switch (a.label) {\n          case 0:\n            return r < 0 ? (this.onLyricsLoad(null, new Error(\"Lyrics not found\")), [2, null]) : [4, this.managers.lyrics.loadDiff(e, r, n)];\n\n          case 1:\n            return (null == (t = a.sent()) ? void 0 : t.data) ? (this._lyricsId = t.id, this.onLyricsLoad(t), (s = !i && !o) ? [4, this.loadLocalLyricsText(t.id)] : [3, 3]) : (this.onLyricsLoad(null, new Error(\"Lyrics timing information not found\")), [2, null]);\n\n          case 2:\n            s = a.sent(), a.label = 3;\n\n          case 3:\n            return s ? [3, 5] : [4, this.loadLyricsText(t, {\n              altLyricsUrl: i,\n              directAccess: o\n            })];\n\n          case 4:\n            a.sent(), a.label = 5;\n\n          case 5:\n            return [2, t];\n        }\n      });\n    });\n  }, t.prototype.onLyricsLoad = function (t, e) {\n    this._lyrics = t, this.listener && this.listener.onLyricsLoad && this.listener.onLyricsLoad(t, e);\n  }, t.prototype.loadLocalLyricsText = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e;\n      return dt(this, function (r) {\n        switch (r.label) {\n          case 0:\n            return [4, this.managers.lyrics.fetchLocalLyricBody(t)];\n\n          case 1:\n            return (e = r.sent()) && this.onTextLoad(e), [2, e];\n        }\n      });\n    });\n  }, t.prototype.loadLyricsText = function (t, e) {\n    var r = void 0 === e ? {} : e,\n        n = r.altLyricsUrl,\n        i = r.directAccess;\n    return ht(this, void 0, void 0, function () {\n      var e,\n          r,\n          o,\n          s,\n          a = this;\n      return dt(this, function (u) {\n        switch (u.label) {\n          case 0:\n            e = this.options && \"number\" == typeof this.options.lyricsFetchTimeout && this.options.lyricsFetchTimeout >= 0, r = this.managers.lyrics.fetchLyricBody(n || t.url, {\n              parserPath: t.parser_path,\n              directAccess: i\n            }), u.label = 1;\n\n          case 1:\n            return u.trys.push([1, 3,, 4]), [4, e ? Promise.race([r, new Promise(function (t, e) {\n              return setTimeout(function () {\n                return e(new Error(\"Fetching lyrics text timeout\"));\n              }, a.options.lyricsFetchTimeout);\n            })]) : r];\n\n          case 2:\n            return o = u.sent(), this.onTextLoad(o), [2, o];\n\n          case 3:\n            return s = u.sent(), this.onTextLoad(null, s), [2, null];\n\n          case 4:\n            return [2];\n        }\n      });\n    });\n  }, t.prototype.onTextLoad = function (t, e) {\n    this._text = t, this.listener && this.listener.onTextLoad && this.listener.onTextLoad(t, e);\n  }, t;\n}();\n\nfunction Nt(t, e, r, n) {\n  return ht(this, void 0, void 0, function () {\n    var i, o, s, a, u, c, l, p, h, d, f, y, g;\n    return dt(this, function (v) {\n      switch (v.label) {\n        case 0:\n          if (i = {\n            loaded: [],\n            failed: []\n          }, \"undefined\" == typeof window || !window.document || !window.document.head) return i.failed = e.slice(), [2, i];\n\n          for (o = n.split(\"\").filter(function (t, e, r) {\n            return r.indexOf(t) === e;\n          }).sort(), s = !0, a = 0, o.forEach(function (t) {\n            var e = r.indexOf(t, a);\n            s = s && e >= 0, a = e;\n          }), u = window.document.head, c = [], l = 0; l < u.children.length; l++) {\n            \"link\" === (p = u.children.item(l)).tagName.toLowerCase() && \"stylesheet\" === p.getAttribute(\"rel\") && c.push(p.getAttribute(\"href\"));\n          }\n\n          h = [], d = [], e.forEach(function (e) {\n            var r = t + \"/\" + (s ? e.key : e.key + \"-all\") + \".css\";\n            c.includes(r) || (d.push(e.en), h.push(r));\n          }), f = {\n            classes: !1,\n            custom: {\n              families: d,\n              urls: h\n            },\n            active: null,\n            inactive: null,\n            fontactive: function fontactive(t) {\n              i.loaded.push(e.find(function (e) {\n                return e.en === t;\n              })), i.failed = i.failed.filter(function (e) {\n                return e.en !== t;\n              });\n            },\n            fontinactive: function fontinactive(t) {\n              i.failed.push(e.find(function (e) {\n                return e.en === t;\n              }));\n            },\n            timeout: 5e3\n          }, v.label = 1;\n\n        case 1:\n          return v.trys.push([1, 5,, 6]), (g = \"undefined\" != typeof window && (null === window || void 0 === window ? void 0 : window.WebFont)) ? [3, 3] : [4, __webpack_require__.e(/*! import() */ 1).then(__webpack_require__.t.bind(null, /*! webfontloader */ \"./node_modules/webfontloader/webfontloader.js\", 7))];\n\n        case 2:\n          g = v.sent(), v.label = 3;\n\n        case 3:\n          return y = g, [4, new Promise(function (t) {\n            f.active = f.inactive = t, y.load(f);\n          })];\n\n        case 4:\n        case 5:\n          return v.sent(), [3, 6];\n\n        case 6:\n          return [2, i];\n      }\n    });\n  });\n}\n\nfunction kt(t, e) {\n  return ht(this, void 0, void 0, function () {\n    var r, n, i, o, s, a, u, c;\n    return dt(this, function (l) {\n      switch (l.label) {\n        case 0:\n          if (r = {\n            loaded: [],\n            failed: []\n          }, !(\"undefined\" != typeof window && window.document && window.document.head && window.Ts && window.Ts.loadFontAsync)) return r.failed = t.slice(), [2, r];\n\n          for (n = window.document.head, i = {}, o = function o(t) {\n            var e = n.children.item(t);\n            if (\"style\" !== e.tagName.toLowerCase() || \"text/css\" !== e.getAttribute(\"type\") || \"stylesheet\" !== e.getAttribute(\"rel\") || !e.hasAttribute(\"data-cssName\")) return \"continue\";\n            var r = e.getAttribute(\"data-cssName\");\n            if (void 0 === i[r]) return i[r] = new Set(e.getAttribute(\"data-text\")), {\n              value: void 0\n            };\n            e.getAttribute(\"data-text\").split(\"\").forEach(function (t) {\n              return i[r].add(t);\n            });\n          }, s = 0; s < n.children.length; s++) {\n            if (\"object\" == _typeof(a = o(s))) return [2, a.value];\n          }\n\n          return u = window.Ts, c = [], t.forEach(function (t) {\n            var n = new Set(e + t.en + t.ja);\n            i[t.en] && i[t.en].forEach(function (t) {\n              return n[\"delete\"](t);\n            }), n.size <= 0 ? r.loaded.push(t) : c.push(new Promise(function (e) {\n              return function (t, e, r, n, i) {\n                var o = e.en;\n                t.loadFontAsync({\n                  cssName: o,\n                  text: n,\n                  outputType: \"json\",\n                  callback: function callback(t) {\n                    try {\n                      !function (t, e, r) {\n                        var n = JSON.parse(r),\n                            i = JSON.parse(n.res),\n                            o = document.createElement(\"style\");\n                        o.setAttribute(\"data-cssName\", t), o.setAttribute(\"data-text\", e), o.setAttribute(\"type\", \"text/css\"), o.setAttribute(\"rel\", \"stylesheet\"), o.innerHTML = \"@font-face {font-family: '\" + i.fontFamily + \"';font-weight: \" + i[\"font-weight\"] + \";src: url(data:font/woff;base64,\" + i.src + \");}\", document.head.appendChild(o);\n                      }(o, n, t.data), r.loaded.push(e);\n                    } catch (t) {\n                      r.failed.push(e);\n                    }\n\n                    i();\n                  }\n                });\n              }(u, t, r, Array.from(n.values()).join(\"\"), e);\n            }));\n          }), [4, Promise.all(c)];\n\n        case 1:\n          return l.sent(), [2, r];\n      }\n    });\n  });\n}\n\nvar It = function (t) {\n  function e(e, r) {\n    var n = this.constructor,\n        i = t.call(this, e) || this;\n    return i.fonts = r, Object.setPrototypeOf(i, n.prototype), i;\n  }\n\n  return lt(e, t), e;\n}(Error),\n    jt = function () {\n  function t(t, e, r) {\n    this.fontInfoManager = t, this.textFetcher = e, this.listener = r, this._failed = [], this._loaded = [];\n  }\n\n  return Object.defineProperty(t.prototype, \"failed\", {\n    get: function get() {\n      return this._failed;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"loaded\", {\n    get: function get() {\n      return this._loaded;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.loadAll = function () {\n    return ht(this, void 0, void 0, function () {\n      var t;\n      return dt(this, function (e) {\n        switch (e.label) {\n          case 0:\n            return [4, this.listAvailableFonts()];\n\n          case 1:\n            return t = e.sent(), [2, this.loadFonts(t)];\n        }\n      });\n    });\n  }, t.prototype.loadForVideo = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e, r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return (e = this.listFontFamiliesInVideo(t)) ? [4, this.listAvailableFonts()] : (this.listener && this.listener.onFontsLoad && this.listener.onFontsLoad(this.loaded), [2, Promise.resolve(this.loaded)]);\n\n          case 1:\n            return r = n.sent(), [2, this.loadFonts(r.filter(function (t) {\n              return e.indexOf(t.en) >= 0;\n            }))];\n        }\n      });\n    });\n  }, t.prototype.listFontFamiliesInVideo = function (t) {\n    if (!t || !t.phrases) return null;\n    var e = [];\n    return t.phrases.forEach(function (t) {\n      return t.words.forEach(function (t) {\n        return t.characters.forEach(function (t) {\n          return e.push(t.fontFamily);\n        });\n      });\n    }), e.filter(function (t, e, r) {\n      return r.indexOf(t) === e;\n    });\n  }, t.prototype.listAvailableFonts = function () {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (t) {\n        return [2, this.fontInfoManager.listAvailableFonts()];\n      });\n    });\n  }, t.prototype.isLoading = function () {\n    return !!this.queue;\n  }, t.prototype.load = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e;\n      return dt(this, function (r) {\n        switch (r.label) {\n          case 0:\n            return [4, this.fontInfoManager.listAvailableFonts()];\n\n          case 1:\n            return e = r.sent(), [2, this.loadFonts(e.filter(function (e) {\n              return t.indexOf(e.key) >= 0;\n            }))];\n        }\n      });\n    });\n  }, t.prototype.loadFonts = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e = this;\n      return dt(this, function (r) {\n        return this.queue ? (this.listener && this.listener.onFontsLoad && this.listener.onFontsLoad(null, new It(\"Failed to load some fonts because there is an ongoing font loding process\", this.failed.slice())), [2, this.loaded]) : (this.queue = this.doLoad(t).then(function (t) {\n          return e.queue = null, t;\n        }), [2, this.queue]);\n      });\n    });\n  }, t.prototype.doLoad = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e,\n          r,\n          n,\n          i,\n          o = this;\n      return dt(this, function (s) {\n        switch (s.label) {\n          case 0:\n            return e = [], r = [], [4, this.fontInfoManager.getFrequentChars()];\n\n          case 1:\n            return n = s.sent(), t.forEach(function (t) {\n              t.typekit || t.typesquare || e.push(t), t.typesquare && r.push(t);\n            }), i = (this.textFetcher && this.textFetcher() || \"\").split(\"\").filter(function (t, e, r) {\n              return r.indexOf(t) === e;\n            }).sort().join(\"\"), [2, Promise.all([Nt(this.fontInfoManager.endpoint, e, n, i), kt(r, i)]).then(function (t) {\n              var e = t[0],\n                  r = t[1],\n                  n = e.loaded.concat(r.loaded);\n\n              if (o.addLoadedFonts(n), e.failed.length > 0 || r.failed.length > 0) {\n                var i = e.failed.concat(r.failed);\n                o.addFailedFonts(i), o.listener && o.listener.onFontsLoad && o.listener.onFontsLoad(null, new It(\"Failed to load some fonts\", o.failed.slice()));\n              } else o.listener && o.listener.onFontsLoad && o.listener.onFontsLoad(n);\n\n              return o.loaded;\n            })[\"catch\"](function (t) {\n              return o.listener && o.listener.onFontsLoad && o.listener.onFontsLoad(null, new It(t, o.failed.slice())), o.loaded;\n            })];\n        }\n      });\n    });\n  }, t.prototype.addLoadedFonts = function (t) {\n    var e = this;\n    this._loaded = this.loaded.concat(t.filter(function (t) {\n      return e.failed.findIndex(function (e) {\n        return e.key === t.key;\n      }) < 0;\n    }));\n  }, t.prototype.addFailedFonts = function (t) {\n    var e = this;\n    this._failed = this.failed.concat(t.filter(function (t) {\n      return e.failed.findIndex(function (e) {\n        return e.key === t.key;\n      }) < 0;\n    }));\n  }, t;\n}(),\n    Lt = function () {\n  function t(t, e, r) {\n    var n = this;\n    void 0 === e && (e = null), this.listener = e, this.options = r, this.videoLoader = new Pt(t, e), this.songLoader = new At(t.song, e, r), this.textLoader = new Ct(t, {\n      onLyricsLoad: e && e.onLyricsLoad.bind(e),\n      onTextLoad: e && e.onTextLoad.bind(e)\n    }, r), this.fontLoader = new jt(t.font, function () {\n      return n.textLoader.text;\n    }, e);\n  }\n\n  return Object.defineProperty(t.prototype, \"video\", {\n    get: function get() {\n      return this.videoLoader.video;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"song\", {\n    get: function get() {\n      var t;\n      return null === (t = this.songLoader.song) || void 0 === t ? void 0 : t.song;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"songStatus\", {\n    get: function get() {\n      var t;\n      return null === (t = this.songLoader.song) || void 0 === t ? void 0 : t.status;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"songMap\", {\n    get: function get() {\n      return this.songLoader.analysis;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"lyricsId\", {\n    get: function get() {\n      return this.textLoader.lyricsId;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"lyrics\", {\n    get: function get() {\n      return this.textLoader.lyrics;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"text\", {\n    get: function get() {\n      return this.textLoader.text;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"fonts\", {\n    get: function get() {\n      return this.fontLoader;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.createFromVideoId = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (r) {\n        return [2, this.videoLoader.createFromVideoId(t, e)];\n      });\n    });\n  }, t.prototype.createFromVideo = function (t, e) {\n    return this.videoLoader.createFromVideo(t, e);\n  }, t.prototype.createFromSongUrl = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (r) {\n        return [2, this.videoLoader.createFromSongUrl(t, e)];\n      });\n    });\n  }, t.prototype.createFromSongPath = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (r) {\n        return [2, this.videoLoader.createFromSongPath(t, e)];\n      });\n    });\n  }, t.prototype.createFromSongId = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (r) {\n        return [2, this.videoLoader.createFromSongId(t, e)];\n      });\n    });\n  }, t.prototype.createFromSongCode = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (r) {\n        return [2, this.videoLoader.createFromSongCode(t, e)];\n      });\n    });\n  }, t.prototype.createFromText = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (r) {\n        return [2, this.videoLoader.createFromText(t, e)];\n      });\n    });\n  }, t.prototype.createFromJSON = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (r) {\n        return [2, this.videoLoader.createFromJSON(t, e)];\n      });\n    });\n  }, t.prototype.finalize = function (t) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (e) {\n        switch (e.label) {\n          case 0:\n            return this.video ? [4, this.loadSong()] : [2, null];\n\n          case 1:\n            return e.sent(), [4, this.loadText(t)];\n\n          case 2:\n            return e.sent(), [4, this.loadFonts()];\n\n          case 3:\n            return e.sent(), [2];\n        }\n      });\n    });\n  }, t.prototype.loadSong = function () {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (t) {\n        return [2, this.songLoader.loadSong(this.video.songleCode || this.video.songleId, this.video)];\n      });\n    });\n  }, t.prototype.mockSongInfo = function (t) {\n    this.songLoader.mockSongInfo(t);\n  }, t.prototype.loadText = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e, r, n, i, o, s;\n      return dt(this, function (a) {\n        switch (a.label) {\n          case 0:\n            return e = this.video, r = e.lyricId, n = e.lyricDiffId, !(i = this.song ? this.song.code : null) && r < 0 ? (this.textLoader.loadRawText(this.videoLoader.data), [3, 3]) : [3, 1];\n\n          case 1:\n            return o = (null == t ? void 0 : t.altLyricsUrl) || void 0, s = (null == t ? void 0 : t.lyricsDirectAccess) || void 0, [4, this.textLoader.loadLyrics({\n              songCode: i,\n              lyricId: r,\n              lyricDiffId: n,\n              altLyricsUrl: o,\n              directAccess: s\n            })];\n\n          case 2:\n            a.sent(), this.textLoader.lyrics && this.textLoader.text && this.importLyrics(), a.label = 3;\n\n          case 3:\n            return [2, this.text];\n        }\n      });\n    });\n  }, t.prototype.loadFonts = function () {\n    var t, e;\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (r) {\n        return \"number\" == typeof this.video.id && this.video.id >= 0 ? [2, this.fontLoader.loadForVideo(this.videoLoader.data)] : Array.isArray(null === (t = this.options) || void 0 === t ? void 0 : t.fontFamilies) ? [2, this.fontLoader.load(this.options.fontFamilies)] : null === (null === (e = this.options) || void 0 === e ? void 0 : e.fontFamilies) ? [2, this.fontLoader.loadAll()] : [2, []];\n      });\n    });\n  }, t.prototype.importLyrics = function () {\n    var t = this.text.replace(/[\\s\\r\\n]/g, \"\"),\n        e = 0,\n        r = {\n      phrases: this.lyrics.data.map(function (r) {\n        return {\n          words: r.map(function (r) {\n            return {\n              characters: r.map(function (r) {\n                return {\n                  \"char\": t.charAt(e++),\n                  startTime: 1e3 * r.start_time,\n                  endTime: 1e3 * r.end_time\n                };\n              })\n            };\n          })\n        };\n      })\n    };\n    this.video.json && Array.isArray(this.video.json.phrases) ? this.video.json.phrases.forEach(function (t, e) {\n      t.words.forEach(function (t, n) {\n        t.characters.forEach(function (t, i) {\n          var o = r.phrases[e].words[n].characters[i];\n          t[\"char\"] = o[\"char\"], t.startTime = o.startTime, t.endTime = o.endTime;\n        });\n      });\n    }) : this.video.json = r;\n  }, t.prototype.exportPartialVideoEntry = function (t) {\n    return {\n      sourceId: this.video.id,\n      sourceOriginId: this.video.sourceOriginId,\n      songleId: this.song.id,\n      lyricId: this.textLoader.lyricsId,\n      lyricDiffId: this.lyrics ? this.lyrics.id : -1,\n      config: ((null == t ? void 0 : t.legacyStringMode) ? this.video.config && JSON.stringify(this.video.config) : this.video.config) || null\n    };\n  }, t.prototype.getChoruses = function () {\n    return this.songLoader.getChoruses();\n  }, t.prototype.findChorus = function (t, e) {\n    return this.songLoader.findChorus(t, e);\n  }, t.prototype.findChorusBetween = function (t, e) {\n    return this.songLoader.findChorusBetween(t, e);\n  }, t.prototype.getBeats = function () {\n    return this.songLoader.getBeats();\n  }, t.prototype.findBeat = function (t, e) {\n    return this.songLoader.findBeat(t, e);\n  }, t.prototype.getChords = function () {\n    return this.songLoader.getChords();\n  }, t.prototype.findChord = function (t, e) {\n    return this.songLoader.findChord(t, e);\n  }, t.prototype.getVocalFrequency = function (t) {\n    return this.songLoader.getVocalFrequency(t);\n  }, t.prototype.getVocalAmplitude = function (t) {\n    return this.songLoader.getVocalAmplitude(t);\n  }, t.prototype.getMaxVocalAmplitude = function () {\n    return this.songLoader.getMaxVocalAmplitude();\n  }, t.prototype.getValenceArousal = function (t) {\n    return this.songLoader.getValenceArousal(t);\n  }, t.prototype.getMedianValenceArousal = function () {\n    return this.songLoader.getMedianValenceArousal();\n  }, t;\n}(),\n    Ut = function () {\n  function t(t, e) {\n    var r;\n    this.player = t, this.listener = e, \"undefined\" != typeof window && (null === (r = null == t ? void 0 : t.options) || void 0 === r ? void 0 : r.app) && this.initialize();\n  }\n\n  return Object.defineProperty(t.prototype, \"options\", {\n    get: function get() {\n      return this._options ? \"boolean\" == typeof this._options ? {} : _pt({}, this._options) : null;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"managed\", {\n    get: function get() {\n      return !!this._host;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"host\", {\n    get: function get() {\n      return this._host;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"songUrl\", {\n    get: function get() {\n      return this._songUrl;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"songOptions\", {\n    get: function get() {\n      return this._songOptions;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"parameters\", {\n    get: function get() {\n      return this._parameters;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"isConnecting\", {\n    get: function get() {\n      return !!this.connecting;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.initialize = function () {\n    var t, e;\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (r) {\n        switch (r.label) {\n          case 0:\n            return this._options = null === (e = null === (t = this.player) || void 0 === t ? void 0 : t.options) || void 0 === e ? void 0 : e.app, this._options && \"object\" == _typeof(this._options) && (this._options = _pt({}, this._options)), this._parameters = {}, this.parseQueryString(), [4, this.connect()];\n\n          case 1:\n            return r.sent(), this.initializePlayerListener(), this.initializeMessageListener(), this._songUrl && this.createFromSongUrl(), [2];\n        }\n      });\n    });\n  }, t.prototype.initializePlayerListener = function () {\n    var t = this;\n    this.playerListener = {\n      onVideoReady: function onVideoReady(e) {\n        t._host && window.parent.postMessage({\n          kind: \"ta_video\",\n          options: {\n            lyrics: !!t.player.data.lyrics,\n            duration: t.player.video.duration\n          }\n        }, \"*\");\n      },\n      onThrottledTimeUpdate: function onThrottledTimeUpdate(e) {\n        t._host && window.parent.postMessage({\n          kind: \"ta_position\",\n          options: {\n            position: e\n          }\n        }, \"*\");\n      },\n      onPlay: function onPlay() {\n        t._host && window.parent.postMessage({\n          kind: \"ta_status\",\n          options: {\n            status: \"play\"\n          }\n        }, \"*\");\n      },\n      onPause: function onPause() {\n        t._host && window.parent.postMessage({\n          kind: \"ta_status\",\n          options: {\n            status: \"pause\"\n          }\n        }, \"*\");\n      },\n      onStop: function onStop() {\n        t._host && window.parent.postMessage({\n          kind: \"ta_status\",\n          options: {\n            status: \"stop\"\n          }\n        }, \"*\");\n      },\n      onDispose: function onDispose() {\n        t.dispose();\n      }\n    }, this.player.addListener(this.playerListener);\n  }, t.prototype.initializeMessageListener = function () {\n    var t = this;\n    this.messageListener = function (e) {\n      if (e.data.kind && /^ta_/.test(e.data.kind)) {\n        var r = t.player;\n\n        switch (e.data.kind.substring(\"ta_\".length)) {\n          case \"status\":\n            switch (e.data.options.status) {\n              case \"play\":\n                r.requestPlay();\n                break;\n\n              case \"pause\":\n                r.requestPause();\n                break;\n\n              case \"stop\":\n                r.requestStop();\n            }\n\n            break;\n\n          case \"seek\":\n            r.requestMediaSeek(e.data.options.position);\n            break;\n\n          case \"parameter\":\n            var n = e.data.options,\n                i = n.name,\n                o = n.value;\n            t.parameters[i] = o, t.listener.onAppParameterUpdate(i, o);\n            break;\n\n          case \"media\":\n            t._songUrl = e.data.options.url, t._songOptions = e.data.options.options || {}, r.requestStop();\n            var s = t.createFromSongUrl();\n            t.listener.onAppMediaChange(t._songUrl, s);\n        }\n      }\n    }, window.addEventListener(\"message\", this.messageListener);\n  }, t.prototype.createFromSongUrl = function () {\n    var t,\n        e = this._songOptions;\n    return e && (t = {\n      video: {}\n    }, e.altLyricsUrl && (t.altLyricsUrl = e.altLyricsUrl), e.lyricsDirectAccess && (t.lyricsDirectAccess = e.lyricsDirectAccess), e.lyricId && (t.video.lyricId = e.lyricId), e.lyricDiffId && (t.video.lyricDiffId = e.lyricDiffId), e.chordId && (t.video.chordId = e.chordId), e.beatId && (t.video.beatId = e.beatId), e.repetitiveSegmentId && (t.video.repetitiveSegmentId = e.repetitiveSegmentId)), this.player.createFromSongUrl(this._songUrl, t);\n  }, t.prototype.parseQueryString = function () {\n    this._songUrl = ut(\"ta_song_url\"), this._songOptions = {};\n    var t = ut(\"ta_lyric_id\");\n    t && (this._songOptions.lyricId = parseInt(t), isNaN(this._songOptions.lyricId) && delete this._songOptions.lyricId);\n    var e = ut(\"ta_lyric_diff_id\");\n    e && (this._songOptions.lyricDiffId = parseInt(e), isNaN(this._songOptions.lyricDiffId) && delete this._songOptions.lyricDiffId);\n    var r = ut(\"ta_alt_lyrics_url\");\n    r && (this._songOptions.altLyricsUrl = r);\n    var n = ut(\"ta_lyrics_direct_access\");\n    n && (this._songOptions.lyricsDirectAccess = \"true\" === n, this._songOptions.lyricsDirectAccess || delete this._songOptions.lyricsDirectAccess);\n    var i = ut(\"ta_chord_id\");\n    i && (this._songOptions.chordId = parseInt(i), isNaN(this._songOptions.chordId) && delete this._songOptions.chordId);\n    var o = ut(\"ta_beat_id\");\n    o && (this._songOptions.beatId = parseInt(o), isNaN(this._songOptions.beatId) && delete this._songOptions.beatId);\n    var s = ut(\"ta_repetitive_segment_id\");\n    s && (this._songOptions.repetitiveSegmentId = parseInt(s), isNaN(this._songOptions.repetitiveSegmentId) && delete this._songOptions.repetitiveSegmentId);\n  }, t.prototype.connect = function () {\n    return ht(this, void 0, void 0, function () {\n      var _t2,\n          e = this;\n\n      return dt(this, function (r) {\n        switch (r.label) {\n          case 0:\n            return this.connecting ? [2, this.connecting] : \"undefined\" != typeof window && this.options && window.parent && window !== window.parent ? [3, 2] : [4, new Promise(function (t) {\n              return setTimeout(t, 1);\n            })];\n\n          case 1:\n            return r.sent(), this.listener.onAppReady(this), [2, !1];\n\n          case 2:\n            return this.connecting = Promise.race([new Promise(function (r) {\n              _t2 = function t(n) {\n                n.data.kind && /^ta_/.test(n.data.kind) && \"ack\" === n.data.kind.substring(\"ta_\".length) && (window.removeEventListener(\"message\", _t2), e._host = n.data.options, r(!0));\n              }, window.addEventListener(\"message\", _t2);\n            }), ht(e, void 0, void 0, function () {\n              var e;\n              return dt(this, function (r) {\n                switch (r.label) {\n                  case 0:\n                    e = 0, r.label = 1;\n\n                  case 1:\n                    return e < 5 ? (window.parent.postMessage({\n                      kind: \"ta_connect\",\n                      options: this.options\n                    }, \"*\"), [4, new Promise(function (t) {\n                      return setTimeout(t, 200);\n                    })]) : [3, 4];\n\n                  case 2:\n                    if (r.sent(), this._host) return [3, 4];\n                    r.label = 3;\n\n                  case 3:\n                    return e++, [3, 1];\n\n                  case 4:\n                    return !this._host && _t2 && window.removeEventListener(\"message\", _t2), [2, !!this._host];\n                }\n              });\n            })]), this.connecting[\"finally\"](function () {\n              e.connecting = null, e.listener.onAppReady(e);\n            }), [2, this.connecting];\n        }\n      });\n    });\n  }, t.prototype.dispose = function () {\n    \"undefined\" != typeof window && this.options && (this.player.removeListener(this.playerListener), window.removeEventListener(\"message\", this.messageListener)), this._host = null, this.player = null;\n  }, t;\n}();\n\nfunction Ft(t) {\n  return t;\n}\n\nfunction Mt(t) {\n  return t < -1 ? t = -1 : t > 1 && (t = 1), function (e) {\n    return 0 == t ? e : t < 0 ? e * (e * -t + 1 + t) : e * ((2 - e) * t + (1 - t));\n  };\n}\n\nfunction Dt(t) {\n  return function (e) {\n    return Math.pow(e, t);\n  };\n}\n\nfunction Bt(t) {\n  return function (e) {\n    return 1 - Math.pow(1 - e, t);\n  };\n}\n\nfunction Vt(t) {\n  return function (e) {\n    return (e *= 2) < 1 ? .5 * Math.pow(e, t) : 1 - .5 * Math.abs(Math.pow(2 - e, t));\n  };\n}\n\nvar Gt = Dt(2),\n    qt = Bt(2),\n    Yt = Vt(2),\n    zt = Dt(3),\n    Wt = Bt(3),\n    Jt = Vt(3),\n    Xt = Dt(4),\n    Ht = Bt(4),\n    $t = Vt(4),\n    Zt = Dt(5),\n    Qt = Bt(5),\n    Kt = Vt(5);\n\nfunction te(t) {\n  return 1 - Math.cos(t * Math.PI / 2);\n}\n\nfunction ee(t) {\n  return Math.sin(t * Math.PI / 2);\n}\n\nfunction re(t) {\n  return -.5 * (Math.cos(Math.PI * t) - 1);\n}\n\nfunction ne(t) {\n  return function (e) {\n    return e * e * ((t + 1) * e - t);\n  };\n}\n\nvar ie = ne(1.7);\n\nfunction oe(t) {\n  return function (e) {\n    return --e * e * ((t + 1) * e + t) + 1;\n  };\n}\n\nvar se = oe(1.7);\n\nfunction ae(t) {\n  return t *= 1.525, function (e) {\n    return (e *= 2) < 1 ? e * e * ((t + 1) * e - t) * .5 : .5 * ((e -= 2) * e * ((t + 1) * e + t) + 2);\n  };\n}\n\nvar ue = ae(1.7);\n\nfunction ce(t) {\n  return -(Math.sqrt(1 - t * t) - 1);\n}\n\nfunction le(t) {\n  return Math.sqrt(1 - --t * t);\n}\n\nfunction pe(t) {\n  return (t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\n\nfunction he(t) {\n  return 1 - de(1 - t);\n}\n\nfunction de(t) {\n  return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375;\n}\n\nfunction fe(t) {\n  return t < .5 ? .5 * he(2 * t) : .5 * de(2 * t - 1) + .5;\n}\n\nfunction ye(t, e) {\n  var r = 2 * Math.PI;\n  return function (n) {\n    if (0 == n || 1 == n) return n;\n    var i = e / r * Math.asin(1 / t);\n    return -t * Math.pow(2, 10 * (n -= 1)) * Math.sin((n - i) * r / e);\n  };\n}\n\nvar ge = ye(1, .3);\n\nfunction ve(t, e) {\n  var r = 2 * Math.PI;\n  return function (n) {\n    if (0 == n || 1 == n) return n;\n    var i = e / r * Math.asin(1 / t);\n    return t * Math.pow(2, -10 * n) * Math.sin((n - i) * r / e) + 1;\n  };\n}\n\nvar me = ve(1, .3);\n\nfunction be(t, e) {\n  var r = 2 * Math.PI;\n  return function (n) {\n    var i = e / r * Math.asin(1 / t);\n    return (n *= 2) < 1 ? t * Math.pow(2, 10 * (n -= 1)) * Math.sin((n - i) * r / e) * -.5 : t * Math.pow(2, -10 * (n -= 1)) * Math.sin((n - i) * r / e) * .5 + 1;\n  };\n}\n\nvar _e = be(1, .3 * 1.5),\n    we = Object.freeze({\n  __proto__: null,\n  linear: Ft,\n  get: Mt,\n  getPowIn: Dt,\n  getPowOut: Bt,\n  getPowInOut: Vt,\n  quadIn: Gt,\n  quadOut: qt,\n  quadInOut: Yt,\n  cubicIn: zt,\n  cubicOut: Wt,\n  cubicInOut: Jt,\n  quartIn: Xt,\n  quartOut: Ht,\n  quartInOut: $t,\n  quintIn: Zt,\n  quintOut: Qt,\n  quintInOut: Kt,\n  sineIn: te,\n  sineOut: ee,\n  sineInOut: re,\n  getBackIn: ne,\n  backIn: ie,\n  getBackOut: oe,\n  backOut: se,\n  getBackInOut: ae,\n  backInOut: ue,\n  circIn: ce,\n  circOut: le,\n  circInOut: pe,\n  bounceIn: he,\n  bounceOut: de,\n  bounceInOut: fe,\n  getElasticIn: ye,\n  elasticIn: ge,\n  getElasticOut: ve,\n  elasticOut: me,\n  getElasticInOut: be,\n  elasticInOut: _e\n}),\n    Pe = function () {\n  function t() {}\n\n  return t.linear = Ft, t.get = Mt, t.getPowIn = Dt, t.getPowOut = Bt, t.getPowInOut = Vt, t.quadIn = Gt, t.quadOut = qt, t.quadInOut = Yt, t.cubicIn = zt, t.cubicOut = Wt, t.cubicInOut = Jt, t.quartIn = Xt, t.quartOut = Ht, t.quartInOut = $t, t.quintIn = Zt, t.quintOut = Qt, t.quintInOut = Kt, t.sineIn = te, t.sineOut = ee, t.sineInOut = re, t.getBackIn = ne, t.backIn = ie, t.getBackOut = oe, t.backOut = se, t.getBackInOut = ae, t.backInOut = ue, t.circIn = ce, t.circOut = le, t.circInOut = pe, t.bounceIn = he, t.bounceOut = de, t.bounceInOut = fe, t.getElasticIn = ye, t.elasticIn = ge, t.getElasticOut = ve, t.elasticOut = me, t.getElasticInOut = be, t.elasticInOut = _e, t;\n}(),\n    Ee = function () {\n  function t() {\n    this.cursor = -1, this.widgets = [], this.instances = [], this.model = {\n      id: -1,\n      type: e.NONE,\n      sourceId: -1,\n      author: null,\n      originalAuthor: null,\n      className: null,\n      createdDate: null\n    };\n  }\n\n  return Object.defineProperty(t.prototype, \"id\", {\n    get: function get() {\n      return this.model ? this.model.id : -1;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"script\", {\n    get: function get() {\n      return this.model ? this.model.script : null;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t;\n}(),\n    Oe = function Oe() {},\n    Te = function () {\n  function t(t, e) {\n    this.onTemplateLoad = e, this._emitter = null, this._loaded = null, this._loading = null, this.verbose = !1, this._emitter = t, this.clear();\n  }\n\n  return Object.defineProperty(t.prototype, \"loaded\", {\n    get: function get() {\n      return this._loaded;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"loading\", {\n    get: function get() {\n      return this._loading;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.clear = function () {\n    this._loaded = {}, this._loading = {};\n  }, t.prototype.loadLatest = function (t) {\n    return void 0 === t && (t = 100), ht(this, void 0, void 0, function () {\n      var e;\n      return dt(this, function (r) {\n        switch (r.label) {\n          case 0:\n            return [4, U.list({\n              maxResults: t,\n              withoutAuthors: !0,\n              withoutOriginalAuthors: !0,\n              script: !0\n            })];\n\n          case 1:\n            return (e = r.sent()) && e.list ? (this.verbose && console.log(\"--- loading template classes ---\"), [2, this.registerMany(e.list)]) : [2];\n        }\n      });\n    });\n  }, t.prototype.loadForVideo = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e,\n          r = this;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, U.loadForVideo(t)];\n\n          case 1:\n            return (e = n.sent()) && e.list ? (this.verbose && console.log(\"--- loading template classes for vid:\" + t + \" ---\"), [4, this.registerMany(e.list)]) : [2, null];\n\n          case 2:\n            return [2, n.sent().map(function (t) {\n              return t ? r.getByName(t) : null;\n            })];\n        }\n      });\n    });\n  }, t.prototype.loadByNames = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e,\n          r = this;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return !Array.isArray(t) || t.length <= 0 ? [2, []] : (this.verbose && console.log(\"--- loading template classes ---\"), [4, Promise.all(t.map(function (t) {\n              return r.doLoadByName(t);\n            }))]);\n\n          case 1:\n            return (e = n.sent()) && this._emitter.onTemplatesLoad(e.filter(function (t) {\n              return !!t;\n            }).map(function (t) {\n              return t.className;\n            })), [2, e];\n        }\n      });\n    });\n  }, t.prototype.loadByName = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e, r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return n.trys.push([0, 2,, 3]), [4, this.doLoadByName(t)];\n\n          case 1:\n            return e = n.sent(), this._emitter.onTemplatesLoad([e.className]), [2, e];\n\n          case 2:\n            return r = n.sent(), this._emitter.onTemplatesLoad(null, r), [2, null];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  }, t.prototype.doLoadByName = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e,\n          r,\n          n = this;\n      return dt(this, function (i) {\n        return null !== (e = this.getByName(t)) ? [2, e] : this._loading[t] ? [2, this._loading[t]] : (r = new Promise(function (e) {\n          return U.loadByName(t).then(function (t) {\n            return n.onTemplateLoad(t);\n          }).then(e);\n        }), this._loading[t] = r, r[\"finally\"](function () {\n          return delete n._loading[t];\n        }), [2, r]);\n      });\n    });\n  }, t.prototype.loadById = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e, r, n;\n      return dt(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return i.trys.push([0, 2,, 3]), [4, this.doLoadById(t)];\n\n          case 1:\n            return e = i.sent(), r = null, [3, 3];\n\n          case 2:\n            return n = i.sent(), r = n, [3, 3];\n\n          case 3:\n            return this._emitter.onTemplatesLoad(e ? [e.className] : null, r), [2, e];\n        }\n      });\n    });\n  }, t.prototype.doLoadById = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e,\n          r,\n          n = this;\n      return dt(this, function (i) {\n        return (e = this.getById(t)) ? [2, e] : this._loading[t] ? [2, this._loading[t]] : (r = new Promise(function (e) {\n          return U.load(t).then(function (t) {\n            return n.onTemplateLoad(t);\n          }).then(e);\n        }), this._loading[t] = r, r[\"finally\"](function () {\n          return delete n._loading[t];\n        }), [2, r]);\n      });\n    });\n  }, t.prototype.registerMany = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e,\n          r,\n          n = this;\n      return dt(this, function (i) {\n        switch (i.label) {\n          case 0:\n            return e = t.map(function (t) {\n              var e = n.onTemplateLoad(t);\n              return n._loading[t.className] = e, n._loading[t.className + \"@\" + t.id] = e, e;\n            }), [4, Promise.all(e.map(function (t) {\n              return t.then(function (t) {\n                return t.className;\n              })[\"catch\"](function (t) {\n                return null;\n              });\n            }))];\n\n          case 1:\n            return r = i.sent().filter(function (t) {\n              return !!t;\n            }), this._emitter.onTemplatesLoad(r), [2, r];\n        }\n      });\n    });\n  }, t.prototype.commit = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, U.create({\n              sourceId: t.model.sourceId,\n              script: t.model.script,\n              log: e\n            })];\n\n          case 1:\n            return (r = n.sent()).success && (t.model.id = r.id, this._emitter.onTemplateCommit(t.className)), [2, r];\n        }\n      });\n    });\n  }, t.prototype.getByName = function (t, e) {\n    var r;\n\n    if (void 0 === e && (e = !1), t && (r = t.match(/(.+)@([0-9]+)/))) {\n      t = r[1];\n      var n = parseInt(r[2]);\n      if (!this._loaded[t]) return null;\n      var i = this._loaded[t].model;\n\n      if (i.id !== n) {\n        if (!e) return null;\n        this.verbose && console.log(\"[warning] template \" + t + \" version \" + n + \" is requested but \" + i.id + \" is used\");\n      }\n    }\n\n    return this._loaded[t] ? this._loaded[t] : null;\n  }, t.prototype.getById = function (t) {\n    var e = null;\n\n    for (var r in this._loaded) {\n      if (this._loaded[r].model.id === t) {\n        e = this._loaded[r];\n        break;\n      }\n    }\n\n    return e;\n  }, t;\n}(),\n    Se = function () {\n  function t(e, r) {\n    \"string\" == typeof e && (e = t.acorn.parse(e, t.PARSE_OPTIONS)), this.ast = e, this.initFunc_ = r, this.paused_ = !1, this.polyfills_ = [], this.functionCounter_ = 0, this.stepFunctions_ = Object.create(null);\n\n    for (var n, i = /^step([A-Z]\\w*)$/, o = Object.getOwnPropertyNames(t.prototype), s = 0; s < o.length; s++) {\n      var a = o[s];\n      \"function\" == typeof t.prototype[a] && (n = a.match(i)) && (this.stepFunctions_[n[1]] = t.prototype[a].bind(this));\n    }\n\n    var u;\n    this.global = this.createScope(this.ast, null), this.ast = t.acorn.parse(this.polyfills_.join(\"\\n\"), t.PARSE_OPTIONS), this.polyfills_ = void 0, this.stripLocations_(this.ast, void 0, void 0), (u = new xe(this.ast, this.global)).done = !1, this.stateStack = [u], this.run(), this.value = void 0, this.ast = e, (u = new xe(this.ast, this.global)).done = !1, this.stateStack.length = 0, this.stateStack[0] = u, this.nodeConstructor = u.node.constructor, this.stateStack = this.stateStack, this.OBJECT = this.OBJECT, this.OBJECT_PROTO = this.OBJECT_PROTO, this.FUNCTION = this.FUNCTION, this.FUNCTION_PROTO = this.FUNCTION_PROTO, this.ARRAY = this.ARRAY, this.ARRAY_PROTO = this.ARRAY_PROTO, this.REGEXP = this.REGEXP, this.REGEXP_PROTO = this.REGEXP_PROTO, this.UNDEFINED = void 0, this.NULL = null, this.NAN = NaN, this.TRUE = !0, this.FALSE = !1, this.STRING_EMPTY = \"\", this.NUMBER_ZERO = 0, this.NUMBER_ONE = 1;\n  }\n\n  return t.prototype.wrap = function (t) {\n    return t;\n  }, t.prototype.unwrap = function (t, e) {\n    return t;\n  }, t.prototype.appendCode = function (e) {\n    var r = this.stateStack[0];\n    if (!r || \"Program\" !== r.node.type) throw Error(\"Expecting original AST to start with a Program node.\");\n    if (\"string\" == typeof e && (e = t.acorn.parse(e, t.PARSE_OPTIONS)), !e || \"Program\" !== e.type) throw Error(\"Expecting new AST to start with a Program node.\");\n    this.populateScope_(e, r.scope);\n\n    for (var n, i = 0; n = e.body[i]; i++) {\n      r.node.body.push(n);\n    }\n\n    r.done = !1;\n  }, t.prototype.step = function () {\n    var e = this.stateStack,\n        r = e[e.length - 1];\n    if (!r) return !1;\n    var n = r.node,\n        i = n.type;\n    if (\"Program\" === i && r.done) return !1;\n    if (this.paused_) return !0;\n\n    try {\n      var o = this.stepFunctions_[i](e, r, n);\n    } catch (e) {\n      if (e !== t.STEP_ERROR) throw e;\n    }\n\n    return o && e.push(o), !!n.end || this.step();\n  }, t.prototype.run = function () {\n    for (; !this.paused_ && this.step();) {\n      ;\n    }\n\n    return this.paused_;\n  }, t.prototype.initGlobalScope = function (e) {\n    this.setProperty(e, \"NaN\", NaN, t.READONLY_DESCRIPTOR), this.setProperty(e, \"Infinity\", 1 / 0, t.READONLY_DESCRIPTOR), this.setProperty(e, \"undefined\", void 0, t.READONLY_DESCRIPTOR), this.setProperty(e, \"window\", e, t.READONLY_DESCRIPTOR), this.setProperty(e, \"this\", e, t.READONLY_DESCRIPTOR), this.setProperty(e, \"self\", e), this.OBJECT_PROTO = new Re(null), this.FUNCTION_PROTO = new Re(this.OBJECT_PROTO), this.initFunction(e), this.initObject(e), e.proto = this.OBJECT_PROTO, this.setProperty(e, \"constructor\", this.OBJECT), this.initArray(e), this.initString(e), this.initBoolean(e), this.initNumber(e), this.initDate(e), this.initRegExp(e), this.initError(e), this.initMath(e), this.initJSON(e);\n    var r = this,\n        n = this.createNativeFunction(function (t) {\n      throw EvalError(\"Can't happen\");\n    }, !1);\n    n.eval = !0, this.setProperty(e, \"eval\", n), this.setProperty(e, \"parseInt\", this.createNativeFunction(parseInt, !1)), this.setProperty(e, \"parseFloat\", this.createNativeFunction(parseFloat, !1)), this.setProperty(e, \"isNaN\", this.createNativeFunction(isNaN, !1)), this.setProperty(e, \"isFinite\", this.createNativeFunction(isFinite, !1));\n\n    for (var i = [[escape, \"escape\"], [unescape, \"unescape\"], [decodeURI, \"decodeURI\"], [decodeURIComponent, \"decodeURIComponent\"], [encodeURI, \"encodeURI\"], [encodeURIComponent, \"encodeURIComponent\"]], o = 0; o < i.length; o++) {\n      var s = function (t) {\n        return function (e) {\n          try {\n            return t(e);\n          } catch (t) {\n            r.throwException(r.URI_ERROR, t.message);\n          }\n        };\n      }(i[o][0]);\n\n      this.setProperty(e, i[o][1], this.createNativeFunction(s, !1), t.NONENUMERABLE_DESCRIPTOR);\n    }\n\n    this.initFunc_ && this.initFunc_(this, e);\n  }, t.prototype.initFunction = function (e) {\n    var r,\n        n = this,\n        i = /^[A-Za-z_$][\\w$]*$/;\n    (r = function r(e) {\n      if (n.calledWithNew()) var r = this;else r = n.createObjectProto(n.FUNCTION_PROTO);\n      if (arguments.length) var o = String(arguments[arguments.length - 1]);else o = \"\";\n\n      for (var s = [], a = 0; a < arguments.length - 1; a++) {\n        var u = String(arguments[a]);\n        u.match(i) || n.throwException(n.SYNTAX_ERROR, \"Invalid function argument: \" + u), s.push(u);\n      }\n\n      s = s.join(\", \"), r.parentScope = n.global;\n\n      try {\n        var c = t.acorn.parse(\"$ = function(\" + s + \") {\" + o + \"};\", t.PARSE_OPTIONS);\n      } catch (t) {\n        n.throwException(n.SYNTAX_ERROR, \"Invalid code: \" + t.message);\n      }\n\n      return 1 !== c.body.length && n.throwException(n.SYNTAX_ERROR, \"Invalid code in function body.\"), r.node = c.body[0].expression.right, n.setProperty(r, \"length\", r.node.length, t.READONLY_DESCRIPTOR), r;\n    }).id = this.functionCounter_++, this.FUNCTION = this.createObjectProto(this.FUNCTION_PROTO), this.setProperty(e, \"Function\", this.FUNCTION), this.setProperty(this.FUNCTION, \"prototype\", this.FUNCTION_PROTO), this.FUNCTION.nativeFunc = r, this.setProperty(this.FUNCTION_PROTO, \"constructor\", this.FUNCTION, t.NONENUMERABLE_DESCRIPTOR), this.FUNCTION_PROTO.nativeFunc = function () {}, this.FUNCTION_PROTO.nativeFunc.id = this.functionCounter_++, this.setProperty(this.FUNCTION_PROTO, \"length\", 0, t.READONLY_DESCRIPTOR);\n\n    var o = function o(t) {\n      if (!(t && t.isObject || n.getScope().strict)) if (null == t) t = n.global;else {\n        var e = n.createObjectProto(n.getPrototype(t));\n        e.data = t, t = e;\n      }\n      return t;\n    };\n\n    r = function r(t, e) {\n      var r = n.stateStack[n.stateStack.length - 1];\n      r.func_ = this, r.funcThis_ = o(t), r.arguments_ = [], null != e && (e.isObject ? r.arguments_ = n.pseudoToNative(e) : n.throwException(n.TYPE_ERROR, \"CreateListFromArrayLike called on non-object\")), r.doneExec_ = !1;\n    }, this.setNativeFunctionPrototype(this.FUNCTION, \"apply\", r), r = function r(t, e) {\n      var r = n.stateStack[n.stateStack.length - 1];\n      r.func_ = this, r.funcThis_ = o(t), r.arguments_ = [];\n\n      for (var i = 1; i < arguments.length; i++) {\n        r.arguments_.push(arguments[i]);\n      }\n\n      r.doneExec_ = !1;\n    }, this.setNativeFunctionPrototype(this.FUNCTION, \"call\", r), this.polyfills_.push(\"Object.defineProperty(Function.prototype, 'bind',\", \"{configurable: true, writable: true, value:\", \"function(oThis) {\", \"if (typeof this !== 'function') {\", \"throw TypeError('What is trying to be bound is not callable');\", \"}\", \"var aArgs   = Array.prototype.slice.call(arguments, 1),\", \"fToBind = this,\", \"fNOP    = function() {},\", \"fBound  = function() {\", \"return fToBind.apply(this instanceof fNOP\", \"? this\", \": oThis,\", \"aArgs.concat(Array.prototype.slice.call(arguments)));\", \"};\", \"if (this.prototype) {\", \"fNOP.prototype = this.prototype;\", \"}\", \"fBound.prototype = new fNOP();\", \"return fBound;\", \"}\", \"});\", \"\"), r = function r() {\n      return this.toString();\n    }, this.setNativeFunctionPrototype(this.FUNCTION, \"toString\", r), this.setProperty(this.FUNCTION, \"toString\", this.createNativeFunction(r, !1), t.NONENUMERABLE_DESCRIPTOR), r = function r() {\n      return this.valueOf();\n    }, this.setNativeFunctionPrototype(this.FUNCTION, \"valueOf\", r), this.setProperty(this.FUNCTION, \"valueOf\", this.createNativeFunction(r, !1), t.NONENUMERABLE_DESCRIPTOR);\n  }, t.prototype.initObject = function (e) {\n    var r,\n        n = this;\n    r = function r(t) {\n      if (null == t) return n.calledWithNew() ? this : n.createObjectProto(n.OBJECT_PROTO);\n\n      if (!t.isObject) {\n        var e = n.createObjectProto(n.getPrototype(t));\n        return e.data = t, e;\n      }\n\n      return t;\n    }, this.OBJECT = this.createNativeFunction(r, !0), this.setProperty(this.OBJECT, \"prototype\", this.OBJECT_PROTO), this.setProperty(this.OBJECT_PROTO, \"constructor\", this.OBJECT), this.setProperty(e, \"Object\", this.OBJECT);\n\n    var i = function i(t) {\n      null == t && n.throwException(n.TYPE_ERROR, \"Cannot convert '\" + t + \"' to object\");\n    };\n\n    r = function r(t) {\n      i(t);\n      var e = t.isObject ? t.properties : t;\n      return n.nativeToPseudo(Object.getOwnPropertyNames(e));\n    }, this.setProperty(this.OBJECT, \"getOwnPropertyNames\", this.createNativeFunction(r, !1), t.NONENUMERABLE_DESCRIPTOR), r = function r(t) {\n      return i(t), t.isObject ? n.nativeToPseudo(Object.keys(t.properties)) : n.nativeToPseudo(Object.keys(t));\n    }, this.setProperty(this.OBJECT, \"keys\", this.createNativeFunction(r, !1), t.NONENUMERABLE_DESCRIPTOR), r = function r(t) {\n      return null === t ? n.createObjectProto(null) : (void 0 !== t && t.isObject || n.throwException(n.TYPE_ERROR, \"Object prototype may only be an Object or null\"), n.createObjectProto(t));\n    }, this.setProperty(this.OBJECT, \"create\", this.createNativeFunction(r, !1), t.NONENUMERABLE_DESCRIPTOR), this.polyfills_.push(\"(function() {\", \"var create_ = Object.create;\", \"Object.create = function(proto, props) {\", \"var obj = create_(proto);\", \"props && Object.defineProperties(obj, props);\", \"return obj;\", \"};\", \"})();\", \"\"), r = function r(t, e, _r) {\n      return e = String(e), t && t.isObject || n.throwException(n.TYPE_ERROR, \"Object.defineProperty called on non-object\"), _r && _r.isObject || n.throwException(n.TYPE_ERROR, \"Property description must be an object\"), !t.properties[e] && t.preventExtensions && n.throwException(n.TYPE_ERROR, \"Can't define property '\" + e + \"', object is not extensible\"), n.setProperty(t, e, ReferenceError, _r.properties), t;\n    }, this.setProperty(this.OBJECT, \"defineProperty\", this.createNativeFunction(r, !1), t.NONENUMERABLE_DESCRIPTOR), this.polyfills_.push(\"(function() {\", \"var defineProperty_ = Object.defineProperty;\", \"Object.defineProperty = function(obj, prop, d1) {\", \"var d2 = {};\", \"if ('configurable' in d1) d2.configurable = d1.configurable;\", \"if ('enumerable' in d1) d2.enumerable = d1.enumerable;\", \"if ('writable' in d1) d2.writable = d1.writable;\", \"if ('value' in d1) d2.value = d1.value;\", \"if ('get' in d1) d2.get = d1.get;\", \"if ('set' in d1) d2.set = d1.set;\", \"return defineProperty_(obj, prop, d2);\", \"};\", \"})();\", \"Object.defineProperty(Object, 'defineProperties',\", \"{configurable: true, writable: true, value:\", \"function(obj, props) {\", \"var keys = Object.keys(props);\", \"for (var i = 0; i < keys.length; i++) {\", \"Object.defineProperty(obj, keys[i], props[keys[i]]);\", \"}\", \"return obj;\", \"}\", \"});\", \"\"), r = function r(t, e) {\n      if (t && t.isObject || n.throwException(n.TYPE_ERROR, \"Object.getOwnPropertyDescriptor called on non-object\"), (e = String(e)) in t.properties) {\n        var r = Object.getOwnPropertyDescriptor(t.properties, e),\n            i = t.getter[e],\n            o = t.setter[e];\n        (i || o) && (r.get = i, r.set = o, delete r.value, delete r.writable);\n        var s = n.nativeToPseudo(r);\n        return \"value\" in r && n.setProperty(s, \"value\", r.value), s;\n      }\n    }, this.setProperty(this.OBJECT, \"getOwnPropertyDescriptor\", this.createNativeFunction(r, !1), t.NONENUMERABLE_DESCRIPTOR), r = function r(t) {\n      return i(t), n.getPrototype(t);\n    }, this.setProperty(this.OBJECT, \"getPrototypeOf\", this.createNativeFunction(r, !1), t.NONENUMERABLE_DESCRIPTOR), r = function r(t) {\n      return Boolean(t) && !t.preventExtensions;\n    }, this.setProperty(this.OBJECT, \"isExtensible\", this.createNativeFunction(r, !1), t.NONENUMERABLE_DESCRIPTOR), r = function r(t) {\n      return t && t.isObject && (t.preventExtensions = !0), t;\n    }, this.setProperty(this.OBJECT, \"preventExtensions\", this.createNativeFunction(r, !1), t.NONENUMERABLE_DESCRIPTOR), this.setNativeFunctionPrototype(this.OBJECT, \"toString\", Re.prototype.toString), this.setNativeFunctionPrototype(this.OBJECT, \"toLocaleString\", Re.prototype.toString), this.setNativeFunctionPrototype(this.OBJECT, \"valueOf\", Re.prototype.valueOf), r = function r(t) {\n      return i(this), this.isObject ? String(t) in this.properties : this.hasOwnProperty(t);\n    }, this.setNativeFunctionPrototype(this.OBJECT, \"hasOwnProperty\", r), r = function r(t) {\n      return i(this), Object.prototype.propertyIsEnumerable.call(this.properties, t);\n    }, this.setNativeFunctionPrototype(this.OBJECT, \"propertyIsEnumerable\", r), r = function r(t) {\n      for (;;) {\n        if (!(t = n.getPrototype(t))) return !1;\n        if (t === this) return !0;\n      }\n    }, this.setNativeFunctionPrototype(this.OBJECT, \"isPrototypeOf\", r);\n  }, t.prototype.initArray = function (e) {\n    var r,\n        n = this;\n    r = function r(e) {\n      if (n.calledWithNew()) var r = this;else r = n.createObjectProto(n.ARRAY_PROTO);\n      var i = arguments[0];\n      if (1 === arguments.length && \"number\" == typeof i) isNaN(t.legalArrayLength(i)) && n.throwException(n.RANGE_ERROR, \"Invalid array length\"), r.properties.length = i;else {\n        for (var o = 0; o < arguments.length; o++) {\n          r.properties[o] = arguments[o];\n        }\n\n        r.properties.length = o;\n      }\n      return r;\n    }, this.ARRAY = this.createNativeFunction(r, !0), this.ARRAY_PROTO = this.ARRAY.properties.prototype, this.setProperty(e, \"Array\", this.ARRAY), r = function r(t) {\n      return t && \"Array\" === t[\"class\"];\n    }, this.setProperty(this.ARRAY, \"isArray\", this.createNativeFunction(r, !1), t.NONENUMERABLE_DESCRIPTOR), r = function r() {\n      return Array.prototype.pop.call(this.properties);\n    }, this.setNativeFunctionPrototype(this.ARRAY, \"pop\", r), r = function r(t) {\n      return Array.prototype.push.apply(this.properties, arguments);\n    }, this.setNativeFunctionPrototype(this.ARRAY, \"push\", r), r = function r() {\n      return Array.prototype.shift.call(this.properties);\n    }, this.setNativeFunctionPrototype(this.ARRAY, \"shift\", r), r = function r(t) {\n      return Array.prototype.unshift.apply(this.properties, arguments);\n    }, this.setNativeFunctionPrototype(this.ARRAY, \"unshift\", r), r = function r() {\n      return Array.prototype.reverse.call(this.properties), this;\n    }, this.setNativeFunctionPrototype(this.ARRAY, \"reverse\", r), r = function r(t, e) {\n      var r = Array.prototype.splice.apply(this.properties, arguments);\n      return n.unwrap && (r = r.map(n.unwrap)), n.nativeToPseudo(r);\n    }, this.setNativeFunctionPrototype(this.ARRAY, \"splice\", r), r = function r(t, e) {\n      var r = Array.prototype.slice.call(this.properties, t, e);\n      return n.unwrap && (r = r.map(n.unwrap)), n.nativeToPseudo(r);\n    }, this.setNativeFunctionPrototype(this.ARRAY, \"slice\", r), r = function r(t) {\n      return Array.prototype.join.call(this.properties, t);\n    }, this.setNativeFunctionPrototype(this.ARRAY, \"join\", r), r = function r(t) {\n      for (var e = [], r = 0, i = n.getProperty(this, \"length\"), o = 0; o < i; o++) {\n        if (n.hasProperty(this, o)) {\n          var s = n.getProperty(this, o);\n          e[r] = s;\n        }\n\n        r++;\n      }\n\n      for (o = 0; o < arguments.length; o++) {\n        var a = arguments[o];\n        if (n.isa(a, n.ARRAY)) for (var u = n.getProperty(a, \"length\"), c = 0; c < u; c++) {\n          n.hasProperty(a, c) && (e[r] = n.getProperty(a, c)), r++;\n        } else e[r] = a;\n      }\n\n      return n.unwrap && (e = e.map(n.unwrap)), n.nativeToPseudo(e);\n    }, this.setNativeFunctionPrototype(this.ARRAY, \"concat\", r), r = function r(t, e) {\n      return Array.prototype.indexOf.apply(this.properties, arguments);\n    }, this.setNativeFunctionPrototype(this.ARRAY, \"indexOf\", r), r = function r(t, e) {\n      return Array.prototype.lastIndexOf.apply(this.properties, arguments);\n    }, this.setNativeFunctionPrototype(this.ARRAY, \"lastIndexOf\", r), r = function r() {\n      return Array.prototype.sort.call(this.properties), this;\n    }, this.setNativeFunctionPrototype(this.ARRAY, \"sort\", r), this.polyfills_.push(\"Object.defineProperty(Array.prototype, 'every',\", \"{configurable: true, writable: true, value:\", \"function(callbackfn, thisArg) {\", \"if (!this || typeof callbackfn !== 'function') throw TypeError();\", \"var T, k;\", \"var O = Object(this);\", \"var len = O.length >>> 0;\", \"if (arguments.length > 1) T = thisArg;\", \"k = 0;\", \"while (k < len) {\", \"if (k in O && !callbackfn.call(T, O[k], k, O)) return false;\", \"k++;\", \"}\", \"return true;\", \"}\", \"});\", \"Object.defineProperty(Array.prototype, 'filter',\", \"{configurable: true, writable: true, value:\", \"function(fun/*, thisArg*/) {\", \"if (this === void 0 || this === null || typeof fun !== 'function') throw TypeError();\", \"var t = Object(this);\", \"var len = t.length >>> 0;\", \"var res = [];\", \"var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\", \"for (var i = 0; i < len; i++) {\", \"if (i in t) {\", \"var val = t[i];\", \"if (fun.call(thisArg, val, i, t)) res.push(val);\", \"}\", \"}\", \"return res;\", \"}\", \"});\", \"Object.defineProperty(Array.prototype, 'forEach',\", \"{configurable: true, writable: true, value:\", \"function(callback, thisArg) {\", \"if (!this || typeof callback !== 'function') throw TypeError();\", \"var T, k;\", \"var O = Object(this);\", \"var len = O.length >>> 0;\", \"if (arguments.length > 1) T = thisArg;\", \"k = 0;\", \"while (k < len) {\", \"if (k in O) callback.call(T, O[k], k, O);\", \"k++;\", \"}\", \"}\", \"});\", \"Object.defineProperty(Array.prototype, 'map',\", \"{configurable: true, writable: true, value:\", \"function(callback, thisArg) {\", \"if (!this || typeof callback !== 'function') new TypeError;\", \"var T, A, k;\", \"var O = Object(this);\", \"var len = O.length >>> 0;\", \"if (arguments.length > 1) T = thisArg;\", \"A = new Array(len);\", \"k = 0;\", \"while (k < len) {\", \"if (k in O) A[k] = callback.call(T, O[k], k, O);\", \"k++;\", \"}\", \"return A;\", \"}\", \"});\", \"Object.defineProperty(Array.prototype, 'reduce',\", \"{configurable: true, writable: true, value:\", \"function(callback /*, initialValue*/) {\", \"if (!this || typeof callback !== 'function') throw TypeError();\", \"var t = Object(this), len = t.length >>> 0, k = 0, value;\", \"if (arguments.length === 2) {\", \"value = arguments[1];\", \"} else {\", \"while (k < len && !(k in t)) k++;\", \"if (k >= len) {\", \"throw TypeError('Reduce of empty array with no initial value');\", \"}\", \"value = t[k++];\", \"}\", \"for (; k < len; k++) {\", \"if (k in t) value = callback(value, t[k], k, t);\", \"}\", \"return value;\", \"}\", \"});\", \"Object.defineProperty(Array.prototype, 'reduceRight',\", \"{configurable: true, writable: true, value:\", \"function(callback /*, initialValue*/) {\", \"if (null === this || 'undefined' === typeof this || 'function' !== typeof callback) throw TypeError();\", \"var t = Object(this), len = t.length >>> 0, k = len - 1, value;\", \"if (arguments.length >= 2) {\", \"value = arguments[1];\", \"} else {\", \"while (k >= 0 && !(k in t)) k--;\", \"if (k < 0) {\", \"throw TypeError('Reduce of empty array with no initial value');\", \"}\", \"value = t[k--];\", \"}\", \"for (; k >= 0; k--) {\", \"if (k in t) value = callback(value, t[k], k, t);\", \"}\", \"return value;\", \"}\", \"});\", \"Object.defineProperty(Array.prototype, 'some',\", \"{configurable: true, writable: true, value:\", \"function(fun/*, thisArg*/) {\", \"if (!this || typeof fun !== 'function') throw TypeError();\", \"var t = Object(this);\", \"var len = t.length >>> 0;\", \"var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\", \"for (var i = 0; i < len; i++) {\", \"if (i in t && fun.call(thisArg, t[i], i, t)) {\", \"return true;\", \"}\", \"}\", \"return false;\", \"}\", \"});\", \"(function() {\", \"var sort_ = Array.prototype.sort;\", \"Array.prototype.sort = function(opt_comp) {\", \"if (typeof opt_comp !== 'function') {\", \"return sort_.call(this);\", \"}\", \"for (var i = 0; i < this.length; i++) {\", \"var changes = 0;\", \"for (var j = 0; j < this.length - i - 1; j++) {\", \"if (opt_comp(this[j], this[j + 1]) > 0) {\", \"var swap = this[j];\", \"this[j] = this[j + 1];\", \"this[j + 1] = swap;\", \"changes++;\", \"}\", \"}\", \"if (!changes) break;\", \"}\", \"return this;\", \"};\", \"})();\", \"Object.defineProperty(Array.prototype, 'toLocaleString',\", \"{configurable: true, writable: true, value:\", \"function() {\", \"var out = [];\", \"for (var i = 0; i < this.length; i++) {\", \"out[i] = (this[i] === null || this[i] === undefined) ? '' : this[i].toLocaleString();\", \"}\", \"return out.join(',');\", \"}\", \"});\", \"\");\n  }, t.prototype.initString = function (e) {\n    var r,\n        n = this;\n    r = function r(t) {\n      return t = String(t), n.calledWithNew() ? (this.data = t, this) : t;\n    }, this.STRING = this.createNativeFunction(r, !0), this.setProperty(e, \"String\", this.STRING), this.setProperty(this.STRING, \"fromCharCode\", this.createNativeFunction(String.fromCharCode, !1), t.NONENUMERABLE_DESCRIPTOR);\n\n    for (var i = [\"trim\", \"toLowerCase\", \"toUpperCase\", \"toLocaleLowerCase\", \"toLocaleUpperCase\", \"charAt\", \"charCodeAt\", \"substring\", \"slice\", \"substr\", \"indexOf\", \"lastIndexOf\", \"concat\"], o = 0; o < i.length; o++) {\n      this.setNativeFunctionPrototype(this.STRING, i[o], String.prototype[i[o]]);\n    }\n\n    r = function r(t, e, _r2) {\n      return e = e ? n.pseudoToNative(e) : void 0, _r2 = _r2 ? n.pseudoToNative(_r2) : void 0, String(this).localeCompare(t, e, _r2);\n    }, this.setNativeFunctionPrototype(this.STRING, \"localeCompare\", r), r = function r(t, e) {\n      n.isa(t, n.REGEXP) && (t = t.data);\n      var r = String(this).split(t, e);\n      return n.nativeToPseudo(r);\n    }, this.setNativeFunctionPrototype(this.STRING, \"split\", r), r = function r(t) {\n      t = t ? t.data : void 0;\n      var e = String(this).match(t);\n      return e ? n.nativeToPseudo(e) : null;\n    }, this.setNativeFunctionPrototype(this.STRING, \"match\", r), r = function r(t) {\n      return n.isa(t, n.REGEXP) && (t = t.data), String(this).search(t);\n    }, this.setNativeFunctionPrototype(this.STRING, \"search\", r), r = function r(t, e) {\n      return String(this).replace(t.data || t, e);\n    }, this.setNativeFunctionPrototype(this.STRING, \"replace\", r), this.polyfills_.push(\"(function() {\", \"var replace_ = String.prototype.replace;\", \"String.prototype.replace = function(substr, newSubstr) {\", \"if (typeof newSubstr !== 'function') {\", \"return replace_.call(this, substr, newSubstr);\", \"}\", \"var str = this;\", \"if (substr instanceof RegExp) {\", \"var subs = [];\", \"var m = substr.exec(str);\", \"while (m) {\", \"m.push(m.index, str);\", \"var inject = newSubstr.apply(null, m);\", \"subs.push([m.index, m[0].length, inject]);\", \"m = substr.global ? substr.exec(str) : null;\", \"}\", \"for (var i = subs.length - 1; i >= 0; i--) {\", \"str = str.substring(0, subs[i][0]) + subs[i][2] + str.substring(subs[i][0] + subs[i][1]);\", \"}\", \"} else {\", \"var i = str.indexOf(substr);\", \"if (i !== -1) {\", \"var inject = newSubstr(str.substr(i, substr.length), i, str);\", \"str = str.substring(0, i) + inject + str.substring(i + substr.length);\", \"}\", \"}\", \"return str;\", \"};\", \"})();\", \"\");\n  }, t.prototype.initBoolean = function (t) {\n    var e,\n        r = this;\n    e = function e(t) {\n      return t = Boolean(t), r.calledWithNew() ? (this.data = t, this) : t;\n    }, this.BOOLEAN = this.createNativeFunction(e, !0), this.setProperty(t, \"Boolean\", this.BOOLEAN);\n  }, t.prototype.initNumber = function (e) {\n    var r,\n        n = this;\n    r = function r(t) {\n      return t = Number(t), n.calledWithNew() ? (this.data = t, this) : t;\n    }, this.NUMBER = this.createNativeFunction(r, !0), this.setProperty(e, \"Number\", this.NUMBER);\n\n    for (var i = [\"MAX_VALUE\", \"MIN_VALUE\", \"NaN\", \"NEGATIVE_INFINITY\", \"POSITIVE_INFINITY\"], o = 0; o < i.length; o++) {\n      this.setProperty(this.NUMBER, i[o], Number[i[o]], t.READONLY_NONENUMERABLE_DESCRIPTOR);\n    }\n\n    r = function r(t) {\n      try {\n        return Number(this).toExponential(t);\n      } catch (t) {\n        n.throwException(n.ERROR, t.message);\n      }\n    }, this.setNativeFunctionPrototype(this.NUMBER, \"toExponential\", r), r = function r(t) {\n      try {\n        return Number(this).toFixed(t);\n      } catch (t) {\n        n.throwException(n.ERROR, t.message);\n      }\n    }, this.setNativeFunctionPrototype(this.NUMBER, \"toFixed\", r), r = function r(t) {\n      try {\n        return Number(this).toPrecision(t);\n      } catch (t) {\n        n.throwException(n.ERROR, t.message);\n      }\n    }, this.setNativeFunctionPrototype(this.NUMBER, \"toPrecision\", r), r = function r(t) {\n      try {\n        return Number(this).toString(t);\n      } catch (t) {\n        n.throwException(n.ERROR, t.message);\n      }\n    }, this.setNativeFunctionPrototype(this.NUMBER, \"toString\", r), r = function r(t, e) {\n      return t = t ? n.pseudoToNative(t) : void 0, e = e ? n.pseudoToNative(e) : void 0, Number(this).toLocaleString(t, e);\n    }, this.setNativeFunctionPrototype(this.NUMBER, \"toLocaleString\", r);\n  }, t.prototype.initDate = function (e) {\n    var r,\n        n = this;\n    r = function r(t, e) {\n      if (!n.calledWithNew()) return Date();\n      var r = [null].concat([].slice.call(arguments));\n      return this.data = new (Function.prototype.bind.apply(Date, r))(), this;\n    }, this.DATE = this.createNativeFunction(r, !0), this.setProperty(e, \"Date\", this.DATE), this.setProperty(this.DATE, \"now\", this.createNativeFunction(Date.now, !1), t.NONENUMERABLE_DESCRIPTOR), this.setProperty(this.DATE, \"parse\", this.createNativeFunction(Date.parse, !1), t.NONENUMERABLE_DESCRIPTOR), this.setProperty(this.DATE, \"UTC\", this.createNativeFunction(Date.UTC, !1), t.NONENUMERABLE_DESCRIPTOR);\n\n    for (var i = [\"getDate\", \"getDay\", \"getFullYear\", \"getHours\", \"getMilliseconds\", \"getMinutes\", \"getMonth\", \"getSeconds\", \"getTime\", \"getTimezoneOffset\", \"getUTCDate\", \"getUTCDay\", \"getUTCFullYear\", \"getUTCHours\", \"getUTCMilliseconds\", \"getUTCMinutes\", \"getUTCMonth\", \"getUTCSeconds\", \"getYear\", \"setDate\", \"setFullYear\", \"setHours\", \"setMilliseconds\", \"setMinutes\", \"setMonth\", \"setSeconds\", \"setTime\", \"setUTCDate\", \"setUTCFullYear\", \"setUTCHours\", \"setUTCMilliseconds\", \"setUTCMinutes\", \"setUTCMonth\", \"setUTCSeconds\", \"setYear\", \"toDateString\", \"toISOString\", \"toJSON\", \"toGMTString\", \"toLocaleDateString\", \"toLocaleString\", \"toLocaleTimeString\", \"toTimeString\", \"toUTCString\"], o = 0; o < i.length; o++) {\n      r = function (t) {\n        return function (e) {\n          for (var r = [], i = 0; i < arguments.length; i++) {\n            r[i] = n.pseudoToNative(arguments[i]);\n          }\n\n          return this.data[t].apply(this.data, r);\n        };\n      }(i[o]), this.setNativeFunctionPrototype(this.DATE, i[o], r);\n    }\n  }, t.prototype.initRegExp = function (e) {\n    var r,\n        n = this;\n    r = function r(t, e) {\n      if (n.calledWithNew()) var r = this;else r = n.createObjectProto(n.REGEXP_PROTO);\n      return t = t ? t.toString() : \"\", e = e ? e.toString() : \"\", n.populateRegExp(r, new RegExp(t, e)), r;\n    }, this.REGEXP = this.createNativeFunction(r, !0), this.REGEXP_PROTO = this.REGEXP.properties.prototype, this.setProperty(e, \"RegExp\", this.REGEXP), this.setProperty(this.REGEXP.properties.prototype, \"global\", void 0, t.READONLY_NONENUMERABLE_DESCRIPTOR), this.setProperty(this.REGEXP.properties.prototype, \"ignoreCase\", void 0, t.READONLY_NONENUMERABLE_DESCRIPTOR), this.setProperty(this.REGEXP.properties.prototype, \"multiline\", void 0, t.READONLY_NONENUMERABLE_DESCRIPTOR), this.setProperty(this.REGEXP.properties.prototype, \"source\", \"(?:)\", t.READONLY_NONENUMERABLE_DESCRIPTOR), r = function r(t) {\n      return this.data.test(t);\n    }, this.setNativeFunctionPrototype(this.REGEXP, \"test\", r), r = function r(t) {\n      t = t.toString(), this.data.lastIndex = Number(n.getProperty(this, \"lastIndex\"));\n      var e = this.data.exec(t);\n\n      if (n.setProperty(this, \"lastIndex\", this.data.lastIndex), e) {\n        for (var r = n.createObjectProto(n.ARRAY_PROTO), i = 0; i < e.length; i++) {\n          n.setProperty(r, i, e[i]);\n        }\n\n        return n.setProperty(r, \"index\", e.index), n.setProperty(r, \"input\", e.input), r;\n      }\n\n      return null;\n    }, this.setNativeFunctionPrototype(this.REGEXP, \"exec\", r);\n  }, t.prototype.initError = function (e) {\n    var r = this;\n    this.ERROR = this.createNativeFunction(function (e) {\n      if (r.calledWithNew()) var n = this;else n = r.createObject(r.ERROR);\n      return e && r.setProperty(n, \"message\", String(e), t.NONENUMERABLE_DESCRIPTOR), n;\n    }, !0), this.setProperty(e, \"Error\", this.ERROR), this.setProperty(this.ERROR.properties.prototype, \"message\", \"\", t.NONENUMERABLE_DESCRIPTOR), this.setProperty(this.ERROR.properties.prototype, \"name\", \"Error\", t.NONENUMERABLE_DESCRIPTOR);\n\n    var n = function n(_n) {\n      var i = r.createNativeFunction(function (e) {\n        if (r.calledWithNew()) var n = this;else n = r.createObject(i);\n        return e && r.setProperty(n, \"message\", String(e), t.NONENUMERABLE_DESCRIPTOR), n;\n      }, !0);\n      return r.setProperty(i, \"prototype\", r.createObject(r.ERROR)), r.setProperty(i.properties.prototype, \"name\", _n, t.NONENUMERABLE_DESCRIPTOR), r.setProperty(e, _n, i), i;\n    };\n\n    this.EVAL_ERROR = n(\"EvalError\"), this.RANGE_ERROR = n(\"RangeError\"), this.REFERENCE_ERROR = n(\"ReferenceError\"), this.SYNTAX_ERROR = n(\"SyntaxError\"), this.TYPE_ERROR = n(\"TypeError\"), this.URI_ERROR = n(\"URIError\");\n  }, t.prototype.initMath = function (e) {\n    var r = this.createObjectProto(this.OBJECT_PROTO);\n    this.setProperty(e, \"Math\", r);\n\n    for (var n = [\"E\", \"LN2\", \"LN10\", \"LOG2E\", \"LOG10E\", \"PI\", \"SQRT1_2\", \"SQRT2\"], i = 0; i < n.length; i++) {\n      this.setProperty(r, n[i], Math[n[i]], t.READONLY_NONENUMERABLE_DESCRIPTOR);\n    }\n\n    var o = [\"abs\", \"acos\", \"asin\", \"atan\", \"atan2\", \"ceil\", \"cos\", \"exp\", \"floor\", \"log\", \"max\", \"min\", \"pow\", \"random\", \"round\", \"sin\", \"sqrt\", \"tan\"];\n\n    for (i = 0; i < o.length; i++) {\n      this.setProperty(r, o[i], this.createNativeFunction(Math[o[i]], !1), t.NONENUMERABLE_DESCRIPTOR);\n    }\n  }, t.prototype.initJSON = function (t) {\n    var e = this,\n        r = e.createObjectProto(this.OBJECT_PROTO);\n    this.setProperty(t, \"JSON\", r);\n\n    var n = function n(t) {\n      try {\n        var r = JSON.parse(t.toString());\n      } catch (t) {\n        e.throwException(e.SYNTAX_ERROR, t.message);\n      }\n\n      return e.nativeToPseudo(r);\n    };\n\n    this.setProperty(r, \"parse\", this.createNativeFunction(n, !1)), n = function n(t) {\n      var r = e.pseudoToNative(t);\n\n      try {\n        var n = JSON.stringify(r);\n      } catch (t) {\n        e.throwException(e.TYPE_ERROR, t.message);\n      }\n\n      return n;\n    }, this.setProperty(r, \"stringify\", this.createNativeFunction(n, !1));\n  }, t.prototype.isa = function (t, e) {\n    if (null == t || !e) return !1;\n    var r = e.properties.prototype;\n    if (t === r) return !0;\n\n    for (var n = this.getPrototype(t); n;) {\n      if (n === r) return !0;\n      n = n.proto;\n    }\n\n    return !1;\n  }, t.legalArrayLength = function (t) {\n    var e = t >>> 0;\n    return e === Number(t) ? e : NaN;\n  }, t.legalArrayIndex = function (t) {\n    var e = t >>> 0;\n    return String(e) === String(t) && 4294967295 !== e ? e : NaN;\n  }, t.prototype.createObject = function (t) {\n    return this.createObjectProto(t && t.properties.prototype);\n  }, t.prototype.createObjectProto = function (t) {\n    var e = new Re(t);\n    return this.isa(e, this.FUNCTION) && (this.setProperty(e, \"prototype\", this.createObjectProto(this.OBJECT_PROTO || null)), e[\"class\"] = \"Function\"), this.isa(e, this.ARRAY) && (this.setProperty(e, \"length\", 0, {\n      configurable: !1,\n      enumerable: !1,\n      writable: !0\n    }), e[\"class\"] = \"Array\"), this.isa(e, this.ERROR) && (e[\"class\"] = \"Error\"), e;\n  }, t.prototype.populateRegExp = function (e, r) {\n    e.data = r, this.setProperty(e, \"lastIndex\", r.lastIndex, t.NONENUMERABLE_DESCRIPTOR), this.setProperty(e, \"source\", r.source, t.READONLY_NONENUMERABLE_DESCRIPTOR), this.setProperty(e, \"global\", r.global, t.READONLY_NONENUMERABLE_DESCRIPTOR), this.setProperty(e, \"ignoreCase\", r.ignoreCase, t.READONLY_NONENUMERABLE_DESCRIPTOR), this.setProperty(e, \"multiline\", r.multiline, t.READONLY_NONENUMERABLE_DESCRIPTOR);\n  }, t.prototype.createFunction = function (e, r) {\n    var n = this.createObjectProto(this.FUNCTION_PROTO);\n    return n.parentScope = r, n.node = e, this.setProperty(n, \"length\", n.node.params.length, t.READONLY_DESCRIPTOR), n;\n  }, t.prototype.createNativeFunction = function (e, r) {\n    var n = this.createObjectProto(this.FUNCTION_PROTO);\n    return n.nativeFunc = e, e.id = this.functionCounter_++, this.setProperty(n, \"length\", e.length, t.READONLY_DESCRIPTOR), r ? this.setProperty(n.properties.prototype, \"constructor\", n, t.NONENUMERABLE_DESCRIPTOR) : !1 === r && (n.illegalConstructor = !0, this.setProperty(n, \"prototype\", void 0)), n;\n  }, t.prototype.createAsyncFunction = function (e) {\n    var r = this.createObjectProto(this.FUNCTION_PROTO);\n    return r.asyncFunc = e, e.id = this.functionCounter_++, this.setProperty(r, \"length\", e.length, t.READONLY_DESCRIPTOR), r;\n  }, t.prototype.nativeToPseudo = function (t) {\n    if (\"boolean\" == typeof t || \"number\" == typeof t || \"string\" == typeof t || null == t) return t;\n\n    if (t instanceof RegExp) {\n      var e = this.createObjectProto(this.REGEXP_PROTO);\n      return this.populateRegExp(e, t), e;\n    }\n\n    if (t instanceof Function) {\n      var r = this;\n      return this.createNativeFunction(function () {\n        return r.nativeToPseudo(t.apply(r, Array.prototype.slice.call(arguments).map(function (t) {\n          return r.pseudoToNative(t);\n        })));\n      }, void 0);\n    }\n\n    var n;\n\n    if (Array.isArray(t)) {\n      n = this.createObjectProto(this.ARRAY_PROTO);\n\n      for (var i = 0; i < t.length; i++) {\n        i in t && this.setProperty(n, i, this.wrap ? this.wrap(t[i]) : this.nativeToPseudo(t[i]));\n      }\n    } else for (var o in n = this.createObjectProto(this.OBJECT_PROTO), t) {\n      this.setProperty(n, o, this.wrap ? this.wrap(t[i]) : this.nativeToPseudo(t[i]));\n    }\n\n    return n;\n  }, t.prototype.pseudoToNative = function (t, e) {\n    if (\"boolean\" == typeof t || \"number\" == typeof t || \"string\" == typeof t || null == t) return t;\n    if (this.isa(t, this.REGEXP)) return t.data;\n    var r,\n        n = e || {\n      pseudo: [],\n      \"native\": []\n    };\n    if (-1 !== (o = n.pseudo.indexOf(t))) return n[\"native\"][o];\n\n    if (n.pseudo.push(t), this.isa(t, this.ARRAY)) {\n      r = [], n[\"native\"].push(r);\n\n      for (var i = this.getProperty(t, \"length\"), o = 0; o < i; o++) {\n        this.hasProperty(t, o) && (r[o] = this.unwrap ? this.unwrap(this.getProperty(t, o), n) : this.pseudoToNative(this.getProperty(t, o), n));\n      }\n    } else {\n      if (t._native) return t._native;\n      var s;\n\n      for (var a in r = {}, n[\"native\"].push(r), t.properties) {\n        s = t.properties[a], r[a] = this.unwrap ? this.unwrap(s, n) : this.pseudoToNative(s, n);\n      }\n    }\n\n    return n.pseudo.pop(), n[\"native\"].pop(), r;\n  }, t.prototype.getPrototype = function (t) {\n    switch (_typeof(t)) {\n      case \"number\":\n        return this.NUMBER.properties.prototype;\n\n      case \"boolean\":\n        return this.BOOLEAN.properties.prototype;\n\n      case \"string\":\n        return this.STRING.properties.prototype;\n    }\n\n    return t ? t.proto : null;\n  }, t.prototype.getProperty = function (e, r) {\n    if (r = String(r), null == e && this.throwException(this.TYPE_ERROR, \"Cannot read property '\" + r + \"' of \" + e), \"length\" === r) {\n      if (this.isa(e, this.STRING)) return String(e).length;\n    } else if (r.charCodeAt(0) < 64 && this.isa(e, this.STRING)) {\n      var n = t.legalArrayIndex(r);\n      if (!isNaN(n) && n < String(e).length) return String(e)[n];\n    }\n\n    do {\n      var i = e;\n\n      if (i.properties && r in i.properties) {\n        var o = i.getter[r];\n        return o ? (o.isGetter = !0, o) : i.properties[r];\n      }\n\n      if (void 0 !== i._native && \"_\" !== r.charAt(0) && \"function\" != typeof i._native[r]) return this.wrap ? this.wrap(i._native[r]) : i._native[r];\n    } while (e = this.getPrototype(e));\n  }, t.prototype.hasProperty = function (e, r) {\n    if (!e.isObject) throw TypeError(\"Primitive data type has no properties\");\n    if (\"length\" === (r = String(r)) && this.isa(e, this.STRING)) return !0;\n\n    if (this.isa(e, this.STRING)) {\n      var n = t.legalArrayIndex(r);\n      if (!isNaN(n) && n < String(e).length) return !0;\n    }\n\n    do {\n      var i = e;\n      if (i.properties && r in i.properties) return !0;\n\n      if (void 0 !== i._native && \"_\" != r.charAt(0)) {\n        var o = _typeof(i._native[r]);\n\n        return \"function\" !== o && (\"undefined\" !== o || Ae(i._native.constructor, r));\n      }\n    } while (e = this.getPrototype(e));\n\n    return !1;\n  }, t.prototype.setProperty = function (e, r, n, i) {\n    r = String(r), null == e && this.throwException(this.TYPE_ERROR, \"Cannot set property '\" + r + \"' of \" + e), i && (\"get\" in i || \"set\" in i) && (\"value\" in i || \"writable\" in i) && this.throwException(this.TYPE_ERROR, \"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute\");\n    var o = !this.stateStack || this.getScope().strict;\n\n    if (e.isObject) {\n      if (this.isa(e, this.STRING)) {\n        var s = t.legalArrayIndex(r);\n        if (\"length\" === r || !isNaN(s) && s < String(e).length) return void (o && this.throwException(this.TYPE_ERROR, \"Cannot assign to read only property '\" + r + \"' of String '\" + e.data + \"'\"));\n      }\n\n      if (\"Array\" === e[\"class\"]) {\n        var a,\n            u = e.properties.length;\n\n        if (\"length\" === r) {\n          if (n = t.legalArrayLength(n), isNaN(n) && this.throwException(this.RANGE_ERROR, \"Invalid array length\"), n < u) for (a in e.properties) {\n            a = t.legalArrayIndex(a), !isNaN(a) && n <= a && delete e.properties[a];\n          }\n        } else isNaN(a = t.legalArrayIndex(r)) || (e.properties.length = Math.max(u, a + 1));\n      }\n\n      if (!e.preventExtensions || r in e.properties) {\n        if (i) {\n          \"get\" in i && (i.get ? e.getter[r] = i.get : delete e.getter[r]), \"set\" in i && (i.set ? e.setter[r] = i.set : delete e.setter[r]);\n          var c = {};\n          \"configurable\" in i && (c.configurable = i.configurable), \"enumerable\" in i && (c.enumerable = i.enumerable), \"writable\" in i && (c.writable = i.writable, delete e.getter[r], delete e.setter[r]), \"value\" in i ? (c.value = i.value, delete e.getter[r], delete e.setter[r]) : n !== ReferenceError && (c.value = n, delete e.getter[r], delete e.setter[r]);\n\n          try {\n            Object.defineProperty(e.properties, r, c);\n          } catch (t) {\n            this.throwException(this.TYPE_ERROR, \"Cannot redefine property: \" + r);\n          }\n        } else {\n          if (n === ReferenceError) throw ReferenceError(\"Value not specified.\");\n\n          if (void 0 !== e._native && \"_\" != r.charAt(0)) {\n            var l = _typeof(e._native[r]);\n\n            if (\"function\" !== l && (\"undefined\" !== l || Ae(e._native.constructor, r))) {\n              var p = this.unwrap ? this.unwrap(n) : n;\n              return void (e._native[r] = p);\n            }\n          }\n\n          for (var h = e; !(r in h.properties);) {\n            if (!(h = this.getPrototype(h))) {\n              h = e;\n              break;\n            }\n          }\n\n          if (h.setter && h.setter[r]) return h.setter[r];\n          if (h.getter && h.getter[r]) o && this.throwException(this.TYPE_ERROR, \"Cannot set property '\" + r + \"' of object '\" + e + \"' which only has a getter\");else try {\n            e.properties[r] = n;\n          } catch (t) {\n            o && this.throwException(this.TYPE_ERROR, \"Cannot assign to read only property '\" + r + \"' of object '\" + e + \"'\");\n          }\n        }\n      } else o && this.throwException(this.TYPE_ERROR, \"Can't add property '\" + r + \"', object is not extensible\");\n    } else o && this.throwException(this.TYPE_ERROR, \"Can't create property '\" + r + \"' on '\" + e + \"'\");\n  }, t.prototype.setNativeFunctionPrototype = function (e, r, n) {\n    this.setProperty(e.properties.prototype, r, this.createNativeFunction(n, !1), t.NONENUMERABLE_DESCRIPTOR);\n  }, t.prototype.getScope = function () {\n    var t = this.stateStack[this.stateStack.length - 1].scope;\n    if (!t) throw Error(\"No scope found.\");\n    return t;\n  }, t.prototype.createScope = function (t, e) {\n    var r = this.createObjectProto(null);\n    if (r.parentScope = e, e || this.initGlobalScope(r), this.populateScope_(t, r), r.strict = !1, e && e.strict) r.strict = !0;else {\n      var n = t.body && t.body[0];\n      n && n.expression && \"Literal\" === n.expression.type && \"use strict\" === n.expression.value && (r.strict = !0);\n    }\n    return r;\n  }, t.prototype.createSpecialScope = function (t, e) {\n    if (!t) throw Error(\"parentScope required\");\n    var r = e || this.createObjectProto(null);\n    return r.parentScope = t, r.strict = t.strict, r;\n  }, t.prototype.getValueFromScope = function (t) {\n    for (var e = this.getScope(); e && e !== this.global;) {\n      if (t in e.properties) return e.properties[t];\n      e = e.parentScope;\n    }\n\n    if (e === this.global && this.hasProperty(e, t)) return this.getProperty(e, t);\n    var r = this.stateStack[this.stateStack.length - 1].node;\n    \"UnaryExpression\" === r.type && \"typeof\" === r.operator || this.throwException(this.REFERENCE_ERROR, t + \" is not defined\");\n  }, t.prototype.setValueToScope = function (t, e) {\n    for (var r = this.getScope(), n = r.strict; r && r !== this.global;) {\n      if (t in r.properties) return void (r.properties[t] = e);\n      r = r.parentScope;\n    }\n\n    if (r === this.global && (!n || this.hasProperty(r, t))) return this.setProperty(r, t, e);\n    this.throwException(this.REFERENCE_ERROR, t + \" is not defined\");\n  }, t.prototype.populateScope_ = function (e, r) {\n    if (\"VariableDeclaration\" === e.type) for (var n = 0; n < e.declarations.length; n++) {\n      this.setProperty(r, e.declarations[n].id.name, void 0, t.VARIABLE_DESCRIPTOR);\n    } else {\n      if (\"FunctionDeclaration\" === e.type) return void this.setProperty(r, e.id.name, this.createFunction(e, r), t.VARIABLE_DESCRIPTOR);\n      if (\"FunctionExpression\" === e.type) return;\n      if (\"ExpressionStatement\" === e.type) return;\n    }\n    var i = e.constructor;\n\n    for (var o in e) {\n      var s = e[o];\n      if (s && \"object\" == _typeof(s)) if (Array.isArray(s)) for (n = 0; n < s.length; n++) {\n        s[n] && s[n].constructor === i && this.populateScope_(s[n], r);\n      } else s.constructor === i && this.populateScope_(s, r);\n    }\n  }, t.prototype.stripLocations_ = function (t, e, r) {\n    for (var n in e ? t.start = e : delete t.start, r ? t.end = r : delete t.end, t) {\n      if (t.hasOwnProperty(n)) {\n        var i = t[n];\n        i && \"object\" == _typeof(i) && this.stripLocations_(i, e, r);\n      }\n    }\n  }, t.prototype.calledWithNew = function () {\n    return this.stateStack[this.stateStack.length - 1].isConstructor;\n  }, t.prototype.getValue = function (e) {\n    return e[0] === t.SCOPE_REFERENCE ? this.getValueFromScope(e[1]) : this.getProperty(e[0], e[1]);\n  }, t.prototype.setValue = function (e, r) {\n    return e[0] === t.SCOPE_REFERENCE ? this.setValueToScope(e[1], r) : this.setProperty(e[0], e[1], r);\n  }, t.prototype.throwException = function (e, r) {\n    if (void 0 === r) var n = e;else n = this.createObject(e), this.setProperty(n, \"message\", r, t.NONENUMERABLE_DESCRIPTOR);\n    throw this.executeException(n), t.STEP_ERROR;\n  }, t.prototype.executeException = function (t) {\n    var e,\n        r = this.stateStack.slice();\n\n    do {\n      this.stateStack.pop();\n      var n = this.stateStack[this.stateStack.length - 1];\n      if (\"TryStatement\" === n.node.type) return void (n.throwValue = t);\n    } while (n && \"Program\" !== n.node.type);\n\n    if (this.isa(t, this.ERROR)) {\n      var i = {\n        EvalError: EvalError,\n        RangeError: RangeError,\n        ReferenceError: ReferenceError,\n        SyntaxError: SyntaxError,\n        TypeError: TypeError,\n        URIError: URIError\n      },\n          o = this.getProperty(t, \"name\").toString(),\n          s = this.getProperty(t, \"message\").valueOf();\n      e = (i[o] || Error)(s);\n    } else e = t.toString();\n\n    throw this.stateStack = r, e;\n  }, t.prototype.createGetter_ = function (t, e) {\n    var r = Array.isArray(e) ? e[0] : e,\n        n = new this.nodeConstructor();\n    n.type = \"CallExpression\";\n    var i = new xe(n, this.stateStack[this.stateStack.length - 1].scope);\n    return i.doneCallee_ = !0, i.funcThis_ = r, i.func_ = t, i.doneArgs_ = !0, i.arguments_ = [], i;\n  }, t.prototype.createSetter_ = function (t, e, r) {\n    var n = Array.isArray(e) ? e[0] : this.global,\n        i = new this.nodeConstructor();\n    i.type = \"CallExpression\";\n    var o = new xe(i, this.stateStack[this.stateStack.length - 1].scope);\n    return o.doneCallee_ = !0, o.funcThis_ = n, o.func_ = t, o.doneArgs_ = !0, o.arguments_ = [r], o;\n  }, t.prototype.stepArrayExpression = function (t, e, r) {\n    var n = r.elements,\n        i = e.n_ || 0;\n\n    for (e.array_ ? (this.setProperty(e.array_, i, e.value), i++) : (e.array_ = this.createObjectProto(this.ARRAY_PROTO), e.array_.properties.length = n.length); i < n.length;) {\n      if (n[i]) return e.n_ = i, new xe(n[i], e.scope);\n      i++;\n    }\n\n    t.pop(), t[t.length - 1].value = e.array_;\n  }, t.prototype.stepAssignmentExpression = function (t, e, r) {\n    if (!e.doneLeft_) {\n      e.doneLeft_ = !0;\n      var n = new xe(r.left, e.scope);\n      return n.components = !0, n;\n    }\n\n    if (!e.doneRight_) {\n      if (e.leftReference_ || (e.leftReference_ = e.value), e.doneGetter_ && (e.leftValue_ = e.value), !e.doneGetter_ && \"=\" !== r.operator) {\n        var i = this.getValue(e.leftReference_);\n\n        if (e.leftValue_ = i, i && \"object\" == _typeof(i) && i.isGetter) {\n          i.isGetter = !1, e.doneGetter_ = !0;\n          var o = i;\n          return this.createGetter_(o, e.leftReference_);\n        }\n      }\n\n      return e.doneRight_ = !0, new xe(r.right, e.scope);\n    }\n\n    if (e.doneSetter_) return t.pop(), void (t[t.length - 1].value = e.doneSetter_);\n    var s = e.leftValue_,\n        a = e.value;\n\n    switch (r.operator) {\n      case \"=\":\n        s = a;\n        break;\n\n      case \"+=\":\n        s += a;\n        break;\n\n      case \"-=\":\n        s -= a;\n        break;\n\n      case \"*=\":\n        s *= a;\n        break;\n\n      case \"/=\":\n        s /= a;\n        break;\n\n      case \"%=\":\n        s %= a;\n        break;\n\n      case \"<<=\":\n        s <<= a;\n        break;\n\n      case \">>=\":\n        s >>= a;\n        break;\n\n      case \">>>=\":\n        s >>>= a;\n        break;\n\n      case \"&=\":\n        s &= a;\n        break;\n\n      case \"^=\":\n        s ^= a;\n        break;\n\n      case \"|=\":\n        s |= a;\n        break;\n\n      default:\n        throw SyntaxError(\"Unknown assignment expression: \" + r.operator);\n    }\n\n    var u = this.setValue(e.leftReference_, s);\n    if (u) return e.doneSetter_ = s, this.createSetter_(u, e.leftReference_, s);\n    t.pop(), t[t.length - 1].value = s;\n  }, t.prototype.stepBinaryExpression = function (t, e, r) {\n    if (!e.doneLeft_) return e.doneLeft_ = !0, new xe(r.left, e.scope);\n    if (!e.doneRight_) return e.doneRight_ = !0, e.leftValue_ = e.value, new xe(r.right, e.scope);\n    t.pop();\n    var n,\n        i = e.leftValue_,\n        o = e.value;\n\n    switch (r.operator) {\n      case \"==\":\n        n = i == o;\n        break;\n\n      case \"!=\":\n        n = i != o;\n        break;\n\n      case \"===\":\n        n = i === o;\n        break;\n\n      case \"!==\":\n        n = i !== o;\n        break;\n\n      case \">\":\n        n = i > o;\n        break;\n\n      case \">=\":\n        n = i >= o;\n        break;\n\n      case \"<\":\n        n = i < o;\n        break;\n\n      case \"<=\":\n        n = i <= o;\n        break;\n\n      case \"+\":\n        n = i + o;\n        break;\n\n      case \"-\":\n        n = i - o;\n        break;\n\n      case \"*\":\n        n = i * o;\n        break;\n\n      case \"/\":\n        n = i / o;\n        break;\n\n      case \"%\":\n        n = i % o;\n        break;\n\n      case \"&\":\n        n = i & o;\n        break;\n\n      case \"|\":\n        n = i | o;\n        break;\n\n      case \"^\":\n        n = i ^ o;\n        break;\n\n      case \"<<\":\n        n = i << o;\n        break;\n\n      case \">>\":\n        n = i >> o;\n        break;\n\n      case \">>>\":\n        n = i >>> o;\n        break;\n\n      case \"in\":\n        o && o.isObject || this.throwException(this.TYPE_ERROR, \"'in' expects an object, not '\" + o + \"'\"), n = this.hasProperty(o, i);\n        break;\n\n      case \"instanceof\":\n        this.isa(o, this.FUNCTION) || this.throwException(this.TYPE_ERROR, \"Right-hand side of instanceof is not an object\"), n = !!i.isObject && this.isa(i, o);\n        break;\n\n      default:\n        throw SyntaxError(\"Unknown binary operator: \" + r.operator);\n    }\n\n    t[t.length - 1].value = n;\n  }, t.prototype.stepBlockStatement = function (t, e, r) {\n    var n = e.n_ || 0,\n        i = r.body[n];\n    if (i) return e.n_ = n + 1, new xe(i, e.scope);\n    t.pop();\n  }, t.prototype.stepBreakStatement = function (t, e, r) {\n    t.pop();\n    var n = null;\n\n    for (r.label && (n = r.label.name); e && \"CallExpression\" !== e.node.type && \"NewExpression\" !== e.node.type;) {\n      if (n) {\n        if (e.labels && -1 !== e.labels.indexOf(n)) return;\n      } else if (e.isLoop || e.isSwitch) return;\n\n      e = t.pop();\n    }\n\n    throw SyntaxError(\"Illegal break statement\");\n  }, t.prototype.stepCallExpression = function (e, r, n) {\n    if (!r.doneCallee_) {\n      r.doneCallee_ = 1;\n      var i = new xe(n.callee, r.scope);\n      return i.components = !0, i;\n    }\n\n    if (1 === r.doneCallee_) {\n      r.doneCallee_ = 2;\n      var o = r.value;\n\n      if (Array.isArray(o)) {\n        if (r.func_ = this.getValue(o), o[0] !== t.SCOPE_REFERENCE && (r.funcThis_ = o[0]), (o = r.func_) && \"object\" == _typeof(o) && o.isGetter) return o.isGetter = !1, r.doneCallee_ = 1, this.createGetter_(o, r.value);\n      } else r.func_ = o;\n\n      r.arguments_ = [], r.n_ = 0;\n    }\n\n    if (o = r.func_, !r.doneArgs_) {\n      if (0 !== r.n_ && r.arguments_.push(r.value), n.arguments[r.n_]) return new xe(n.arguments[r.n_++], r.scope);\n      \"NewExpression\" === n.type ? (o.illegalConstructor && this.throwException(this.TYPE_ERROR, o + \" is not a constructor\"), r.funcThis_ = this.createObject(o), r.isConstructor = !0) : void 0 === r.funcThis_ && (r.funcThis_ = r.scope.strict ? void 0 : this.global), r.doneArgs_ = !0;\n    }\n\n    if (r.doneExec_) e.pop(), r.isConstructor && \"object\" != _typeof(r.value) ? e[e.length - 1].value = r.funcThis_ : e[e.length - 1].value = r.value;else {\n      r.doneExec_ = !0, o && o.isObject || (console.log(\"non-function called\", o, r), this.throwException(this.TYPE_ERROR, o + \" is not a function\"));\n      var s = o.node;\n\n      if (s) {\n        for (var a = this.createScope(s.body, o.parentScope), u = 0; u < s.params.length; u++) {\n          var c = s.params[u].name,\n              l = r.arguments_.length > u ? r.arguments_[u] : void 0;\n          this.setProperty(a, c, l);\n        }\n\n        var p = this.createObjectProto(this.ARRAY_PROTO);\n\n        for (u = 0; u < r.arguments_.length; u++) {\n          this.setProperty(p, u, r.arguments_[u]);\n        }\n\n        this.setProperty(a, \"arguments\", p);\n        var h = s.id && s.id.name;\n        return h && this.setProperty(a, h, o), this.setProperty(a, \"this\", r.funcThis_, t.READONLY_DESCRIPTOR), r.value = void 0, new xe(s.body, a);\n      }\n\n      if (o.eval) {\n        var d = r.arguments_[0];\n\n        if (\"string\" == typeof d) {\n          try {\n            var f = t.acorn.parse(d.toString(), t.PARSE_OPTIONS);\n          } catch (t) {\n            this.throwException(this.SYNTAX_ERROR, \"Invalid code: \" + t.message);\n          }\n\n          var y = new this.nodeConstructor();\n          return y.type = \"EvalProgram_\", y.body = f.body, this.stripLocations_(y, n.start, n.end), (a = r.scope).strict ? a = this.createScope(f, a) : this.populateScope_(f, a), this.value = void 0, new xe(y, a);\n        }\n\n        r.value = d;\n      } else if (o.nativeFunc) void 0 !== r.funcThis_ && void 0 !== r.funcThis_._native ? r.value = o.nativeFunc.call(r.funcThis_, r.arguments_) : r.value = o.nativeFunc.apply(r.funcThis_, r.arguments_);else {\n        if (o.asyncFunc) {\n          var g = this,\n              v = r.arguments_.concat(function (t) {\n            r.value = t, g.paused_ = !1;\n          });\n          return this.paused_ = !0, void o.asyncFunc.apply(r.funcThis_, v);\n        }\n\n        this.throwException(this.TYPE_ERROR, o[\"class\"] + \" is not a function\");\n      }\n    }\n  }, t.prototype.stepCatchClause = function (t, e, r) {\n    if (!e.done_) {\n      e.done_ = !0;\n      var n = this.createSpecialScope(e.scope);\n      return this.setProperty(n, r.param.name, e.throwValue), new xe(r.body, n);\n    }\n\n    t.pop();\n  }, t.prototype.stepConditionalExpression = function (t, e, r) {\n    var n = e.mode_ || 0;\n    if (0 === n) return e.mode_ = 1, new xe(r.test, e.scope);\n\n    if (1 === n) {\n      e.mode_ = 2;\n      var i = Boolean(e.value);\n      if (i && r.consequent) return new xe(r.consequent, e.scope);\n      if (!i && r.alternate) return new xe(r.alternate, e.scope);\n      this.value = void 0;\n    }\n\n    t.pop(), \"ConditionalExpression\" === r.type && (t[t.length - 1].value = e.value);\n  }, t.prototype.stepContinueStatement = function (t, e, r) {\n    t.pop();\n    var n = null;\n\n    for (r.label && (n = r.label.name), e = t[t.length - 1]; e && \"CallExpression\" !== e.node.type && \"NewExpression\" !== e.node.type;) {\n      if (e.isLoop && (!n || e.labels && -1 !== e.labels.indexOf(n))) return;\n      t.pop(), e = t[t.length - 1];\n    }\n\n    throw SyntaxError(\"Illegal continue statement\");\n  }, t.prototype.stepDebuggerStatement = function (t, e, r) {\n    t.pop();\n  }, t.prototype.stepDoWhileStatement = function (t, e, r) {\n    if (\"DoWhileStatement\" === r.type && void 0 === e.test_ && (e.value = !0, e.test_ = !0), !e.test_) return e.test_ = !0, new xe(r.test, e.scope);\n\n    if (e.value) {\n      if (r.body) return e.test_ = !1, e.isLoop = !0, new xe(r.body, e.scope);\n    } else t.pop();\n  }, t.prototype.stepEmptyStatement = function (t, e, r) {\n    t.pop();\n  }, t.prototype.stepEvalProgram_ = function (t, e, r) {\n    var n = e.n_ || 0,\n        i = r.body[n];\n    if (i) return e.n_ = n + 1, new xe(i, e.scope);\n    t.pop(), t[t.length - 1].value = this.value;\n  }, t.prototype.stepExpressionStatement = function (t, e, r) {\n    if (!e.done_) return e.done_ = !0, new xe(r.expression, e.scope);\n    t.pop(), this.value = e.value;\n  }, t.prototype.stepForInStatement = function (e, r, n) {\n    if (!r.doneInit_ && (r.doneInit_ = !0, n.left.declarations && n.left.declarations[0].init)) return r.scope.strict && this.throwException(this.SYNTAX_ERROR, \"for-in loop variable declaration may not have an initializer.\"), new xe(n.left, r.scope);\n    if (!r.doneObject_) return r.doneObject_ = !0, r.variable_ || (r.variable_ = r.value), new xe(n.right, r.scope);\n\n    if (r.isLoop || (r.isLoop = !0, r.object_ = r.value, r.visited_ = Object.create(null)), void 0 === r.name_) {\n      t: do {\n        if (r.object_ && r.object_.isObject) {\n          r.props_ || (r.props_ = Object.getOwnPropertyNames(r.object_.properties));\n\n          do {\n            var i = r.props_.shift();\n          } while (i && (r.visited_[i] || !Object.prototype.hasOwnProperty.call(r.object_.properties, i)));\n\n          if (i && (r.visited_[i] = !0, Object.prototype.propertyIsEnumerable.call(r.object_.properties, i))) {\n            r.name_ = i;\n            break t;\n          }\n        } else if (null !== r.object_) {\n          r.props_ || (r.props_ = Object.getOwnPropertyNames(r.object_));\n\n          do {\n            i = r.props_.shift();\n          } while (i && r.visited_[i]);\n\n          if (i) {\n            r.visited_[i] = !0, r.name_ = i;\n            break t;\n          }\n        }\n\n        r.object_ = this.getPrototype(r.object_), r.props_ = null;\n      } while (null !== r.object_);\n\n      if (null === r.object_) return void e.pop();\n    }\n\n    if (!r.doneVariable_) {\n      r.doneVariable_ = !0;\n      var o = n.left;\n\n      if (\"VariableDeclaration\" !== o.type) {\n        r.variable_ = null;\n        var s = new xe(o, r.scope);\n        return s.components = !0, s;\n      }\n\n      r.variable_ = [t.SCOPE_REFERENCE, o.declarations[0].id.name];\n    }\n\n    if (r.variable_ || (r.variable_ = r.value), !r.doneSetter_) {\n      r.doneSetter_ = !0;\n      var a = r.name_,\n          u = this.setValue(r.variable_, a);\n      if (u) return this.createSetter_(u, r.variable_, a);\n    }\n\n    return r.name_ = void 0, r.doneVariable_ = !1, r.doneSetter_ = !1, n.body ? new xe(n.body, r.scope) : void 0;\n  }, t.prototype.stepForStatement = function (t, e, r) {\n    var n = e.mode_ || 0;\n\n    if (0 === n) {\n      if (e.mode_ = 1, r.init) return new xe(r.init, e.scope);\n    } else if (1 === n) {\n      if (e.mode_ = 2, r.test) return new xe(r.test, e.scope);\n    } else if (2 === n) {\n      if (e.mode_ = 3, !r.test || e.value) return e.isLoop = !0, new xe(r.body, e.scope);\n      t.pop();\n    } else if (3 === n && (e.mode_ = 1, r.update)) return new xe(r.update, e.scope);\n  }, t.prototype.stepFunctionDeclaration = function (t, e, r) {\n    t.pop();\n  }, t.prototype.stepFunctionExpression = function (t, e, r) {\n    t.pop(), t[t.length - 1].value = this.createFunction(r, e.scope);\n  }, t.prototype.stepIdentifier = function (e, r, n) {\n    if (e.pop(), r.components) e[e.length - 1].value = [t.SCOPE_REFERENCE, n.name];else {\n      var i = this.getValueFromScope(n.name);\n\n      if (i && \"object\" == _typeof(i) && i.isGetter) {\n        i.isGetter = !1;\n\n        for (var o = r.scope; !this.hasProperty(o, n.name);) {\n          o = o.parentScope;\n        }\n\n        var s = i;\n        return this.createGetter_(s, this.global);\n      }\n\n      e[e.length - 1].value = i;\n    }\n  }, t.prototype.stepIfStatement = function (t, e, r) {\n    return this.stepConditionalExpression(t, e, r);\n  }, t.prototype.stepLabeledStatement = function (t, e, r) {\n    t.pop();\n    var n = e.labels || [];\n    n.push(r.label.name);\n    var i = new xe(r.body, e.scope);\n    return i.labels = n, i;\n  }, t.prototype.stepLiteral = function (t, e, r) {\n    t.pop();\n    var n = r.value;\n\n    if (n instanceof RegExp) {\n      var i = this.createObjectProto(this.REGEXP_PROTO);\n      this.populateRegExp(i, n), n = i;\n    }\n\n    t[t.length - 1].value = n;\n  }, t.prototype.stepLogicalExpression = function (t, e, r) {\n    if (\"&&\" !== r.operator && \"||\" !== r.operator) throw SyntaxError(\"Unknown logical operator: \" + r.operator);\n    if (!e.doneLeft_) return e.doneLeft_ = !0, new xe(r.left, e.scope);\n    if (e.doneRight_) t.pop(), t[t.length - 1].value = e.value;else {\n      if (!(\"&&\" === r.operator && !e.value || \"||\" === r.operator && e.value)) return e.doneRight_ = !0, new xe(r.right, e.scope);\n      t.pop(), t[t.length - 1].value = e.value;\n    }\n  }, t.prototype.stepMemberExpression = function (t, e, r) {\n    if (!e.doneObject_) return e.doneObject_ = !0, new xe(r.object, e.scope);\n    var n;\n\n    if (r.computed) {\n      if (!e.doneProperty_) return e.object_ = e.value, e.doneProperty_ = !0, new xe(r.property, e.scope);\n      n = e.value;\n    } else e.object_ = e.value, n = r.property.name;\n\n    if (t.pop(), e.components) t[t.length - 1].value = [e.object_, n];else {\n      var i = this.getProperty(e.object_, n);\n\n      if (i && \"object\" == _typeof(i) && i.isGetter) {\n        i.isGetter = !1;\n        var o = i;\n        return this.createGetter_(o, e.object_);\n      }\n\n      t[t.length - 1].value = i;\n    }\n  }, t.prototype.stepNewExpression = function (t, e, r) {\n    return this.stepCallExpression(t, e, r);\n  }, t.prototype.stepObjectExpression = function (t, e, r) {\n    var n = e.n_ || 0,\n        i = r.properties[n];\n\n    if (e.object_) {\n      var o = i.key;\n      if (\"Identifier\" === o.type) var s = o.name;else {\n        if (\"Literal\" !== o.type) throw SyntaxError(\"Unknown object structure: \" + o.type);\n        s = o.value;\n      }\n      e.properties_[s] || (e.properties_[s] = {}), e.properties_[s][i.kind] = e.value, e.n_ = ++n, i = r.properties[n];\n    } else e.object_ = this.createObjectProto(this.OBJECT_PROTO), e.properties_ = Object.create(null);\n\n    if (i) return new xe(i.value, e.scope);\n\n    for (var a in e.properties_) {\n      var u = e.properties_[a];\n\n      if (\"get\" in u || \"set\" in u) {\n        var c = {\n          configurable: !0,\n          enumerable: !0,\n          get: u.get,\n          set: u.set\n        };\n        this.setProperty(e.object_, a, null, c);\n      } else this.setProperty(e.object_, a, u.init);\n    }\n\n    t.pop(), t[t.length - 1].value = e.object_;\n  }, t.prototype.stepProgram = function (t, e, r) {\n    var n = e.n_ || 0,\n        i = r.body[n];\n    if (i) return e.done = !1, e.n_ = n + 1, new xe(i, e.scope);\n    e.done = !0;\n  }, t.prototype.stepReturnStatement = function (t, e, r) {\n    if (r.argument && !e.done_) return e.done_ = !0, new xe(r.argument, e.scope);\n    var n = e.value,\n        i = t.length - 1;\n\n    for (e = t[i]; \"CallExpression\" !== e.node.type && \"NewExpression\" !== e.node.type;) {\n      if (\"TryStatement\" !== e.node.type && t.splice(i, 1), --i < 0) throw SyntaxError(\"Illegal return statement\");\n      e = t[i];\n    }\n\n    e.value = n;\n  }, t.prototype.stepSequenceExpression = function (t, e, r) {\n    var n = e.n_ || 0,\n        i = r.expressions[n];\n    if (i) return e.n_ = n + 1, new xe(i, e.scope);\n    t.pop(), t[t.length - 1].value = e.value;\n  }, t.prototype.stepSwitchStatement = function (t, e, r) {\n    if (!e.test_) return e.test_ = 1, new xe(r.discriminant, e.scope);\n\n    for (1 === e.test_ && (e.test_ = 2, e.switchValue_ = e.value);;) {\n      var n = e.index_ || 0,\n          i = r.cases[n];\n      if (e.matched_ || !i || i.test) {\n        if (i || e.matched_ || !e.defaultCase_) {\n          if (!i) return void t.pop();\n          if (!e.matched_ && !e.tested_ && i.test) return e.tested_ = !0, new xe(i.test, e.scope);\n\n          if (e.matched_ || e.value === e.switchValue_) {\n            e.matched_ = !0;\n            var o = e.n_ || 0;\n            if (i.consequent[o]) return e.isSwitch = !0, e.n_ = o + 1, new xe(i.consequent[o], e.scope);\n          }\n\n          e.tested_ = !1, e.n_ = 0, e.index_ = n + 1;\n        } else e.matched_ = !0, e.index_ = e.defaultCase_;\n      } else e.defaultCase_ = n, e.index_ = n + 1;\n    }\n  }, t.prototype.stepThisExpression = function (t, e, r) {\n    t.pop(), t[t.length - 1].value = this.getValueFromScope(\"this\");\n  }, t.prototype.stepThrowStatement = function (t, e, r) {\n    if (!e.done_) return e.done_ = !0, new xe(r.argument, e.scope);\n    this.throwException(e.value);\n  }, t.prototype.stepTryStatement = function (t, e, r) {\n    if (!e.doneBlock_) return e.doneBlock_ = !0, new xe(r.block, e.scope);\n\n    if (e.throwValue && !e.doneHandler_ && r.handler) {\n      e.doneHandler_ = !0;\n      var n = new xe(r.handler, e.scope);\n      return n.throwValue = e.throwValue, e.throwValue = null, n;\n    }\n\n    if (!e.doneFinalizer_ && r.finalizer) return e.doneFinalizer_ = !0, new xe(r.finalizer, e.scope);\n    e.throwValue ? this.executeException(e.throwValue) : t.pop();\n  }, t.prototype.stepUnaryExpression = function (e, r, n) {\n    if (!r.done_) {\n      r.done_ = !0;\n      var i = new xe(n.argument, r.scope);\n      return i.components = \"delete\" === n.operator, i;\n    }\n\n    e.pop();\n    var o = r.value;\n    if (\"-\" === n.operator) o = -o;else if (\"+\" === n.operator) o = +o;else if (\"!\" === n.operator) o = !o;else if (\"~\" === n.operator) o = ~o;else if (\"delete\" === n.operator) {\n      var s = !0;\n\n      if (Array.isArray(o)) {\n        var a = o[0];\n        a === t.SCOPE_REFERENCE && (a = r.scope);\n        var u = String(o[1]);\n\n        try {\n          delete a.properties[u];\n        } catch (t) {\n          r.scope.strict ? this.throwException(this.TYPE_ERROR, \"Cannot delete property '\" + u + \"' of '\" + a + \"'\") : s = !1;\n        }\n      }\n\n      o = s;\n    } else if (\"typeof\" === n.operator) o = o && \"Function\" === o[\"class\"] ? \"function\" : _typeof(o);else {\n      if (\"void\" !== n.operator) throw SyntaxError(\"Unknown unary operator: \" + n.operator);\n      o = void 0;\n    }\n    e[e.length - 1].value = o;\n  }, t.prototype.stepUpdateExpression = function (t, e, r) {\n    if (!e.doneLeft_) {\n      e.doneLeft_ = !0;\n      var n = new xe(r.argument, e.scope);\n      return n.components = !0, n;\n    }\n\n    if (e.leftSide_ || (e.leftSide_ = e.value), e.doneGetter_ && (e.leftValue_ = e.value), !e.doneGetter_) {\n      var i = this.getValue(e.leftSide_);\n\n      if (e.leftValue_ = i, i && \"object\" == _typeof(i) && i.isGetter) {\n        i.isGetter = !1, e.doneGetter_ = !0;\n        var o = i;\n        return this.createGetter_(o, e.leftSide_);\n      }\n    }\n\n    if (e.doneSetter_) return t.pop(), void (t[t.length - 1].value = e.doneSetter_);\n    var s;\n    if (i = Number(e.leftValue_), \"++\" === r.operator) s = i + 1;else {\n      if (\"--\" !== r.operator) throw SyntaxError(\"Unknown update expression: \" + r.operator);\n      s = i - 1;\n    }\n    var a = r.prefix ? s : i,\n        u = this.setValue(e.leftSide_, s);\n    if (u) return e.doneSetter_ = a, this.createSetter_(u, e.leftSide_, s);\n    t.pop(), t[t.length - 1].value = a;\n  }, t.prototype.stepVariableDeclaration = function (t, e, r) {\n    var n = r.declarations,\n        i = e.n_ || 0,\n        o = n[i];\n\n    for (e.init_ && o && (this.setValueToScope(o.id.name, e.value), e.init_ = !1, o = n[++i]); o;) {\n      if (o.init) return e.n_ = i, e.init_ = !0, new xe(o.init, e.scope);\n      o = n[++i];\n    }\n\n    t.pop();\n  }, t.prototype.stepWithStatement = function (t, e, r) {\n    if (!e.doneObject_) return e.doneObject_ = !0, new xe(r.object, e.scope);\n\n    if (!e.doneBody_) {\n      e.doneBody_ = !0;\n      var n = this.createSpecialScope(e.scope, e.value);\n      return new xe(r.body, n);\n    }\n\n    t.pop();\n  }, t.prototype.stepWhileStatement = function (t, e, r) {\n    return this.stepDoWhileStatement(t, e, r);\n  }, t.PARSE_OPTIONS = {\n    ecmaVersion: 5\n  }, t.READONLY_DESCRIPTOR = {\n    configurable: !0,\n    enumerable: !0,\n    writable: !1\n  }, t.NONENUMERABLE_DESCRIPTOR = {\n    configurable: !0,\n    enumerable: !1,\n    writable: !0\n  }, t.READONLY_NONENUMERABLE_DESCRIPTOR = {\n    configurable: !0,\n    enumerable: !1,\n    writable: !1\n  }, t.VARIABLE_DESCRIPTOR = {\n    configurable: !1,\n    enumerable: !0,\n    writable: !0\n  }, t.STEP_ERROR = {}, t.SCOPE_REFERENCE = {}, t.toStringCycles_ = [], t;\n}(),\n    Re = function () {\n  function t(t) {\n    this.proto = null, this.isObject = !0, this[\"class\"] = \"Object\", this.data = null, this._native = void 0, this.getter = Object.create(null), this.setter = Object.create(null), this.properties = Object.create(null), this.proto = t;\n  }\n\n  return t.prototype.toString = function () {\n    if (\"Array\" === this[\"class\"]) {\n      (n = Se.toStringCycles_).push(this);\n\n      try {\n        for (var t = [], e = 0; e < this.properties.length; e++) {\n          var r = this.properties[e];\n          t[e] = r && r.isObject && -1 !== n.indexOf(r) ? \"...\" : r;\n        }\n      } finally {\n        n.pop();\n      }\n\n      return t.join(\",\");\n    }\n\n    if (\"Error\" === this[\"class\"]) {\n      var n, i, o;\n      if (-1 !== (n = Se.toStringCycles_).indexOf(this)) return \"[object Error]\";\n      var s = this;\n\n      do {\n        if (\"name\" in s.properties) {\n          i = s.properties.name;\n          break;\n        }\n      } while (s = s.proto);\n\n      s = this;\n\n      do {\n        if (\"message\" in s.properties) {\n          o = s.properties.message;\n          break;\n        }\n      } while (s = s.proto);\n\n      n.push(this);\n\n      try {\n        i = i && i.toString(), o = o && o.toString();\n      } finally {\n        n.pop();\n      }\n\n      return o ? i + \": \" + o : String(i);\n    }\n\n    return null !== this.data ? String(this.data) : \"[object \" + this[\"class\"] + \"]\";\n  }, t.prototype.valueOf = function () {\n    return void 0 === this.data || null === this.data || this.data instanceof RegExp ? this : this.data instanceof Date ? this.data.valueOf() : this.data;\n  }, t;\n}(),\n    xe = function xe(t, e) {\n  this.node = t, this.scope = e;\n},\n    Ae = function Ae(t, e) {\n  for (var r = t; r && r.prototype;) {\n    if (Object.getOwnPropertyNames(r.prototype).indexOf(e) >= 0) return !0;\n    r = Object.getPrototypeOf(r);\n  }\n\n  return !1;\n};\n\nSe.Object = Re, Se.State = xe;\n\ntry {\n  Se.acorn = (self || global).acorn;\n} catch (t) {}\n\nfunction Ce(t, e) {\n  var r = {},\n      n = st.parse(t, {\n    locations: !0,\n    onComment: function onComment(t, e, n, i, o, s) {\n      r[s.line] = e;\n    }\n  });\n  if (\"Program\" !== n.type || 1 !== n.body.length || \"FunctionDeclaration\" !== n.body[0].type) throw new Error(\"this function does not follow the definition rule.\");\n  var i = n.body[0].body.body,\n      o = [],\n      s = [];\n  return i.forEach(function (t) {\n    if (\"ExpressionStatement\" === t.type) {\n      var n = t.expression;\n\n      if (\"AssignmentExpression\" === n.type && \"=\" === n.operator && \"MemberExpression\" === n.left.type && \"ThisExpression\" === n.left.object.type && \"Identifier\" === n.left.property.type) {\n        for (var i = [], a = n.loc.start.line - 1; a >= 0 && void 0 !== r[a]; a--) {\n          i.push(r[a]);\n        }\n\n        if (!(i.length <= 0)) {\n          var u = n.left.property.name;\n\n          if (!(Array.isArray(e) && e.indexOf(u) >= 0) && \"FunctionExpression\" !== n.right.type) {\n            var c = function (t, e, r) {\n              var n = {\n                name: t,\n                title: {},\n                className: null,\n                proposed: !1,\n                initialValue: null\n              };\n              if (e.forEach(function (t) {\n                var e = t.indexOf(\"@ui \");\n                if (e >= 0) n.description = t.substring(e + \"@ui \".length).trim();else {\n                  var r = t.indexOf(\"@title \");\n\n                  if (r >= 0) {\n                    var i = t.substring(r + \"@title \".length).trim();\n                    0 === i.indexOf(\"@ja \") ? n.title.ja = i.substring(\"@ja \".length).trim() : n.title[\"default\"] = i;\n                  } else if (t.indexOf(\"@proposed\") >= 0) n.proposed = !0;else {\n                    var o = t.indexOf(\"@comment \");\n\n                    if (o >= 0) {\n                      var s = t.substring(o + \"@comment \".length).trim();\n                      return n.comment || (n.comment = {}), void (0 === s.indexOf(\"@ja \") ? n.comment.ja = s.substring(\"@ja \".length).trim() : n.comment[\"default\"] = s);\n                    }\n                  }\n                }\n              }), !n.description && !n.comment) return null;\n              if (n.proposed || n.comment) return n;\n              var i = n.description.indexOf(\"(\"),\n                  o = n.description.indexOf(\")\", i);\n\n              if (!(i < 0 || o < 0)) {\n                n.className = n.description.substr(0, i);\n\n                try {\n                  var s = new Se(\"[\" + n.description.substr(i + 1, o - i - 1) + \"]\"),\n                      a = Date.now();\n\n                  for (s.unwrap = null, s.wrap = null; s.step() && !(Date.now() - a > 100);) {\n                    ;\n                  }\n\n                  n.params = s.pseudoToNative(s.value);\n                } catch (t) {}\n\n                return n.params || (n.params = []), n;\n              }\n            }(u, i);\n\n            s.push(n), c && o.push(c);\n          }\n        }\n      }\n    }\n  }), {\n    widgets: o,\n    fields: s,\n    ast: n\n  };\n}\n\nfunction Ne(t, e) {\n  if (void 0 === e && (e = -1), !t) return {\n    dependencyAtCursor: null,\n    dependencies: []\n  };\n\n  for (var r = [], n = null, i = (\"string\" == typeof t ? st.parse(t) : t).body[0].body.body.slice(0); i.length > 0;) {\n    var o = i.shift();\n    if (null != o) if (\"CallExpression\" !== o.type) o.expression && i.push(o.expression), o.object && i.push(o.object), o.property && i.push(o.property), o.name && \"string\" != typeof name && i.push(o.name), o.left && i.push(o.left), o.right && i.push(o.right), o.id && i.push(o.id), o.init && i.push(o.init), o.callee && i.push(o.callee), o.body && Array.isArray(o.body) && i.push.apply(i, o.body), o.declarations && Array.isArray(o.declarations) && i.push.apply(i, o.declarations), o.arguments && Array.isArray(o.arguments) && i.push.apply(i, o.arguments), o.params && Array.isArray(o.params) && i.push.apply(i, o.params);else if (o.callee.name && \"require\" === o.callee.name) {\n      var s = o.arguments;\n\n      if (s && Array.isArray(s) && 1 === s.length) {\n        var a = s[0];\n\n        if (\"Literal\" === a.type) {\n          var u = a.value;\n          r.push(u), o.start && o.end && o.start <= e && o.end >= e && (n = u);\n        }\n      }\n    }\n  }\n\n  return {\n    dependencyAtCursor: n,\n    dependencies: r\n  };\n}\n\nfunction ke(t, e) {\n  if (\"object\" != _typeof(t) || null === t) return t;\n\n  if (t.type && e[t.type]) {\n    var r;\n\n    if (\"Color\" === t.type) {\n      var n = new z();\n      n.r = Number(t.value.r), n.g = Number(t.value.g), n.b = Number(t.value.b), n.a = Number(t.value.a), r = n;\n    } else {\n      for (var i = new e[t.type](), o = 0, s = Object.keys(t.value); o < s.length; o++) {\n        var a = s[o];\n        i[a] = t.value[a];\n      }\n\n      r = i;\n    }\n\n    return r;\n  }\n}\n\nfunction Ie(t) {\n  if (void 0 !== t && \"function\" != typeof t) {\n    if (\"object\" != _typeof(t)) return t;\n    if (null === t) return null;\n    if (t instanceof z) return {\n      type: \"Color\",\n      value: {\n        r: t.r,\n        g: t.g,\n        b: t.b,\n        a: t.a\n      }\n    };\n    throw new Error();\n  }\n}\n\nfunction je(t) {\n  return \"boolean\" == typeof t || \"number\" == typeof t || \"string\" == typeof t || null == t;\n}\n\nSe.acorn = st, Se.acorn = st;\n\nvar Le = {\n  type: \"ExpressionStatement\",\n  start: null,\n  end: null,\n  expression: {\n    type: \"CallExpression\",\n    start: null,\n    end: null,\n    expression: null,\n    arguments: null\n  },\n  arguments: null\n},\n    Ue = function () {\n  function t(t, e, r) {\n    this.verbose = !1, this.wrapperTable = t, this.ignoredPropNames = e, this.isGraphics = r, this.initialize();\n  }\n\n  return t.prototype.initialize = function () {\n    var t = this,\n        e = new Se(\"\", function (e, r) {\n      t.globalScope = r;\n    });\n    this.interpreter = e, this.interpreter.wrap = function (e) {\n      return t.wrap(e);\n    }, this.interpreter.unwrap = function (e, r) {\n      return t.unwrap(e, r);\n    }, this.wrappers = {}, Object.keys(this.wrapperTable).forEach(function (e) {\n      return t.wrapClass(t.wrapperTable[e], e);\n    });\n  }, t.prototype.createGlobalFunction = function (t, e) {\n    var r,\n        n = this,\n        i = e.func,\n        o = e.raw,\n        s = e.isConstructor,\n        a = e.async,\n        u = function u() {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      var r = i(o ? t : t.map(function (e, r) {\n        return r < t.length - 1 || !a ? n.unwrap(e) : e;\n      }));\n      return o ? r : n.wrap(r);\n    };\n\n    r = a ? this.interpreter.createAsyncFunction(u) : this.interpreter.createNativeFunction(u, s), this.interpreter.setProperty(this.globalScope, t, r);\n  }, t.prototype.attachGetAssignedUnitMethod = function (t) {\n    var e = this,\n        r = this.interpreter.createNativeFunction(function () {\n      return e.wrap(t.assignedUnit);\n    });\n    this.interpreter.setProperty(t.templateInstance, \"getAssignedUnit\", r);\n  }, t.prototype.setSizeProperties = function (t, e, r) {\n    this.interpreter.setProperty(this.globalScope, \"width\", t), this.interpreter.setProperty(this.globalScope, \"height\", e), this.interpreter.setProperty(this.globalScope, \"margin\", this.interpreter.wrap(r));\n  }, t.prototype.setDurationProperty = function (t) {\n    this.interpreter.setProperty(this.globalScope, \"duration\", t);\n  }, t.prototype.setProperty = function (t, e, r) {\n    this.interpreter.setProperty(t, e, this.wrap(r));\n  }, t.prototype.getProperty = function (t, e) {\n    return this.unwrap(this.interpreter.getProperty(t, e));\n  }, t.prototype.getRawProperty = function (t, e) {\n    return this.interpreter.getProperty(t, e);\n  }, t.prototype.prepareRun = function (t) {\n    var e;\n    e = \"string\" == typeof t ? st.parse(t) : t;\n    var r = this.interpreter.createScope(e, this.globalScope);\n    return this.interpreter.stateStack = [{\n      node: e,\n      scope: r,\n      done: !1\n    }], r;\n  }, t.prototype.newStatementFor = function (t) {\n    return st.parse(\"new \" + t + \"();\");\n  }, t.prototype.prepareNewInstance = function (t, e) {\n    var r = this.interpreter.createScope(st.parse(\"\"), e);\n    return this.interpreter.stateStack = [{\n      node: t,\n      scope: r,\n      thisExpression: r\n    }], r;\n  }, t.prototype.exec = function (t, e, r, n) {\n    var i = this,\n        o = this.interpreter;\n    Le.expression.arguments = [];\n    var s = [];\n    return r.forEach(function (t) {\n      Le.expression.arguments.push(null), s.push(i.wrap(t));\n    }), o.stateStack = [{\n      node: {\n        type: \"Program\",\n        body: [Le]\n      },\n      scope: this.globalScope,\n      done: !0,\n      n_: 1\n    }, {\n      node: Le,\n      scope: this.globalScope,\n      done_: !0\n    }, {\n      node: Le.expression,\n      doneCallee_: 2,\n      doneArgs_: !0,\n      arguments_: s,\n      funcThis_: t,\n      func_: o.getProperty(t, e),\n      scope: t,\n      n_: s.length,\n      value: [t, e]\n    }], this.run(700, \"call a method (\" + t.className + \".\" + e + (n ? \" assigned to \" + n.toString() : \"\") + \")\");\n  }, t.prototype.run = function (t, e) {\n    var r = this.interpreter,\n        n = Date.now(),\n        i = !1;\n\n    try {\n      for (; r.step();) {\n        if (Date.now() - n > t) {\n          i = !0;\n          break;\n        }\n      }\n    } catch (o) {\n      throw this.verbose && console.log(r.stateStack), \"string\" == typeof o && (o = new Error(o)), r.stateStack.length > 0 && (o.node = r.stateStack[r.stateStack.length - 1].node), o;\n    }\n\n    if (i) {\n      var o = new Error(\"timeout: spent too long time (> \" + t + \"ms) to \" + e);\n      throw r.stateStack.length > 0 && (o.node = r.stateStack[0].node), o;\n    }\n\n    return this.interpreter.value;\n  }, t.prototype.getPrimitiveProperty = function (t, e) {\n    return \"object\" == _typeof(t) && \"object\" == _typeof(t.properties) && je(t.properties[e]) ? t.properties[e] : null;\n  }, t.prototype.cleanupProperties = function (t) {\n    for (var e in this.ignoredPropNames.forEach(function (e) {\n      void 0 !== t.properties[e] && delete t.properties[e];\n    }), t.properties) {\n      this.cleanupProperty(t.properties[e]) || delete t.properties[e];\n    }\n\n    return t.properties;\n  }, t.prototype.cleanupProperty = function (t) {\n    if (je(t)) return !0;\n    var e = t;\n    if (e._native) return !0;\n    var r = this.globalScope.properties;\n\n    if (e.parent === r.Array) {\n      for (var n = e.length, i = 0; i < e.length; i++) {\n        this.cleanupProperty(e.properties[i]) || (delete e.properties[i], n--);\n      }\n\n      return e.length = n, n > 0;\n    }\n\n    if (e.parent === r.Object) {\n      var o = !0;\n\n      for (var s in e.properties) {\n        this.cleanupProperty(e.properties[s]) ? o = !1 : delete e.properties[s];\n      }\n\n      return !o;\n    }\n\n    return !1;\n  }, t.prototype.restoreProperties = function (t, e) {\n    t.properties = _pt(_pt({}, t.properties), e);\n  }, t.prototype.wrap = function (t) {\n    if (\"object\" == _typeof(t) && null !== t && void 0 !== t.constructor && \"string\" == typeof t.constructor.className) {\n      var e = t.constructor.className,\n          r = this.wrappers[e];\n      if (void 0 === r) return;\n      var n = this.interpreter.createObject(r);\n      return n._native = t, n;\n    }\n\n    return this.verbose && (je(t) || Array.isArray(t) || console.log(\"wrap complex obj:\", String(t))), this.interpreter.nativeToPseudo(t);\n  }, t.prototype.unwrap = function (t, e) {\n    return \"object\" == _typeof(t) && null !== t && t._native ? t._native : this.interpreter.pseudoToNative(t, e);\n  }, t.prototype.wrapClass = function (t, e) {\n    this.verbose && console.log(\"--- wrapping \" + e + \" ---\"), t.className = e;\n    var r = this,\n        n = this.interpreter.createNativeFunction(function (e) {\n      var i, o;\n      if (i = r.interpreter.calledWithNew() ? this : r.interpreter.createObjectProto(n.properties.prototype), void 0 !== e) if (Array.isArray(e)) for (var s = 0; s < e.length; s++) {\n        o[s] = r.unwrap(e[s]);\n      } else o = r.unwrap(e);\n\n      if (t) {\n        var a = Object.create(t.prototype),\n            u = t.apply(a, [null].concat(o).splice(1));\n        i._native = null !== u && \"object\" == _typeof(u) ? u : a;\n      }\n\n      return i;\n    });\n    return this.interpreter.setProperty(this.globalScope, e, n), this.wrapStaticMembers(n, t), this.wrapInstanceMembers(n, t), this.wrappers[e] = n, n;\n  }, t.prototype.wrapStaticMembers = function (t, e) {\n    var r = this,\n        n = function n(_n2) {\n      var o = _n2;\n\n      if (i.interpreter.setProperty(t, _n2, ReferenceError, {\n        get: function get() {\n          return r.wrap(e[o]);\n        },\n        set: function set(t) {\n          return e[o] = r.unwrap(t);\n        }\n      }), i.verbose) {\n        var s = void 0;\n\n        try {\n          s = _typeof(e[o]);\n        } catch (t) {\n          s = \"not accessible\";\n        }\n\n        console.log(\"static \" + o + \" (\" + s + \")\");\n      }\n    },\n        i = this;\n\n    for (var o in e) {\n      n(o);\n    }\n  }, t.prototype.wrapInstanceMembers = function (t, e) {\n    for (var r, n = new e(), i = this.isGraphics(t), o = 0, s = ft(Object.keys(n), function (t) {\n      for (var e = t, r = []; e && e.prototype;) {\n        r = ft(r, Object.getOwnPropertyNames(e.prototype)), e = Object.getPrototypeOf(e);\n      }\n\n      return r;\n    }(e)).filter(function (t, e, r) {\n      return r.indexOf(t) === e;\n    }); o < s.length; o++) {\n      var a = s[o];\n\n      if (\"constructor\" !== a && !this.interpreter.hasProperty(t, a) && !this.interpreter.hasProperty(t.properties.prototype, a) && \"_\" !== a.charAt(0)) {\n        if (this.verbose) {\n          var u = void 0;\n\n          try {\n            u = _typeof(n[a]);\n          } catch (t) {\n            u = \"not accessible\";\n          }\n\n          r = a + \" (\" + u + \")\";\n        }\n\n        try {\n          if (\"function\" == typeof n[a]) {\n            var c;\n            c = i ? function (t, e) {\n              return function (r) {\n                var n;\n                return e.wrap((n = this._native)[t].apply(n, r.map(function (t) {\n                  var r = e.unwrap(t);\n                  return r instanceof z ? r.toString() : r;\n                })));\n              };\n            }(a, this) : function (t, e) {\n              return function (r) {\n                var n;\n                return e.wrap((n = this._native)[t].apply(n, r.map(function (t) {\n                  return e.unwrap(t);\n                })));\n              };\n            }(a, this), this.interpreter.setProperty(t.properties.prototype, a, this.interpreter.createNativeFunction(c)), this.verbose && (r += \" native method\");\n          }\n        } catch (t) {}\n\n        this.verbose && console.log(r);\n      }\n    }\n  }, t;\n}(),\n    Fe = {\n  Matrix2D: tt,\n  Point: et,\n  Color: z,\n  Font: W,\n  RenderingUnit: V,\n  TextUnit: Y,\n  Graphic: X,\n  Phrase: $,\n  Word: H,\n  Char: J,\n  Beat: Ot,\n  RepetitiveSegment: St\n},\n    Me = [\"headTime\", \"tailTime\", \"insomnia\"],\n    De = [\"animate\", \"getAssignedUnit\", \"name\", \"type\"],\n    Be = function () {\n  function t(t, e, r) {\n    this._emitter = null, this._player = null, this.interpreter = null, this.unsafeAcceleration = !1, this._verbose = !1, this.rawConsole = !1, this._player = t, this._emitter = e, this.unsafeAcceleration = r, this.loader = new Te(e, this.register.bind(this)), t.addListener({\n      onVideoReady: this.onVideoReady.bind(this)\n    });\n  }\n\n  return Object.defineProperty(t.prototype, \"verbose\", {\n    get: function get() {\n      return this._verbose;\n    },\n    set: function set(t) {\n      this._verbose = this.loader.verbose = t;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"ready\", {\n    get: function get() {\n      return !!this.interpreter;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"loaded\", {\n    get: function get() {\n      return this.loader.loaded;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.initialize = function () {\n    var t = this;\n\n    if (!this.ready) {\n      var r = function (t) {\n        var r = t.player,\n            n = t.ignoredPropNames,\n            i = t.rawConsole,\n            o = t.templateGetter,\n            s = r.graphics.wrapperTable,\n            a = new Ue(_pt(_pt({}, Fe), s), n, function (t) {\n          return r.graphics.isGraphics(t);\n        }),\n            u = {\n          require: {\n            func: function func(t) {\n              if (!(t.length < 1 || \"string\" != typeof t[0])) {\n                var e = t[0],\n                    r = o(e);\n                return null === r ? void 0 : r.functionDefinition;\n              }\n            },\n            raw: !0,\n            isConstructor: !0\n          },\n          print: {\n            func: function func(t) {\n              r.isEditing && console.log.apply(console, t);\n            },\n            raw: i\n          },\n          findChorus: {\n            func: function func(t) {\n              return t.length < 1 || \"number\" != typeof t[0] ? null : r.findChorus(t[0]);\n            }\n          },\n          findBeat: {\n            func: function func(t) {\n              return t.length < 1 || \"number\" != typeof t[0] ? null : r.findBeat(t[0]);\n            }\n          },\n          getVocalFrequency: {\n            func: function func(t) {\n              return t.length < 1 || \"number\" != typeof t[0] ? null : r.getVocalFrequency(t[0]);\n            }\n          },\n          getVocalAmplitude: {\n            func: function func(t) {\n              return t.length < 1 || \"number\" != typeof t[0] ? -1 : r.getVocalAmplitude(t[0]);\n            }\n          },\n          getMaxVocalAmplitude: {\n            func: function func(t) {\n              return r.getMaxVocalAmplitude();\n            }\n          },\n          getValenceArousal: {\n            func: function func(t) {\n              return t.length < 1 || \"number\" != typeof t[0] ? null : r.getValenceArousal(t[0]);\n            }\n          },\n          getMedianValenceArousal: {\n            func: function func(t) {\n              return r.getMedianValenceArousal();\n            }\n          }\n        };\n        Object.keys(e).forEach(function (t) {\n          a.setProperty(a.globalScope, t, e[t]), u[t] = {\n            value: e[t]\n          };\n        }), Object.keys(we).forEach(function (t) {\n          var e = we[t];\n          0 !== t.indexOf(\"get\") && (u[t] = {\n            func: e\n          });\n        });\n        var c = Object.keys(a.wrapperTable);\n        return c && c.forEach(function (t) {\n          return u[t] = {\n            cls: a.wrapperTable[t]\n          };\n        }), Object.keys(u).forEach(function (t) {\n          var e = u[t];\n          e.func ? a.createGlobalFunction(t, e) : e.value && a.setProperty(a.globalScope, t, e.value);\n        }), {\n          interpreter: a,\n          unsafeGlobalScope: u\n        };\n      }({\n        player: this._player,\n        ignoredPropNames: De,\n        rawConsole: this.rawConsole,\n        templateGetter: function templateGetter(e) {\n          return t.getByName(e, !0);\n        }\n      }),\n          n = r.interpreter,\n          i = r.unsafeGlobalScope;\n\n      this.unsafeGlobalScope = i, this.interpreter = n, this.onVideoReady(this._player.video);\n    }\n  }, t.prototype.getByName = function (t, e) {\n    return void 0 === e && (e = !1), this.loader.getByName(t, e);\n  }, t.prototype.getById = function (t) {\n    return this.loader.getById(t);\n  }, t.prototype.clear = function () {\n    this.loader.clear();\n  }, t.prototype.loadLatest = function (t) {\n    return void 0 === t && (t = 100), ht(this, void 0, void 0, function () {\n      return dt(this, function (e) {\n        return this.ready || this.initialize(), [2, this.loader.loadLatest(t)];\n      });\n    });\n  }, t.prototype.loadForVideo = function (t) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (e) {\n        return this.ready || this.initialize(), [2, this.loader.loadForVideo(t)];\n      });\n    });\n  }, t.prototype.loadByNames = function (t) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (e) {\n        return this.ready || this.initialize(), [2, this.loader.loadByNames(t)];\n      });\n    });\n  }, t.prototype.loadByName = function (t) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (e) {\n        return this.ready || this.initialize(), [2, this.loader.loadByName(t)];\n      });\n    });\n  }, t.prototype.loadById = function (t) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (e) {\n        return this.ready || this.initialize(), [2, this.loader.loadById(t)];\n      });\n    });\n  }, t.prototype.commit = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (r) {\n        return [2, this.loader.commit(t, e)];\n      });\n    });\n  }, t.prototype.register = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e,\n          r,\n          n,\n          i,\n          o = this;\n      return dt(this, function (s) {\n        switch (s.label) {\n          case 0:\n            if (!t) return [2, null];\n            if (!(e = this.createClass(t.script))) return [2, null];\n            r = Ne(e.ast).dependencies, s.label = 1;\n\n          case 1:\n            return s.trys.push([1, 3,, 4]), [4, Promise.all(r.map(function (t) {\n              var e = o.getByName(t);\n              return e ? Promise.resolve(e) : o.loadByName(t);\n            }))];\n\n          case 2:\n            return s.sent(), this.verbose && console.log(\"load dependencies for\", e.className, r), [3, 4];\n\n          case 3:\n            return n = s.sent(), this.verbose && console.error(\"failed loading dependencies for\", e.className, n), [3, 4];\n\n          case 4:\n            try {\n              if (!this.newRawInstance(e)) throw new Error(\"failed to create a template instance\");\n              return e.model = t, [2, this.registerClass(e)];\n            } catch (e) {\n              throw delete (i = _pt({}, t)).script, {\n                error: e.message,\n                stack: e.stack,\n                cause: i\n              };\n            }\n\n            return [2];\n        }\n      });\n    });\n  }, t.prototype.updateClassScript = function (t, e) {\n    var r = this.createClass(e);\n    return this.updateClass(t, r);\n  }, t.prototype.registerClass = function (t) {\n    if (!t) return null;\n\n    if (this.loader.loaded[t.className]) {\n      this.verbose && console.log(\"updating\", t.className, t.model.id);\n      var e = this.updateClass(this.loader.loaded[t.className], t);\n      return this.verbose && console.log(\"updated\", e.className, e.id), e;\n    }\n\n    return this.loader.loaded[t.className] = t, this.verbose && console.log(\"loaded\", t.className, t.model.id), t;\n  }, t.prototype.updateClass = function (t, e) {\n    var r = t,\n        n = e;\n    if (!n) return null;\n    if (r.model.script === n.model.script) return this.verbose && console.log(\"no diff for\", r.className), r;\n    var i = this.newRawInstance(n);\n    if (null === i) return null;\n\n    if (n.id < 0) {\n      var o = i.templateInstance,\n          s = n.model.script;\n      n.model = {\n        id: -1,\n        sourceId: -1,\n        className: n.className,\n        prettyName: o ? this.interpreter.getPrimitiveProperty(o, \"name\") : i.unsafeTemplateInstance.name,\n        type: o ? this.interpreter.getPrimitiveProperty(o, \"type\") : i.unsafeTemplateInstance.type,\n        script: s,\n        author: null,\n        originalAuthor: null,\n        createdDate: null\n      };\n    }\n\n    if (r.className !== n.className) {\n      var a = this.getByName(n.className);\n      if (!a) return n.cursor = r.cursor, this.loader.loaded[n.className] = n, this.verbose && console.log(\"create\", n.className), n;\n      r = a;\n    }\n\n    return r.newStatement = n.newStatement, r.widgets = n.widgets, r.scope = n.scope, r.functionDefinition = n.functionDefinition, r.newStatement = n.newStatement, r.unsafeConstructorGenerator = n.unsafeConstructorGenerator, r.ast = n.ast, r.cursor < 0 && (r.cursor = n.cursor), n.id >= 0 ? (this.verbose && console.log(\"replace\", n.className, r.id, n.id), r.model = n.model) : (this.verbose && console.log(\"update\", n.className, r.id, n.id), r.model.type = n.model.type, r.model.className = n.model.className, r.model.prettyName = n.model.prettyName, r.model.script = n.model.script, r.model.createdDate = null, r.id >= 0 && (r.model.sourceId = r.model.id, r.model.id = -1)), n = r, this.updateInstances(r.instances.slice(), n), this._emitter.onTemplateUpdate(n.className), n;\n  }, t.prototype.updateInstances = function (t, e) {\n    var r = this;\n    t.forEach(function (t) {\n      try {\n        r.updateInstance(t, e);\n      } catch (r) {\n        console.log(\"failed updating template for\", t.assignedUnit, \":\", e);\n      }\n    }), this._player.isPlaying || this._player.requestStageUpdate();\n  }, t.prototype.createClass = function (t) {\n    var e = this;\n    this.ready || this.initialize();\n    var r = new Ee();\n    r.model = {\n      id: -1,\n      sourceId: -1,\n      className: null,\n      prettyName: null,\n      type: 0,\n      script: t,\n      author: null,\n      originalAuthor: null,\n      createdDate: null\n    };\n    var n = Ce(t, De),\n        i = n.ast,\n        o = n.widgets;\n\n    if (r.ast = i, r.widgets = o, r.className = r.ast.body[0].id.name, r.scope = this.interpreter.prepareRun(r.ast), this.interpreter.run(1e3, \"to define \" + r.className), r.functionDefinition = this.interpreter.getRawProperty(r.scope, r.className), r.newStatement = this.interpreter.newStatementFor(r.className), this.unsafeAcceleration) {\n      var s = Object.keys(this.unsafeGlobalScope),\n          a = \"return function(props){var \" + Object.keys(this.getGlobalProperties()).map(function (t) {\n        return t + \"=props.\" + t;\n      }).join(\",\") + \";\" + t + \"return \" + r.className + \";}\",\n          u = new (Function.bind.apply(Function, ft([void 0], s, [a])))(),\n          c = function c(t) {\n        var r = e.getByName(t);\n        return r ? r.unsafeConstructorGenerator(e.getGlobalProperties()) : null;\n      },\n          l = s.map(function (t) {\n        if (\"require\" === t) return c;\n        var r = e.unsafeGlobalScope[t];\n        return r.func ? function () {\n          for (var t = [], e = 0; e < arguments.length; e++) {\n            t[e] = arguments[e];\n          }\n\n          return r.func(t);\n        } : r.cls || r.value;\n      });\n\n      r.unsafeConstructorGenerator = u.apply({}, l);\n    }\n\n    return r;\n  }, t.prototype.getGlobalProperties = function () {\n    var t;\n    return {\n      width: this._player.videoWidth,\n      height: this._player.videoHeight,\n      margin: this._player.margin,\n      duration: (null === (t = this._player.video) || void 0 === t ? void 0 : t.duration) || 0\n    };\n  }, t.prototype.newRawInstance = function (t) {\n    var e = t,\n        r = new Oe();\n\n    if (this.unsafeAcceleration) {\n      var n = new (e.unsafeConstructorGenerator(this.getGlobalProperties()))();\n      r.unsafeTemplateInstance = n;\n    } else {\n      this.interpreter.prepareNewInstance(e.newStatement, e.scope);\n      var i = this.interpreter.run(700, \"to instantiate \" + e.className);\n      r.templateInstance = i, r.templateInstance._nativeInstance = r;\n    }\n\n    return r.templateClass = e, r.ignore = !1, r;\n  }, t.prototype.setProperty = function (t, e, r) {\n    this.unsafeAcceleration ? t.unsafeTemplateInstance[e] = r : this.interpreter.setProperty(t.templateInstance, e, r);\n  }, t.prototype.getProperty = function (t, e) {\n    return this.unsafeAcceleration ? t.unsafeTemplateInstance[e] : this.interpreter.getProperty(t.templateInstance, e);\n  }, t.prototype.exportInstance = function (t) {\n    for (var e = {}, r = 0, n = t.templateClass.widgets.map(function (t) {\n      return t.name;\n    }).concat(Me); r < n.length; r++) {\n      var i = n[r],\n          o = this.getProperty(t, i);\n\n      try {\n        var s = Ie(o);\n        void 0 !== s && (e[i] = s);\n      } catch (e) {\n        console.error(\"cannot export \" + t.templateClass.className + \".\" + i, o, \"assigned to\", t.assignedUnit);\n      }\n    }\n\n    return {\n      type: t.templateClass.className,\n      value: e\n    };\n  }, t.prototype.importInstances = function (t, e) {\n    try {\n      for (var r = e.phrases, n = t.firstPhrase, i = 0; null !== n;) {\n        var o = r[i++];\n        this.importTemplates(n, o.templates);\n\n        for (var s = n.firstWord, a = 0; a < n.wordCount; a++) {\n          var u = o.words[a];\n          this.importTemplates(s, u.templates);\n\n          for (var c = s.firstChar, l = 0; l < s.charCount; l++) {\n            var p = u.characters[l];\n            this.importTemplates(c, p.templates), c = c.next;\n          }\n\n          s = s.next;\n        }\n\n        n = n.next;\n      }\n\n      for (var h = e.graphics, d = t.firstGraphic, f = 0; null !== d;) {\n        var y = h[f++];\n        this.importTemplates(d, y.templates), d = d.next;\n      }\n    } catch (t) {\n      return console.error(\"restoring templates failed\", t), !1;\n    }\n\n    return !0;\n  }, t.prototype.importTemplates = function (t, e) {\n    if (Array.isArray(e)) for (var r = 0, n = e; r < n.length; r++) {\n      var i = n[r],\n          o = this.importInstance(i);\n      o && t.addTemplate(o);\n    }\n  }, t.prototype.importInstance = function (t) {\n    var e = this.getByName(t.type),\n        r = this.newInstance(e);\n    if (!r || !t.value) return null;\n\n    for (var n = 0, i = Object.keys(t.value); n < i.length; n++) {\n      var o = i[n],\n          s = ke(t.value[o], this.interpreter.wrapperTable);\n      void 0 !== s && this.setProperty(r, o, s);\n    }\n\n    return r;\n  }, t.prototype.updateInstance = function (t, e) {\n    var r = t,\n        n = e,\n        i = this.newRawInstance(n),\n        o = r.templateInstance,\n        s = this.interpreter.cleanupProperties(o);\n    r.templateClass !== n && (this.disposeInstance(r), n.instances.push(r)), r.templateClass = n, r.scope = i.scope, r.templateInstance = i.templateInstance, r.ignore = i.ignore, this.interpreter.restoreProperties(r.templateInstance, s), this.attachGetAssignedUnitMethod(r);\n  }, t.prototype.newInstance = function (t) {\n    var e;\n\n    try {\n      if (null === (e = this.newRawInstance(t))) return null;\n    } catch (t) {\n      return null;\n    }\n\n    return this.attachGetAssignedUnitMethod(e), t.instances.push(e), e;\n  }, t.prototype.attachGetAssignedUnitMethod = function (t) {\n    this.unsafeAcceleration ? t.unsafeTemplateInstance.getAssignedUnit = function () {\n      return t.assignedUnit;\n    } : this.interpreter.attachGetAssignedUnitMethod(t);\n  }, t.prototype.disposeInstance = function (t) {\n    var e = t.templateClass;\n    e.instances = e.instances.filter(function (e) {\n      return e !== t;\n    });\n  }, t.prototype.disposeInstances = function (t) {\n    var e = this;\n    if (Array.isArray(t)) t.forEach(function (t) {\n      return e.disposeInstance(t);\n    });else {\n      var r = t;\n      [r.firstPhrase, r.firstWord, r.firstChar, r.firstGraphic].forEach(function (t) {\n        for (; t;) {\n          e.disposeInstances(t.removeTemplates()), t = t.next;\n        }\n      });\n    }\n  }, t.prototype.setTemplate = function (t, e) {\n    this.removeTemplates(t), t.addTemplate(e);\n  }, t.prototype.clearTemplate = function (t) {\n    this.removeTemplates(t);\n  }, t.prototype.removeTemplateAt = function (t, e) {\n    var r = t.removeTemplateAt(e);\n    r && this.disposeInstance(r);\n  }, t.prototype.removeTemplates = function (t) {\n    var e = t.removeTemplates();\n    this.disposeInstances(e);\n  }, t.prototype.getRequiredTemplates = function (t) {\n    return Ne(t).dependencies;\n  }, t.prototype.getRequiredTemplateAt = function (t, e) {\n    return Ne(t, e).dependencyAtCursor;\n  }, t.prototype.exec = function (t, e, r) {\n    if (t.unsafeTemplateInstance) {\n      var n = t.unsafeTemplateInstance;\n      return n[e].apply(n, r);\n    }\n\n    var i = this.interpreter.exec(t.templateInstance, e, r, t.assignedUnit);\n    return this.interpreter.unwrap(i);\n  }, t.prototype.declareVariable = function (t, e, r, n) {\n    return this.updateClassScript(t, function (t, e, r, n) {\n      try {\n        var i = Ce(t),\n            o = i.ast,\n            s = i.fields,\n            a = s[s.length - 1],\n            u = t.match(/(\\r\\n|[\\n\\v\\f\\r\\x85\\u2028\\u2029])/),\n            c = u ? u.pop() : \"\\n\",\n            l = t.split(c),\n            p = a ? Array(a.loc.start.column + 1).join(\" \") : \"  \",\n            h = a ? a.loc.end.line : 0;\n\n        if (h <= 0) {\n          var d = o.body[0].body,\n              f = l[d.loc.start.line - 1],\n              y = f.substring(0, d.loc.start.column + 1),\n              g = f.substring(d.loc.start.column + 1);\n          l[d.loc.start.line - 1] = y, l.splice(d.loc.start.line, 0, g), h = d.loc.start.line;\n        }\n\n        for (var v = void 0; (v = \"var\" + Math.random().toString().substring(2)).length > 8 && (v = v.substring(0, 8)), !(t.indexOf(v) < 0);) {\n          ;\n        }\n\n        l.length > h && l[h].length > 0 && l.splice(h, 0, \"\"), l.splice(h, 0, \"\", p + \"// @proposed\", p + \"// @title \" + e, p + \"// \" + function (t, e) {\n          if (\"Slider\" === t) return \"@ui Slider(\" + e.min + \", \" + e.max + \")\";\n          if (\"Check\" === t) return \"@ui Check()\";\n          if (\"Color\" === t) return \"@ui Color()\";\n          var r = e.etc;\n          return \"@comment \" + (r = r.replace(/(\\r\\n|[\\n\\v\\f\\r\\x85\\u2028\\u2029])/g, \"\")).replace(/\\/[*/]/g, \"\");\n        }(r, n), p + \"this.\" + v + \" = \" + (b = n, (\"Slider\" === (m = r) ? ((b.min + b.max) / 2).toString() : \"Check\" === m ? \"false\" : \"Color\" === m ? 'new Color(\"#000000\")' : \"null\") + \";\")), t = l.join(c);\n      } catch (t) {}\n\n      var m, b;\n      return t;\n    }(t.model.script, e, r, n));\n  }, t.prototype.onVideoReady = function (t) {\n    this.ready && (this.interpreter.setSizeProperties(this._player.resolutionWidth, this._player.resolutionHeight, this._player.margin), this.interpreter.setDurationProperty((null == t ? void 0 : t.duration) || 0));\n  }, t;\n}(),\n    Ve = function (t) {\n  function e(e, r) {\n    var n = this.constructor,\n        i = t.call(this, e) || this;\n    return i.video = r, Object.setPrototypeOf(i, n.prototype), i;\n  }\n\n  return lt(e, t), e;\n}(Error),\n    Ge = function Ge() {\n  this.halted = [], this.errors = [];\n},\n    qe = function () {\n  function t(t, e) {\n    var r = this;\n    this.listener = e, this.player = null, this._scale = 1, this.playerListener = {\n      onResize: function onResize(t) {\n        r.elementWidth = t.width, r.updateSize();\n      },\n      onVideoReady: function onVideoReady() {\n        r.elementWidth = r.calcWidth(), r.updateSize();\n      },\n      onStageElementSet: function onStageElementSet(t) {\n        r.elementWidth = r.calcWidth(), r.updateSize(), r.player.graphics.setCanvas(t);\n      },\n      onDispose: function onDispose() {\n        r.dispose();\n      }\n    }, this.requestedTime = 0, this.request = null, this.player = t, t.addListener(this.playerListener);\n  }\n\n  return Object.defineProperty(t.prototype, \"scale\", {\n    get: function get() {\n      return this._scale;\n    },\n    set: function set(t) {\n      this._scale = t, this.updateSize();\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"width\", {\n    get: function get() {\n      return this.player.graphics.width;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"height\", {\n    get: function get() {\n      return this.player.graphics.height;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.requestUpdate = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e = this;\n      return dt(this, function (r) {\n        return this.requestedTime = void 0 === t ? this.player.videoPosition : t, this.request || (this.request = new Promise(function (t) {\n          setTimeout(function () {\n            try {\n              e.update(e.requestedTime);\n            } catch (t) {}\n\n            e.request = null, t(e.requestedTime);\n          }, 0);\n        })), [2, this.request];\n      });\n    });\n  }, t.prototype.update = function (t) {\n    t || (t = this.player.mediaPosition), \"number\" == typeof t && (this.player.graphics.reset(), this.animate(t), this.player.graphics.update(), this.listener.onStageUpdate(t));\n  }, t.prototype.animate = function (t) {\n    for (var e = new Ge(), r = e.errors, n = e.halted, i = 0, o = [this.player.video.firstPhrase, this.player.video.firstWord, this.player.video.firstChar, this.player.video.firstGraphic]; i < o.length; i++) {\n      for (var s = o[i]; s;) {\n        this.animateRenderingUnit(t, s, e), s = s.next;\n      }\n    }\n\n    if (n.length > 0) {\n      console.error(\"---\");\n\n      for (var a = 0; a < n.length; a++) {\n        console.error(\"halted\", n[a], r[a]);\n      }\n    }\n  }, t.prototype.animateRenderingUnit = function (t, r, n) {\n    if (r.animate) r.animate(t, r);else if (r.templateCount <= 0) Ye(r) && r.getType() === e.CHAR && (r.rendering.visible = !1);else for (var i = 0; i < r.templateCount; i++) {\n      this.animateTemplate(t, r, r.getTemplate(i), n);\n    }\n  }, t.prototype.animateTemplate = function (t, r, n, i) {\n    var o = this;\n    if (n.ignore) r.rendering.visible = !1;else {\n      if (r.getType() !== e.GRAPHIC) for (var s = r.parent; s;) {\n        if (s.templateCount > 0 && (!s.rendering.visible || 0 === s.rendering.alpha)) return void (r.rendering.visible = !1);\n        s = s.parent;\n      }\n      var a = this.player.templates.getProperty(n, \"insomnia\"),\n          u = Ye(r);\n      if (!a && u && function (t, r, n, i) {\n        var o = i && t(i, \"headTime\") || 500,\n            s = i && t(i, \"tailTime\") || 500;\n        return !(n.startTime - o <= r && n.endTime + s >= r) && (n.getType() !== e.GRAPHIC && (n.rendering.visible = !1), !0);\n      }(function (t, e) {\n        return o.player.templates.getProperty(t, e);\n      }, t, r, n)) return;\n      this.doAnimateTemplate(t, n, i);\n    }\n  }, t.prototype.doAnimateTemplate = function (t, e, r) {\n    var n = r.errors,\n        i = r.halted;\n\n    try {\n      this.player.templates.exec(e, \"animate\", [t]);\n    } catch (t) {\n      n.push(t), i.push(e);\n    }\n  }, t.prototype.calcWidth = function () {\n    var t = this.player.stageElement;\n    if (!t) return 0;\n    var e = window.getComputedStyle(t);\n    return t.offsetWidth - at(e.borderLeftWidth) - at(e.borderRightWidth) - at(e.paddingLeft) - at(e.paddingRight);\n  }, t.prototype.updateSize = function () {\n    var t = this.player.stageElement;\n\n    if (t) {\n      var e = this.elementWidth * this.player.videoProportion;\n\n      if (t.style.height = e + \"px\", t.width = this.elementWidth * this._scale, t.height = e * this._scale, this.player.video) {\n        var r = t.width / this.player.videoWidth;\n        this.player.graphics.updateStageTx(r, this.player.margin), this.player.isPlaying || this.requestUpdate();\n      }\n    }\n  }, t.prototype.dispose = function () {\n    this.player.removeListener(this.playerListener), this.player = null;\n  }, t;\n}();\n\nfunction Ye(t) {\n  if (t.getType() === e.GRAPHIC) return !0;\n\n  for (var r = !0, n = t.parent; n;) {\n    if (n.templateCount > 0) {\n      r = !1;\n      break;\n    }\n\n    n = n.parent;\n  }\n\n  return r;\n}\n\nfunction ze(t, e) {\n  var r = e.parser;\n  return ht(this, void 0, void 0, function () {\n    var e, n, i;\n    return dt(this, function (o) {\n      switch (o.label) {\n        case 0:\n          return t && t.length > 0 && t[0].words && t[0].words.length > 0 && t[0].words[0] && !t[0].words[0].pos ? (e = t.map(function (t) {\n            return t.words.map(function (t) {\n              return t.characters.map(function (t) {\n                return t[\"char\"];\n              }).join(\"\");\n            }).join(\" \");\n          }), n = e.join(\"\\n\"), [4, r(n)]) : [2];\n\n        case 1:\n          return (i = o.sent()) && \"success\" === i.status ? (t.forEach(function (t, r) {\n            var n = i.result[r],\n                o = 0;\n            t.words.forEach(function (t) {\n              var i = t.characters.map(function (t) {\n                return t[\"char\"];\n              }).join(\"\"),\n                  s = e[r].indexOf(i, o);\n\n              if (!(s < 0)) {\n                o = s;\n                var a = n.find(function (t) {\n                  return t.startPosition <= s && t.endPosition >= s;\n                });\n                a && (t.pos = a.PoS, t.rawPoS = a.rawPoS, t.language = a.language);\n              }\n            });\n          }), [2]) : [2];\n      }\n    });\n  });\n}\n\nfunction We(t, e) {\n  var r = e.id,\n      n = e.data,\n      i = e.loader,\n      o = e.deserializer;\n  return ht(this, void 0, void 0, function () {\n    return dt(this, function (e) {\n      switch (e.label) {\n        case 0:\n          return r && r >= 0 ? [4, i(r)] : [3, 2];\n\n        case 1:\n          e.sent(), e.label = 2;\n\n        case 2:\n          return o(t, n), [2];\n      }\n    });\n  });\n}\n\nvar Je = function () {\n  function t(t) {\n    this._mediaPosition = 0, this._videoPosition = 0, this.isEditing = !1, this._isVideoSeeking = !1, this._options = t, this.emitter = new _t(t), this._templates = new Be(this, this.emitter, t && t.unsafeAcceleration);\n    var e = Object.assign({}, M);\n    t && t.managers && (e = Object.assign(e, t.managers)), this.managers = e, this._timer = t && t.timer || this.createDefaultTimer(), this._data = new Lt(e, this.emitter, t), this._backgroundGraphics = new wt(this, e.asset, this.emitter), this._graphics = t && t.graphics || this.createDefaultGraphicsDriver(), this.stage = new qe(this, {\n      onStageUpdate: this.onStageUpdate.bind(this)\n    }), t && t.stageElement && (this.stageElement = t.stageElement), t && t.mediaElement && (this.mediaElement = t.mediaElement), this._app = new Ut(this, this.emitter);\n  }\n\n  return Object.defineProperty(t.prototype, \"options\", {\n    get: function get() {\n      return this._options ? _pt({}, this._options) : null;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"app\", {\n    get: function get() {\n      return this._app;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"data\", {\n    get: function get() {\n      return this._data;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"backgroundGraphics\", {\n    get: function get() {\n      return this._backgroundGraphics;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"video\", {\n    get: function get() {\n      return this._video;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"templates\", {\n    get: function get() {\n      return this._templates;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"graphics\", {\n    get: function get() {\n      return this._graphics;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"stageElement\", {\n    get: function get() {\n      return this._stageElement;\n    },\n    set: function set(t) {\n      this._stageElement = t, this.emitter.onStageElementSet(t);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"stageScale\", {\n    get: function get() {\n      return this.stage.scale;\n    },\n    set: function set(t) {\n      this.stage.scale = t;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"mediaElement\", {\n    get: function get() {\n      return this._mediaElement;\n    },\n    set: function set(t) {\n      this._mediaElement = t, this.emitter.onMediaElementSet(t);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"mediaPosition\", {\n    get: function get() {\n      return this._mediaPosition;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"videoPosition\", {\n    get: function get() {\n      return this._videoPosition;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"wait\", {\n    get: function get() {\n      return this._timer ? this._timer.wait : 0;\n    },\n    set: function set(t) {\n      this._timer && (this._timer.wait = t);\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"fps\", {\n    get: function get() {\n      return 1e3 / this.wait;\n    },\n    set: function set(t) {\n      this.wait = 1e3 / t;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"resolutionWidth\", {\n    get: function get() {\n      return this.data.video && this.data.video.config && \"object\" == _typeof(this.data.video.config) && \"number\" == typeof this.data.video.config.width ? this.data.video.config.width : this._options && this._options.defaultVideoSize && \"number\" == typeof this._options.defaultVideoSize.width ? this._options.defaultVideoSize.width : 1280;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"resolutionHeight\", {\n    get: function get() {\n      return this.data.video && this.data.video.config && \"object\" == _typeof(this.data.video.config) && \"number\" == typeof this.data.video.config.height ? this.data.video.config.height : this._options && this._options.defaultVideoSize && \"number\" == typeof this._options.defaultVideoSize.height ? this._options.defaultVideoSize.height : 720;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"resolutionProportion\", {\n    get: function get() {\n      return this.resolutionHeight / this.resolutionWidth;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"margin\", {\n    get: function get() {\n      var t, e, r, n;\n      return \"object\" == _typeof(null === (e = null === (t = this.data) || void 0 === t ? void 0 : t.video) || void 0 === e ? void 0 : e.config) && this.data.video.config.margin ? this.data.video.config.margin : (null === (n = null === (r = this._options) || void 0 === r ? void 0 : r.defaultVideoSize) || void 0 === n ? void 0 : n.margin) || gt;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"videoWidth\", {\n    get: function get() {\n      var t = this.resolutionWidth,\n          e = this.margin;\n      return t + e[1] + e[3];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"videoHeight\", {\n    get: function get() {\n      var t = this.resolutionHeight,\n          e = this.margin;\n      return t + e[0] + e[2];\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"videoProportion\", {\n    get: function get() {\n      return this.videoHeight / this.videoWidth;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"stageWidth\", {\n    get: function get() {\n      return this.stage.width;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"stageHeight\", {\n    get: function get() {\n      return this.stage.height;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"isLoading\", {\n    get: function get() {\n      return !!this._videoPromise;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"isPlaying\", {\n    get: function get() {\n      return !!this._timer && this._timer.isPlaying;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"isVideoSeeking\", {\n    get: function get() {\n      return this._isVideoSeeking;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), Object.defineProperty(t.prototype, \"timer\", {\n    get: function get() {\n      return this._timer;\n    },\n    enumerable: !0,\n    configurable: !0\n  }), t.prototype.createDefaultTimer = function () {\n    try {\n      if (\"undefined\" != typeof window && \"basic\" !== ut(\"ta_timer\")) return new bt();\n    } catch (t) {}\n\n    return new vt();\n  }, t.prototype.createDefaultGraphicsDriver = function () {\n    return new nt();\n  }, t.prototype.addListener = function (t) {\n    return this.emitter.addListener(t);\n  }, t.prototype.removeListener = function (t) {\n    return this.emitter.removeListener(t);\n  }, t.prototype.createFromVideoId = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r = this;\n      return dt(this, function (n) {\n        return [2, this.create(function () {\n          return r.doCreateFromVideoId(t, e);\n        }, null == e ? void 0 : e.dryRun)];\n      });\n    });\n  }, t.prototype.doCreateFromVideoId = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, (r = new Lt(this.managers, this.emitter, this._options)).createFromVideoId(t, null == e ? void 0 : e.video)];\n\n          case 1:\n            return n.sent(), [2, this.finalize(r, e)];\n        }\n      });\n    });\n  }, t.prototype.createFromVideo = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r = this;\n      return dt(this, function (n) {\n        return [2, this.create(function () {\n          return r.doCreateFromVideo(t, e);\n        }, null == e ? void 0 : e.dryRun)];\n      });\n    });\n  }, t.prototype.doCreateFromVideo = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        return (r = new Lt(this.managers, this.emitter, this._options)).createFromVideo(t, null == e ? void 0 : e.video), [2, this.finalize(r, e)];\n      });\n    });\n  }, t.prototype.createFromSongUrl = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r = this;\n      return dt(this, function (n) {\n        return [2, this.create(function () {\n          return r.doCreateFromSongUrl(t, e);\n        }, null == e ? void 0 : e.dryRun)];\n      });\n    });\n  }, t.prototype.doCreateFromSongUrl = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, (r = new Lt(this.managers, this.emitter, this._options)).createFromSongUrl(t, null == e ? void 0 : e.video)];\n\n          case 1:\n            return n.sent(), [2, this.finalize(r, e)];\n        }\n      });\n    });\n  }, t.prototype.createFromSongPath = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r = this;\n      return dt(this, function (n) {\n        return [2, this.create(function () {\n          return r.doCreateFromSongPath(t, e);\n        }, null == e ? void 0 : e.dryRun)];\n      });\n    });\n  }, t.prototype.doCreateFromSongPath = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, (r = new Lt(this.managers, this.emitter, this._options)).createFromSongPath(t, null == e ? void 0 : e.video)];\n\n          case 1:\n            return n.sent(), [2, this.finalize(r, e)];\n        }\n      });\n    });\n  }, t.prototype.createFromSongId = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r = this;\n      return dt(this, function (n) {\n        return [2, this.create(function () {\n          return r.doCreateFromSongId(t, e);\n        }, null == e ? void 0 : e.dryRun)];\n      });\n    });\n  }, t.prototype.doCreateFromSongId = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, (r = new Lt(this.managers, this.emitter, this._options)).createFromSongId(t, null == e ? void 0 : e.video)];\n\n          case 1:\n            return n.sent(), [2, this.finalize(r, e)];\n        }\n      });\n    });\n  }, t.prototype.createFromSongCode = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r = this;\n      return dt(this, function (n) {\n        return [2, this.create(function () {\n          return r.doCreateFromSongCode(t, e);\n        }, null == e ? void 0 : e.dryRun)];\n      });\n    });\n  }, t.prototype.doCreateFromSongCode = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, (r = new Lt(this.managers, this.emitter, this._options)).createFromSongCode(t, null == e ? void 0 : e.video)];\n\n          case 1:\n            return n.sent(), [2, this.finalize(r, e)];\n        }\n      });\n    });\n  }, t.prototype.createFromText = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r = this;\n      return dt(this, function (n) {\n        return [2, this.create(function () {\n          return r.doCreateFromText(t, e);\n        }, null == e ? void 0 : e.dryRun)];\n      });\n    });\n  }, t.prototype.doCreateFromText = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, (r = new Lt(this.managers, this.emitter, this._options)).createFromText(t, null == e ? void 0 : e.video)];\n\n          case 1:\n            return n.sent(), [2, this.finalize(r, e)];\n        }\n      });\n    });\n  }, t.prototype.createFromJSON = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r = this;\n      return dt(this, function (n) {\n        return [2, this.create(function () {\n          return r.doCreateFromJSON(t, e);\n        }, null == e ? void 0 : e.dryRun)];\n      });\n    });\n  }, t.prototype.doCreateFromJSON = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r;\n      return dt(this, function (n) {\n        switch (n.label) {\n          case 0:\n            return [4, (r = new Lt(this.managers, this.emitter, this._options)).createFromJSON(t, null == e ? void 0 : e.video)];\n\n          case 1:\n            return n.sent(), [2, this.finalize(r, e)];\n        }\n      });\n    });\n  }, t.prototype.create = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r,\n          n = this;\n      return dt(this, function (i) {\n        if (this._videoPromise && !e) throw new Ve(\"Player.createFrom* method calls cannot run in parallel\", this._videoPromise);\n        return r = t(), e || (this._videoPromise = r, r[\"finally\"](function () {\n          return n._videoPromise = null;\n        })), [2, r];\n      });\n    });\n  }, t.prototype.finalize = function (t, e) {\n    return ht(this, void 0, void 0, function () {\n      var r,\n          n,\n          i,\n          o = this;\n      return dt(this, function (s) {\n        switch (s.label) {\n          case 0:\n            return t.video ? [4, Promise.all([t.finalize(e), this.backgroundGraphics.setBackground(t.video.background)])] : [2, null];\n\n          case 1:\n            return s.sent(), (null == e ? void 0 : e.dryRun) ? [2, null] : (r = t.video.json, function (t, e) {\n              var r = e.config,\n                  n = e.song;\n              r && \"object\" == _typeof(r) && \"number\" == typeof r.duration ? t.duration = r.duration : n ? t.duration = 1e3 * n.length : t.duration || (t.duration = t.endTime);\n            }(n = new K(r), {\n              config: t.video.config,\n              song: t.song\n            }), [4, Promise.all([this.graphics.createRuntime(n), We(n, {\n              id: t.video.id,\n              data: r,\n              loader: function loader(t) {\n                return ht(o, void 0, void 0, function () {\n                  return dt(this, function (e) {\n                    switch (e.label) {\n                      case 0:\n                        return [4, this.templates.loadForVideo(t)];\n\n                      case 1:\n                        return e.sent(), [2];\n                    }\n                  });\n                });\n              },\n              deserializer: function deserializer(t, e) {\n                return o.templates.importInstances(t, e);\n              }\n            }), ze(null == r ? void 0 : r.phrases, {\n              parser: O.parse.bind(O)\n            })])]);\n\n          case 2:\n            return s.sent(), this._data, this._video && this.templates.disposeInstances(this._video), this._data = t, this._video = n, this.emitter.onVideoReady(n), i = (null == e ? void 0 : e.altSourceUrl) || void 0, [4, this._timer.initialize({\n              player: this,\n              updater: this.updateMediaPosition.bind(this),\n              emitter: this.emitter,\n              altSourceUrl: i\n            })];\n\n          case 3:\n            return s.sent(), this.emitter.onTimerReady(this._timer), [2, n];\n        }\n      });\n    });\n  }, t.prototype.updateMediaPosition = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e = this;\n      return dt(this, function (r) {\n        return this._isVideoSeeking ? (this._mediaPosition = t, this.emitter.onMediaSeek(t), [2, t]) : [2, this.stage.requestUpdate(t).then(function (t) {\n          return e._mediaPosition = t, e._videoPosition = t, e.emitter.onMediaSeek(t), t;\n        })];\n      });\n    });\n  }, t.prototype.exportVideo = function (t) {\n    return void 0 === t && (t = {\n      legacyStringMode: !0\n    }), ht(this, void 0, void 0, function () {\n      var e, r, n, i;\n      return dt(this, function (o) {\n        return e = this._data.exportPartialVideoEntry(t), r = this.backgroundGraphics.exportPartialVideoEntry(t), n = this._video.exportData(this._templates), i = (null == t ? void 0 : t.legacyStringMode) ? JSON.stringify(n) : n, [2, _pt(_pt(_pt({}, e), r), {\n          json: i\n        })];\n      });\n    });\n  }, t.prototype.getChoruses = function () {\n    return this._data.getChoruses();\n  }, t.prototype.findChorus = function (t, e) {\n    return this._data.findChorus(t, e);\n  }, t.prototype.findChorusBetween = function (t, e) {\n    return this._data.findChorusBetween(t, e);\n  }, t.prototype.getBeats = function () {\n    return this._data.getBeats();\n  }, t.prototype.findBeat = function (t, e) {\n    return this._data.findBeat(t, e);\n  }, t.prototype.getChords = function () {\n    return this._data.getChords();\n  }, t.prototype.findChord = function (t, e) {\n    return this._data.findChord(t, e);\n  }, t.prototype.getVocalFrequency = function (t) {\n    return this._data.getVocalFrequency(t);\n  }, t.prototype.getVocalAmplitude = function (t) {\n    return this._data.getVocalAmplitude(t);\n  }, t.prototype.getMaxVocalAmplitude = function () {\n    return this._data.getMaxVocalAmplitude();\n  }, t.prototype.getValenceArousal = function (t) {\n    return this._data.getValenceArousal(t);\n  }, t.prototype.getMedianValenceArousal = function () {\n    return this._data.getMedianValenceArousal();\n  }, t.prototype.resize = function (t) {\n    return this.emitter.onResize(t);\n  }, t.prototype.onResize = function (t) {\n    return this.resize(t);\n  }, t.prototype.setStageElement = function (t) {\n    return this._stageElement = t, this.emitter.onStageElementSet(t);\n  }, t.prototype.setMediaElement = function (t) {\n    return this._mediaElement = t, this.emitter.onMediaElementSet(t);\n  }, t.prototype.setVideoPosition = function (t) {\n    return ht(this, void 0, void 0, function () {\n      var e = this;\n      return dt(this, function (r) {\n        return [2, this.stage.requestUpdate(t).then(function (t) {\n          return e._videoPosition = t, e.emitter.onVideoSeek(t), t;\n        })];\n      });\n    });\n  }, t.prototype.setMediaPosition = function (t) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (e) {\n        return this.requestMediaSeek(t), [2];\n      });\n    });\n  }, t.prototype.requestPlay = function () {\n    return this._timer.play(), !0;\n  }, t.prototype.requestStop = function () {\n    return this._timer.stop(), !0;\n  }, t.prototype.requestPause = function () {\n    return this._timer.pause(), !0;\n  }, t.prototype.requestMediaSeek = function (t) {\n    return this._timer.seek(t), !0;\n  }, t.prototype.startVideoSeek = function () {\n    return this._isVideoSeeking = !0, this.emitter.onVideoSeekStart();\n  }, t.prototype.endVideoSeek = function () {\n    return this._isVideoSeeking = !1, this.emitter.onVideoSeekEnd();\n  }, t.prototype.requestSettingBackground = function (t) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (e) {\n        return [2, this.backgroundGraphics.settingBackground(t)];\n      });\n    });\n  }, t.prototype.requestSetBackground = function (t) {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (e) {\n        return [2, this.backgroundGraphics.setBackground(t)];\n      });\n    });\n  }, t.prototype.requestStageUpdate = function () {\n    return ht(this, void 0, void 0, function () {\n      return dt(this, function (t) {\n        return [2, this.stage.requestUpdate()];\n      });\n    });\n  }, t.prototype.onStageUpdate = function (t) {\n    this._isVideoSeeking || this.emitter.onTimeUpdate(t);\n  }, t.prototype.dispose = function () {\n    if (this._timer && (this._timer.dispose(), this._timer = null), this.mediaElement) {\n      for (; this.mediaElement.firstElementChild;) {\n        this.mediaElement.removeChild(this.mediaElement.firstElementChild);\n      }\n\n      this._mediaElement = null;\n    }\n\n    this.stageElement && (this._stageElement = null), this.emitter.onDispose();\n  }, t;\n}();\n\nconsole.log(\"# ライセンス表記に関するガイドライン\\n\\n国立研究開発法人産業技術総合研究所\\n人間情報インタラクション研究部門\\nメディアインタラクション研究グループ\\n\\nTextAlive App APIは非商用利用に限り、どなたでも無料・無保証で利用することができます。\\nただし、原則としてTextAlive App APIを利用している旨を https://developer.textalive.jp/ にハイパーリンクした上で、利用しているシステムもしくは外部サイト等に表示する必要があります。\\n\\n# お問い合わせ\\n\\ntextalive-ml@aist.go.jp\");\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/dist/index.es.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/index.js":
/*!********************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/index.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! ./lib/axios */ \"./node_modules/textalive-app-api/node_modules/axios/lib/axios.js\");\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/index.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/adapters/xhr.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/adapters/xhr.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./../utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\");\n\nvar settle = __webpack_require__(/*! ./../core/settle */ \"./node_modules/textalive-app-api/node_modules/axios/lib/core/settle.js\");\n\nvar buildURL = __webpack_require__(/*! ./../helpers/buildURL */ \"./node_modules/textalive-app-api/node_modules/axios/lib/helpers/buildURL.js\");\n\nvar buildFullPath = __webpack_require__(/*! ../core/buildFullPath */ \"./node_modules/textalive-app-api/node_modules/axios/lib/core/buildFullPath.js\");\n\nvar parseHeaders = __webpack_require__(/*! ./../helpers/parseHeaders */ \"./node_modules/textalive-app-api/node_modules/axios/lib/helpers/parseHeaders.js\");\n\nvar isURLSameOrigin = __webpack_require__(/*! ./../helpers/isURLSameOrigin */ \"./node_modules/textalive-app-api/node_modules/axios/lib/helpers/isURLSameOrigin.js\");\n\nvar createError = __webpack_require__(/*! ../core/createError */ \"./node_modules/textalive-app-api/node_modules/axios/lib/core/createError.js\");\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest(); // HTTP basic authentication\n\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true); // Set the request timeout in MS\n\n    request.timeout = config.timeout; // Listen for ready state\n\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      } // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n\n\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      } // Prepare the response\n\n\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n      settle(resolve, reject, response); // Clean up request\n\n      request = null;\n    }; // Handle browser request cancellation (as opposed to a manual cancellation)\n\n\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request)); // Clean up request\n\n      request = null;\n    }; // Handle low level network errors\n\n\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request)); // Clean up request\n\n      request = null;\n    }; // Handle timeout\n\n\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED', request)); // Clean up request\n\n      request = null;\n    }; // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n\n\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = __webpack_require__(/*! ./../helpers/cookies */ \"./node_modules/textalive-app-api/node_modules/axios/lib/helpers/cookies.js\"); // Add xsrf header\n\n\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ? cookies.read(config.xsrfCookieName) : undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    } // Add headers to the request\n\n\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    } // Add withCredentials to request if needed\n\n\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    } // Add responseType to request if needed\n\n\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    } // Handle progress if needed\n\n\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    } // Not all browsers support upload events\n\n\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel); // Clean up request\n\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    } // Send the request\n\n\n    request.send(requestData);\n  });\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/adapters/xhr.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/axios.js":
/*!************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/axios.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\");\n\nvar bind = __webpack_require__(/*! ./helpers/bind */ \"./node_modules/textalive-app-api/node_modules/axios/lib/helpers/bind.js\");\n\nvar Axios = __webpack_require__(/*! ./core/Axios */ \"./node_modules/textalive-app-api/node_modules/axios/lib/core/Axios.js\");\n\nvar mergeConfig = __webpack_require__(/*! ./core/mergeConfig */ \"./node_modules/textalive-app-api/node_modules/axios/lib/core/mergeConfig.js\");\n\nvar defaults = __webpack_require__(/*! ./defaults */ \"./node_modules/textalive-app-api/node_modules/axios/lib/defaults.js\");\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\n\n\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context); // Copy axios.prototype to instance\n\n  utils.extend(instance, Axios.prototype, context); // Copy context to instance\n\n  utils.extend(instance, context);\n  return instance;\n} // Create the default instance to be exported\n\n\nvar axios = createInstance(defaults); // Expose Axios class to allow class inheritance\n\naxios.Axios = Axios; // Factory for creating new instances\n\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n}; // Expose Cancel & CancelToken\n\n\naxios.Cancel = __webpack_require__(/*! ./cancel/Cancel */ \"./node_modules/textalive-app-api/node_modules/axios/lib/cancel/Cancel.js\");\naxios.CancelToken = __webpack_require__(/*! ./cancel/CancelToken */ \"./node_modules/textalive-app-api/node_modules/axios/lib/cancel/CancelToken.js\");\naxios.isCancel = __webpack_require__(/*! ./cancel/isCancel */ \"./node_modules/textalive-app-api/node_modules/axios/lib/cancel/isCancel.js\"); // Expose all/spread\n\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = __webpack_require__(/*! ./helpers/spread */ \"./node_modules/textalive-app-api/node_modules/axios/lib/helpers/spread.js\");\nmodule.exports = axios; // Allow use of default import syntax in TypeScript\n\nmodule.exports[\"default\"] = axios;\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/axios.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/cancel/Cancel.js":
/*!********************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/cancel/Cancel.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\n\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\nmodule.exports = Cancel;\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/cancel/Cancel.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/cancel/CancelToken.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/cancel/CancelToken.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar Cancel = __webpack_require__(/*! ./Cancel */ \"./node_modules/textalive-app-api/node_modules/axios/lib/cancel/Cancel.js\");\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\n\n\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\n\n\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\n\n\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/cancel/CancelToken.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/cancel/isCancel.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/cancel/isCancel.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/cancel/isCancel.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/core/Axios.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/core/Axios.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./../utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\");\n\nvar buildURL = __webpack_require__(/*! ../helpers/buildURL */ \"./node_modules/textalive-app-api/node_modules/axios/lib/helpers/buildURL.js\");\n\nvar InterceptorManager = __webpack_require__(/*! ./InterceptorManager */ \"./node_modules/textalive-app-api/node_modules/axios/lib/core/InterceptorManager.js\");\n\nvar dispatchRequest = __webpack_require__(/*! ./dispatchRequest */ \"./node_modules/textalive-app-api/node_modules/axios/lib/core/dispatchRequest.js\");\n\nvar mergeConfig = __webpack_require__(/*! ./mergeConfig */ \"./node_modules/textalive-app-api/node_modules/axios/lib/core/mergeConfig.js\");\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\n\n\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\n\n\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config); // Set config.method\n\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  } // Hook up interceptors middleware\n\n\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n}; // Provide aliases for supported request methods\n\n\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function (url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function (url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\nmodule.exports = Axios;\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/core/Axios.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/core/InterceptorManager.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/core/InterceptorManager.js ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./../utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\");\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\n\n\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\n\n\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\n\n\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/core/InterceptorManager.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/core/buildFullPath.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/core/buildFullPath.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar isAbsoluteURL = __webpack_require__(/*! ../helpers/isAbsoluteURL */ \"./node_modules/textalive-app-api/node_modules/axios/lib/helpers/isAbsoluteURL.js\");\n\nvar combineURLs = __webpack_require__(/*! ../helpers/combineURLs */ \"./node_modules/textalive-app-api/node_modules/axios/lib/helpers/combineURLs.js\");\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\n\n\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n\n  return requestedURL;\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/core/buildFullPath.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/core/createError.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/core/createError.js ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar enhanceError = __webpack_require__(/*! ./enhanceError */ \"./node_modules/textalive-app-api/node_modules/axios/lib/core/enhanceError.js\");\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\n\n\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/core/createError.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/core/dispatchRequest.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/core/dispatchRequest.js ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./../utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\");\n\nvar transformData = __webpack_require__(/*! ./transformData */ \"./node_modules/textalive-app-api/node_modules/axios/lib/core/transformData.js\");\n\nvar isCancel = __webpack_require__(/*! ../cancel/isCancel */ \"./node_modules/textalive-app-api/node_modules/axios/lib/cancel/isCancel.js\");\n\nvar defaults = __webpack_require__(/*! ../defaults */ \"./node_modules/textalive-app-api/node_modules/axios/lib/defaults.js\");\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\n\n\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\n\n\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config); // Ensure headers exist\n\n  config.headers = config.headers || {}; // Transform request data\n\n  config.data = transformData(config.data, config.headers, config.transformRequest); // Flatten headers\n\n  config.headers = utils.merge(config.headers.common || {}, config.headers[config.method] || {}, config.headers);\n  utils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch', 'common'], function cleanHeaderConfig(method) {\n    delete config.headers[method];\n  });\n  var adapter = config.adapter || defaults.adapter;\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config); // Transform response data\n\n    response.data = transformData(response.data, response.headers, config.transformResponse);\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config); // Transform response data\n\n      if (reason && reason.response) {\n        reason.response.data = transformData(reason.response.data, reason.response.headers, config.transformResponse);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/core/dispatchRequest.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/core/enhanceError.js":
/*!************************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/core/enhanceError.js ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\n\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function () {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n\n  return error;\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/core/enhanceError.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/core/mergeConfig.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/core/mergeConfig.js ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\");\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\n\n\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n  var valueFromConfig2Keys = ['url', 'method', 'params', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy'];\n  var defaultToConfig2Keys = ['baseURL', 'url', 'transformRequest', 'transformResponse', 'paramsSerializer', 'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName', 'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent', 'httpsAgent', 'cancelToken', 'socketPath'];\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n  utils.forEach(mergeDeepPropertiesKeys, function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n  var axiosKeys = valueFromConfig2Keys.concat(mergeDeepPropertiesKeys).concat(defaultToConfig2Keys);\n  var otherKeys = Object.keys(config2).filter(function filterAxiosKeys(key) {\n    return axiosKeys.indexOf(key) === -1;\n  });\n  utils.forEach(otherKeys, function otherKeysDefaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n  return config;\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/core/mergeConfig.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/core/settle.js":
/*!******************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/core/settle.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar createError = __webpack_require__(/*! ./createError */ \"./node_modules/textalive-app-api/node_modules/axios/lib/core/createError.js\");\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\n\n\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError('Request failed with status code ' + response.status, response.config, null, response.request, response));\n  }\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/core/settle.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/core/transformData.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/core/transformData.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./../utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\");\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\n\n\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n  return data;\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/core/transformData.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/defaults.js":
/*!***************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/defaults.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(process) {\n\nvar utils = __webpack_require__(/*! ./utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\");\n\nvar normalizeHeaderName = __webpack_require__(/*! ./helpers/normalizeHeaderName */ \"./node_modules/textalive-app-api/node_modules/axios/lib/helpers/normalizeHeaderName.js\");\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = __webpack_require__(/*! ./adapters/xhr */ \"./node_modules/textalive-app-api/node_modules/axios/lib/adapters/xhr.js\");\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = __webpack_require__(/*! ./adapters/http */ \"./node_modules/textalive-app-api/node_modules/axios/lib/adapters/xhr.js\");\n  }\n\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n\n    if (utils.isFormData(data) || utils.isArrayBuffer(data) || utils.isBuffer(data) || utils.isStream(data) || utils.isFile(data) || utils.isBlob(data)) {\n      return data;\n    }\n\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n\n    return data;\n  }],\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) {\n        /* Ignore */\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n  maxContentLength: -1,\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\nmodule.exports = defaults;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/defaults.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/helpers/bind.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/helpers/bind.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    return fn.apply(thisArg, args);\n  };\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/helpers/bind.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/helpers/buildURL.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/helpers/buildURL.js ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./../utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\");\n\nfunction encode(val) {\n  return encodeURIComponent(val).replace(/%40/gi, '@').replace(/%3A/gi, ':').replace(/%24/g, '$').replace(/%2C/gi, ',').replace(/%20/g, '+').replace(/%5B/gi, '[').replace(/%5D/gi, ']');\n}\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\n\n\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/helpers/buildURL.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/helpers/combineURLs.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/helpers/combineURLs.js ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\n\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '') : baseURL;\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/helpers/combineURLs.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/helpers/cookies.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/helpers/cookies.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./../utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\");\n\nmodule.exports = utils.isStandardBrowserEnv() ? // Standard browser envs support document.cookie\nfunction standardBrowserEnv() {\n  return {\n    write: function write(name, value, expires, path, domain, secure) {\n      var cookie = [];\n      cookie.push(name + '=' + encodeURIComponent(value));\n\n      if (utils.isNumber(expires)) {\n        cookie.push('expires=' + new Date(expires).toGMTString());\n      }\n\n      if (utils.isString(path)) {\n        cookie.push('path=' + path);\n      }\n\n      if (utils.isString(domain)) {\n        cookie.push('domain=' + domain);\n      }\n\n      if (secure === true) {\n        cookie.push('secure');\n      }\n\n      document.cookie = cookie.join('; ');\n    },\n    read: function read(name) {\n      var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return match ? decodeURIComponent(match[3]) : null;\n    },\n    remove: function remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  };\n}() : // Non standard browser env (web workers, react-native) lack needed support.\nfunction nonStandardBrowserEnv() {\n  return {\n    write: function write() {},\n    read: function read() {\n      return null;\n    },\n    remove: function remove() {}\n  };\n}();\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/helpers/cookies.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/helpers/isAbsoluteURL.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/helpers/isAbsoluteURL.js ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\n\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/helpers/isAbsoluteURL.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/helpers/isURLSameOrigin.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/helpers/isURLSameOrigin.js ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./../utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\");\n\nmodule.exports = utils.isStandardBrowserEnv() ? // Standard browser envs have full support of the APIs needed to test\n// whether the request URL is of the same origin as current location.\nfunction standardBrowserEnv() {\n  var msie = /(msie|trident)/i.test(navigator.userAgent);\n  var urlParsingNode = document.createElement('a');\n  var originURL;\n  /**\n  * Parse a URL to discover it's components\n  *\n  * @param {String} url The URL to be parsed\n  * @returns {Object}\n  */\n\n  function resolveURL(url) {\n    var href = url;\n\n    if (msie) {\n      // IE needs attribute set twice to normalize properties\n      urlParsingNode.setAttribute('href', href);\n      href = urlParsingNode.href;\n    }\n\n    urlParsingNode.setAttribute('href', href); // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n\n    return {\n      href: urlParsingNode.href,\n      protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n      host: urlParsingNode.host,\n      search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n      hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n      hostname: urlParsingNode.hostname,\n      port: urlParsingNode.port,\n      pathname: urlParsingNode.pathname.charAt(0) === '/' ? urlParsingNode.pathname : '/' + urlParsingNode.pathname\n    };\n  }\n\n  originURL = resolveURL(window.location.href);\n  /**\n  * Determine if a URL shares the same origin as the current location\n  *\n  * @param {String} requestURL The URL to test\n  * @returns {boolean} True if URL shares the same origin, otherwise false\n  */\n\n  return function isURLSameOrigin(requestURL) {\n    var parsed = utils.isString(requestURL) ? resolveURL(requestURL) : requestURL;\n    return parsed.protocol === originURL.protocol && parsed.host === originURL.host;\n  };\n}() : // Non standard browser envs (web workers, react-native) lack needed support.\nfunction nonStandardBrowserEnv() {\n  return function isURLSameOrigin() {\n    return true;\n  };\n}();\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/helpers/isURLSameOrigin.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/helpers/normalizeHeaderName.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/helpers/normalizeHeaderName.js ***!
  \**********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\");\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/helpers/normalizeHeaderName.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/helpers/parseHeaders.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/helpers/parseHeaders.js ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./../utils */ \"./node_modules/textalive-app-api/node_modules/axios/lib/utils.js\"); // Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\n\n\nvar ignoreDuplicateOf = ['age', 'authorization', 'content-length', 'content-type', 'etag', 'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since', 'last-modified', 'location', 'max-forwards', 'proxy-authorization', 'referer', 'retry-after', 'user-agent'];\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\n\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) {\n    return parsed;\n  }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n  return parsed;\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/helpers/parseHeaders.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/helpers/spread.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/helpers/spread.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\n\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/helpers/spread.js?");

/***/ }),

/***/ "./node_modules/textalive-app-api/node_modules/axios/lib/utils.js":
/*!************************************************************************!*\
  !*** ./node_modules/textalive-app-api/node_modules/axios/lib/utils.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar bind = __webpack_require__(/*! ./helpers/bind */ \"./node_modules/textalive-app-api/node_modules/axios/lib/helpers/bind.js\");\n/*global toString:true*/\n// utils is a library of generic helper functions non-specific to axios\n\n\nvar toString = Object.prototype.toString;\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\n\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\n\n\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\n\n\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor) && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\n\n\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\n\n\nfunction isFormData(val) {\n  return typeof FormData !== 'undefined' && val instanceof FormData;\n}\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\n\n\nfunction isArrayBufferView(val) {\n  var result;\n\n  if (typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = val && val.buffer && val.buffer instanceof ArrayBuffer;\n  }\n\n  return result;\n}\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\n\n\nfunction isString(val) {\n  return typeof val === 'string';\n}\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\n\n\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\n\n\nfunction isObject(val) {\n  return val !== null && _typeof(val) === 'object';\n}\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\n\n\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\n\n\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\n\n\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\n\n\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\n\n\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\n\n\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\n\n\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\n\n\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' || navigator.product === 'NativeScript' || navigator.product === 'NS')) {\n    return false;\n  }\n\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\n\n\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  } // Force an array if not already something iterable\n\n\n  if (_typeof(obj) !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\n\n\nfunction merge()\n/* obj1, obj2, obj3, ... */\n{\n  var result = {};\n\n  function assignValue(val, key) {\n    if (_typeof(result[key]) === 'object' && _typeof(val) === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n\n  return result;\n}\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\n\n\nfunction deepMerge()\n/* obj1, obj2, obj3, ... */\n{\n  var result = {};\n\n  function assignValue(val, key) {\n    if (_typeof(result[key]) === 'object' && _typeof(val) === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (_typeof(val) === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n\n  return result;\n}\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\n\n\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n\n//# sourceURL=webpack:///./node_modules/textalive-app-api/node_modules/axios/lib/utils.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar g; // This works in non-strict mode\n\ng = function () {\n  return this;\n}();\n\ntry {\n  // This works if eval is allowed (see CSP)\n  g = g || new Function(\"return this\")();\n} catch (e) {\n  // This works if the window reference is available\n  if ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") g = window;\n} // g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\n\nmodule.exports = g;\n\n//# sourceURL=webpack:///(webpack)/buildin/global.js?");

/***/ }),

/***/ "./src/js/_module/player.js":
/*!**********************************!*\
  !*** ./src/js/_module/player.js ***!
  \**********************************/
/*! exports provided: player */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"player\", function() { return player; });\n/* harmony import */ var textalive_app_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! textalive-app-api */ \"./node_modules/textalive-app-api/dist/index.es.js\");\n\nfunction player() {\n  // body\n  var body = document.querySelector('#app'); // Youtube　URL\n\n  var song = 'https://www.youtube.com/watch?v=ygY2qObZv24'; // media block\n\n  var media = document.querySelector('#media'); // beat block\n\n  var beatWrap = document.querySelector('#beat');\n  var beatCircle = beatWrap.querySelector('.beat-circle'); // lyric block\n\n  var textWrap = document.querySelector(\"#text\");\n  var nextText = document.querySelector(\"#text-next\"); // 歌詞を切り替え\n\n  var lyricObserver = function lyricObserver() {\n    var target = textWrap; // オブザーバインスタンスを作成\n\n    var observer = new MutationObserver(function () {\n      var text = textWrap.querySelector('.text');\n      requestAnimationFrame(function () {\n        setTimeout(function () {\n          text.classList.add('is-active');\n        }, 0);\n      });\n    }); // オブザーバの設定\n\n    var config = {\n      attributes: true,\n      childList: true,\n      characterData: true\n    }; // 対象ノードとオブザーバの設定を渡す\n\n    observer.observe(target, config);\n  }; // beatを切り替え\n\n\n  var beatObserver = function beatObserver() {\n    var target = beatWrap; // オブザーバインスタンスを作成\n\n    var observer = new MutationObserver(function () {\n      requestAnimationFrame(function () {\n        beatCircle.classList.remove('is-beat');\n        setTimeout(function () {\n          beatCircle.classList.add('is-beat');\n        }, 0);\n      });\n    }); // オブザーバの設定\n\n    var config = {\n      attributes: true,\n      childList: true,\n      characterData: true\n    }; // 対象ノードとオブザーバの設定を渡す\n\n    observer.observe(target, config);\n  }; // 表示切り替え用オブザーバー実行\n\n\n  lyricObserver();\n  beatObserver(); // TextAlive Player\n\n  var player = new textalive_app_api__WEBPACK_IMPORTED_MODULE_0__[\"Player\"]({\n    app: true,\n    mediaElement: media\n  });\n  var wordMemo;\n  var phraseMemo; // 単語が発声されていたら表示する\n\n  var animateWord = function animateWord(now, unit) {\n    if (unit.contains(now)) {\n      // 歌詞を取得（word）\n      // let word = unit.text;\n      // 歌詞を取得（phrase）\n      var word = unit._parent.text;\n\n      if (wordMemo !== word) {\n        wordMemo = word;\n        textWrap.innerHTML = \"<p class=\\\"text\\\"><span class=\\\"text-inner\\\">\".concat(word, \"</span></p>\");\n      }\n\n      var phraseWord = unit.next._parent.text;\n\n      if (phraseMemo !== phraseWord) {\n        phraseMemo = phraseWord;\n        nextText.innerText = phraseWord;\n      }\n    }\n  };\n\n  player.addListener({\n    // 実行の準備が整ったとき\n    onAppReady: function onAppReady(app) {\n      if (app.managed) {\n        document.querySelector(\"#control\").className = \"disabled\";\n      }\n\n      if (!app.songUrl) {\n        player.createFromSongUrl(song);\n      }\n    },\n    onVideoReady: function onVideoReady() {\n      // 動画の読み込み開始\n      var w = player.video.firstWord;\n\n      while (w) {\n        w.animate = animateWord;\n        w = w.next;\n      }\n    },\n    onTimerReady: function onTimerReady() {\n      // 動画の再生準備ができたとき\n      body.setAttribute('data-load', 'true'); // タイトルを表示\n\n      var title = document.querySelector('.text-song-name');\n      title.innerText = player.data.song.name;\n      nextText.innerText = player.video.firstPhrase; // 再生ボタン\n\n      var buttonPlay = document.querySelector('#play').addEventListener('click', function (e) {\n        e.preventDefault();\n\n        if (player.isPlaying) {\n          player.requestPause();\n        } else {\n          player.requestPlay();\n        }\n      });\n    },\n    onThrottledTimeUpdate: function onThrottledTimeUpdate() {\n      // 再生中に0.1秒単位で実行\n      var beat = player.getBeats().length;\n\n      if (beat) {\n        beatWrap.removeAttribute('data-time');\n        beatWrap.setAttribute('data-time', \"\".concat(beat));\n      }\n    },\n    onPlay: function onPlay() {\n      // 再生したとき\n      media.classList.add('is-active');\n      media.classList.add('is-play');\n      body.setAttribute('data-play', 'true');\n    },\n    onPause: function onPause() {\n      // 一時停止したとき\n      body.setAttribute('data-play', 'false');\n      media.classList.remove('is-play');\n    }\n  });\n}\n\n//# sourceURL=webpack:///./src/js/_module/player.js?");

/***/ }),

/***/ "./src/js/main.js":
/*!************************!*\
  !*** ./src/js/main.js ***!
  \************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _module_player_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_module/player.js */ \"./src/js/_module/player.js\");\n\nObject(_module_player_js__WEBPACK_IMPORTED_MODULE_0__[\"player\"])();\n\n//# sourceURL=webpack:///./src/js/main.js?");

/***/ })

/******/ });